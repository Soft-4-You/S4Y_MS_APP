var Lf=Object.defineProperty;var If=(u,e,t)=>e in u?Lf(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t;var K=(u,e,t)=>(If(u,typeof e!="symbol"?e+"":e,t),t),Kh=(u,e,t)=>{if(!e.has(u))throw TypeError("Cannot "+t)};var n=(u,e,t)=>(Kh(u,e,"read from private field"),t?t.call(u):e.get(u)),A=(u,e,t)=>{if(e.has(u))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(u):e.set(u,t)},B=(u,e,t,s)=>(Kh(u,e,"write to private field"),s?s.call(u,t):e.set(u,t),t);var ie=(u,e,t,s)=>({set _(i){B(u,e,i,t)},get _(){return n(u,e,s)}}),D=(u,e,t)=>(Kh(u,e,"access private method"),t);import{D as ct,C as B8,E as Nf,r as Qh,d as Of,e as g9,f as D9,i as We,k as Hf,l as zf,t as m9,h as Gf}from"./index-0d364d6b.js";import{a as ht,b as p8,c as Wt,d as gx,e as Dx,f as mx,g as $f,r as Uf}from"./aes-76c23ac7.js";var F8={exports:{}};(function(u,e){(function(s,i){u.exports=i()})(typeof self<"u"?self:ct,function(){return function(t){var s={};function i(r){if(s[r])return s[r].exports;var x=s[r]={i:r,l:!1,exports:{}};return t[r].call(x.exports,x,x.exports,i),x.l=!0,x.exports}return i.m=t,i.c=s,i.d=function(r,x,a){i.o(r,x)||Object.defineProperty(r,x,{configurable:!1,enumerable:!0,get:a})},i.n=function(r){var x=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(x,"a",x),x},i.o=function(r,x){return Object.prototype.hasOwnProperty.call(r,x)},i.p="",i(i.s=3)}([function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=function(){function x(a,o){this.width=o,this.height=a.length/o,this.data=a}return x.createEmpty=function(a,o){return new x(new Uint8ClampedArray(a*o),a)},x.prototype.get=function(a,o){return a<0||a>=this.width||o<0||o>=this.height?!1:!!this.data[o*this.width+a]},x.prototype.set=function(a,o,l){this.data[o*this.width+a]=l?1:0},x.prototype.setRegion=function(a,o,l,c,h){for(var d=o;d<o+c;d++)for(var E=a;E<a+l;E++)this.set(E,d,!!h)},x}();s.BitMatrix=r},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=i(2);function x(o,l){return o^l}s.addOrSubtractGF=x;var a=function(){function o(l,c,h){this.primitive=l,this.size=c,this.generatorBase=h,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var d=1,E=0;E<this.size;E++)this.expTable[E]=d,d=d*2,d>=this.size&&(d=(d^this.primitive)&this.size-1);for(var E=0;E<this.size-1;E++)this.logTable[this.expTable[E]]=E;this.zero=new r.default(this,Uint8ClampedArray.from([0])),this.one=new r.default(this,Uint8ClampedArray.from([1]))}return o.prototype.multiply=function(l,c){return l===0||c===0?0:this.expTable[(this.logTable[l]+this.logTable[c])%(this.size-1)]},o.prototype.inverse=function(l){if(l===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[l]-1]},o.prototype.buildMonomial=function(l,c){if(l<0)throw new Error("Invalid monomial degree less than 0");if(c===0)return this.zero;var h=new Uint8ClampedArray(l+1);return h[0]=c,new r.default(this,h)},o.prototype.log=function(l){if(l===0)throw new Error("Can't take log(0)");return this.logTable[l]},o.prototype.exp=function(l){return this.expTable[l]},o}();s.default=a},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=i(1),x=function(){function a(o,l){if(l.length===0)throw new Error("No coefficients.");this.field=o;var c=l.length;if(c>1&&l[0]===0){for(var h=1;h<c&&l[h]===0;)h++;if(h===c)this.coefficients=o.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(c-h);for(var d=0;d<this.coefficients.length;d++)this.coefficients[d]=l[h+d]}}else this.coefficients=l}return a.prototype.degree=function(){return this.coefficients.length-1},a.prototype.isZero=function(){return this.coefficients[0]===0},a.prototype.getCoefficient=function(o){return this.coefficients[this.coefficients.length-1-o]},a.prototype.addOrSubtract=function(o){var l;if(this.isZero())return o;if(o.isZero())return this;var c=this.coefficients,h=o.coefficients;c.length>h.length&&(l=[h,c],c=l[0],h=l[1]);for(var d=new Uint8ClampedArray(h.length),E=h.length-c.length,f=0;f<E;f++)d[f]=h[f];for(var f=E;f<h.length;f++)d[f]=r.addOrSubtractGF(c[f-E],h[f]);return new a(this.field,d)},a.prototype.multiply=function(o){if(o===0)return this.field.zero;if(o===1)return this;for(var l=this.coefficients.length,c=new Uint8ClampedArray(l),h=0;h<l;h++)c[h]=this.field.multiply(this.coefficients[h],o);return new a(this.field,c)},a.prototype.multiplyPoly=function(o){if(this.isZero()||o.isZero())return this.field.zero;for(var l=this.coefficients,c=l.length,h=o.coefficients,d=h.length,E=new Uint8ClampedArray(c+d-1),f=0;f<c;f++)for(var C=l[f],p=0;p<d;p++)E[f+p]=r.addOrSubtractGF(E[f+p],this.field.multiply(C,h[p]));return new a(this.field,E)},a.prototype.multiplyByMonomial=function(o,l){if(o<0)throw new Error("Invalid degree less than 0");if(l===0)return this.field.zero;for(var c=this.coefficients.length,h=new Uint8ClampedArray(c+o),d=0;d<c;d++)h[d]=this.field.multiply(this.coefficients[d],l);return new a(this.field,h)},a.prototype.evaluateAt=function(o){var l=0;if(o===0)return this.getCoefficient(0);var c=this.coefficients.length;if(o===1)return this.coefficients.forEach(function(d){l=r.addOrSubtractGF(l,d)}),l;l=this.coefficients[0];for(var h=1;h<c;h++)l=r.addOrSubtractGF(this.field.multiply(o,l),this.coefficients[h]);return l},a}();s.default=x},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=i(4),x=i(5),a=i(11),o=i(12);function l(d){var E=o.locate(d);if(!E)return null;for(var f=0,C=E;f<C.length;f++){var p=C[f],F=a.extract(d,p),m=x.decode(F.matrix);if(m)return{binaryData:m.bytes,data:m.text,chunks:m.chunks,version:m.version,location:{topRightCorner:F.mappingFunction(p.dimension,0),topLeftCorner:F.mappingFunction(0,0),bottomRightCorner:F.mappingFunction(p.dimension,p.dimension),bottomLeftCorner:F.mappingFunction(0,p.dimension),topRightFinderPattern:p.topRight,topLeftFinderPattern:p.topLeft,bottomLeftFinderPattern:p.bottomLeft,bottomRightAlignmentPattern:p.alignmentPattern}}}return null}var c={inversionAttempts:"attemptBoth"};function h(d,E,f,C){C===void 0&&(C={});var p=c;Object.keys(p||{}).forEach(function(b){p[b]=C[b]||p[b]});var F=p.inversionAttempts==="attemptBoth"||p.inversionAttempts==="invertFirst",m=p.inversionAttempts==="onlyInvert"||p.inversionAttempts==="invertFirst",v=r.binarize(d,E,f,F),g=v.binarized,w=v.inverted,y=l(m?w:g);return!y&&(p.inversionAttempts==="attemptBoth"||p.inversionAttempts==="invertFirst")&&(y=l(m?g:w)),y}h.default=h,s.default=h},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=i(0),x=8,a=24;function o(h,d,E){return h<d?d:h>E?E:h}var l=function(){function h(d,E){this.width=d,this.data=new Uint8ClampedArray(d*E)}return h.prototype.get=function(d,E){return this.data[E*this.width+d]},h.prototype.set=function(d,E,f){this.data[E*this.width+d]=f},h}();function c(h,d,E,f){if(h.length!==d*E*4)throw new Error("Malformed data passed to binarizer.");for(var C=new l(d,E),p=0;p<d;p++)for(var F=0;F<E;F++){var m=h[(F*d+p)*4+0],v=h[(F*d+p)*4+1],g=h[(F*d+p)*4+2];C.set(p,F,.2126*m+.7152*v+.0722*g)}for(var w=Math.ceil(d/x),y=Math.ceil(E/x),b=new l(w,y),k=0;k<y;k++)for(var _=0;_<w;_++){for(var S=0,P=1/0,T=0,F=0;F<x;F++)for(var p=0;p<x;p++){var N=C.get(_*x+p,k*x+F);S+=N,P=Math.min(P,N),T=Math.max(T,N)}var L=S/Math.pow(x,2);if(T-P<=a&&(L=P/2,k>0&&_>0)){var O=(b.get(_,k-1)+2*b.get(_-1,k)+b.get(_-1,k-1))/4;P<O&&(L=O)}b.set(_,k,L)}var R=r.BitMatrix.createEmpty(d,E),M=null;f&&(M=r.BitMatrix.createEmpty(d,E));for(var k=0;k<y;k++)for(var _=0;_<w;_++){for(var $=o(_,2,w-3),V=o(k,2,y-3),S=0,q=-2;q<=2;q++)for(var I=-2;I<=2;I++)S+=b.get($+q,V+I);for(var Y=S/25,q=0;q<x;q++)for(var I=0;I<x;I++){var p=_*x+q,F=k*x+I,Z=C.get(p,F);R.set(p,F,Z<=Y),f&&M.set(p,F,!(Z<=Y))}}return f?{binarized:R,inverted:M}:{binarized:R}}s.binarize=c},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=i(0),x=i(6),a=i(9),o=i(10);function l(g,w){for(var y=g^w,b=0;y;)b++,y&=y-1;return b}function c(g,w){return w<<1|g}var h=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],d=[function(g){return(g.y+g.x)%2===0},function(g){return g.y%2===0},function(g){return g.x%3===0},function(g){return(g.y+g.x)%3===0},function(g){return(Math.floor(g.y/2)+Math.floor(g.x/3))%2===0},function(g){return g.x*g.y%2+g.x*g.y%3===0},function(g){return(g.y*g.x%2+g.y*g.x%3)%2===0},function(g){return((g.y+g.x)%2+g.y*g.x%3)%2===0}];function E(g){var w=17+4*g.versionNumber,y=r.BitMatrix.createEmpty(w,w);y.setRegion(0,0,9,9,!0),y.setRegion(w-8,0,8,9,!0),y.setRegion(0,w-8,9,8,!0);for(var b=0,k=g.alignmentPatternCenters;b<k.length;b++)for(var _=k[b],S=0,P=g.alignmentPatternCenters;S<P.length;S++){var T=P[S];_===6&&T===6||_===6&&T===w-7||_===w-7&&T===6||y.setRegion(_-2,T-2,5,5,!0)}return y.setRegion(6,9,1,w-17,!0),y.setRegion(9,6,w-17,1,!0),g.versionNumber>6&&(y.setRegion(w-11,0,3,6,!0),y.setRegion(0,w-11,6,3,!0)),y}function f(g,w,y){for(var b=d[y.dataMask],k=g.height,_=E(w),S=[],P=0,T=0,N=!0,L=k-1;L>0;L-=2){L===6&&L--;for(var O=0;O<k;O++)for(var R=N?k-1-O:O,M=0;M<2;M++){var $=L-M;if(!_.get($,R)){T++;var V=g.get($,R);b({y:R,x:$})&&(V=!V),P=c(V,P),T===8&&(S.push(P),T=0,P=0)}}N=!N}return S}function C(g){var w=g.height,y=Math.floor((w-17)/4);if(y<=6)return o.VERSIONS[y-1];for(var b=0,k=5;k>=0;k--)for(var _=w-9;_>=w-11;_--)b=c(g.get(_,k),b);for(var S=0,_=5;_>=0;_--)for(var k=w-9;k>=w-11;k--)S=c(g.get(_,k),S);for(var P=1/0,T,N=0,L=o.VERSIONS;N<L.length;N++){var O=L[N];if(O.infoBits===b||O.infoBits===S)return O;var R=l(b,O.infoBits);R<P&&(T=O,P=R),R=l(S,O.infoBits),R<P&&(T=O,P=R)}if(P<=3)return T}function p(g){for(var w=0,y=0;y<=8;y++)y!==6&&(w=c(g.get(y,8),w));for(var b=7;b>=0;b--)b!==6&&(w=c(g.get(8,b),w));for(var k=g.height,_=0,b=k-1;b>=k-7;b--)_=c(g.get(8,b),_);for(var y=k-8;y<k;y++)_=c(g.get(y,8),_);for(var S=1/0,P=null,T=0,N=h;T<N.length;T++){var L=N[T],O=L.bits,R=L.formatInfo;if(O===w||O===_)return R;var M=l(w,O);M<S&&(P=R,S=M),w!==_&&(M=l(_,O),M<S&&(P=R,S=M))}return S<=3?P:null}function F(g,w,y){var b=w.errorCorrectionLevels[y],k=[],_=0;if(b.ecBlocks.forEach(function(V){for(var q=0;q<V.numBlocks;q++)k.push({numDataCodewords:V.dataCodewordsPerBlock,codewords:[]}),_+=V.dataCodewordsPerBlock+b.ecCodewordsPerBlock}),g.length<_)return null;g=g.slice(0,_);for(var S=b.ecBlocks[0].dataCodewordsPerBlock,P=0;P<S;P++)for(var T=0,N=k;T<N.length;T++){var L=N[T];L.codewords.push(g.shift())}if(b.ecBlocks.length>1)for(var O=b.ecBlocks[0].numBlocks,R=b.ecBlocks[1].numBlocks,P=0;P<R;P++)k[O+P].codewords.push(g.shift());for(;g.length>0;)for(var M=0,$=k;M<$.length;M++){var L=$[M];L.codewords.push(g.shift())}return k}function m(g){var w=C(g);if(!w)return null;var y=p(g);if(!y)return null;var b=f(g,w,y),k=F(b,w,y.errorCorrectionLevel);if(!k)return null;for(var _=k.reduce(function(M,$){return M+$.numDataCodewords},0),S=new Uint8ClampedArray(_),P=0,T=0,N=k;T<N.length;T++){var L=N[T],O=a.decode(L.codewords,L.codewords.length-L.numDataCodewords);if(!O)return null;for(var R=0;R<L.numDataCodewords;R++)S[P++]=O[R]}try{return x.decode(S,w.versionNumber)}catch{return null}}function v(g){if(g==null)return null;var w=m(g);if(w)return w;for(var y=0;y<g.width;y++)for(var b=y+1;b<g.height;b++)g.get(y,b)!==g.get(b,y)&&(g.set(y,b,!g.get(y,b)),g.set(b,y,!g.get(b,y)));return m(g)}s.decode=v},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=i(7),x=i(8),a;(function(C){C.Numeric="numeric",C.Alphanumeric="alphanumeric",C.Byte="byte",C.Kanji="kanji",C.ECI="eci"})(a=s.Mode||(s.Mode={}));var o;(function(C){C[C.Terminator=0]="Terminator",C[C.Numeric=1]="Numeric",C[C.Alphanumeric=2]="Alphanumeric",C[C.Byte=4]="Byte",C[C.Kanji=8]="Kanji",C[C.ECI=7]="ECI"})(o||(o={}));function l(C,p){for(var F=[],m="",v=[10,12,14][p],g=C.readBits(v);g>=3;){var w=C.readBits(10);if(w>=1e3)throw new Error("Invalid numeric value above 999");var y=Math.floor(w/100),b=Math.floor(w/10)%10,k=w%10;F.push(48+y,48+b,48+k),m+=y.toString()+b.toString()+k.toString(),g-=3}if(g===2){var w=C.readBits(7);if(w>=100)throw new Error("Invalid numeric value above 99");var y=Math.floor(w/10),b=w%10;F.push(48+y,48+b),m+=y.toString()+b.toString()}else if(g===1){var w=C.readBits(4);if(w>=10)throw new Error("Invalid numeric value above 9");F.push(48+w),m+=w.toString()}return{bytes:F,text:m}}var c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function h(C,p){for(var F=[],m="",v=[9,11,13][p],g=C.readBits(v);g>=2;){var w=C.readBits(11),y=Math.floor(w/45),b=w%45;F.push(c[y].charCodeAt(0),c[b].charCodeAt(0)),m+=c[y]+c[b],g-=2}if(g===1){var y=C.readBits(6);F.push(c[y].charCodeAt(0)),m+=c[y]}return{bytes:F,text:m}}function d(C,p){for(var F=[],m="",v=[8,16,16][p],g=C.readBits(v),w=0;w<g;w++){var y=C.readBits(8);F.push(y)}try{m+=decodeURIComponent(F.map(function(b){return"%"+("0"+b.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:F,text:m}}function E(C,p){for(var F=[],m="",v=[8,10,12][p],g=C.readBits(v),w=0;w<g;w++){var y=C.readBits(13),b=Math.floor(y/192)<<8|y%192;b<7936?b+=33088:b+=49472,F.push(b>>8,b&255),m+=String.fromCharCode(x.shiftJISTable[b])}return{bytes:F,text:m}}function f(C,p){for(var F,m,v,g,w=new r.BitStream(C),y=p<=9?0:p<=26?1:2,b={text:"",bytes:[],chunks:[],version:p};w.available()>=4;){var k=w.readBits(4);if(k===o.Terminator)return b;if(k===o.ECI)w.readBits(1)===0?b.chunks.push({type:a.ECI,assignmentNumber:w.readBits(7)}):w.readBits(1)===0?b.chunks.push({type:a.ECI,assignmentNumber:w.readBits(14)}):w.readBits(1)===0?b.chunks.push({type:a.ECI,assignmentNumber:w.readBits(21)}):b.chunks.push({type:a.ECI,assignmentNumber:-1});else if(k===o.Numeric){var _=l(w,y);b.text+=_.text,(F=b.bytes).push.apply(F,_.bytes),b.chunks.push({type:a.Numeric,text:_.text})}else if(k===o.Alphanumeric){var S=h(w,y);b.text+=S.text,(m=b.bytes).push.apply(m,S.bytes),b.chunks.push({type:a.Alphanumeric,text:S.text})}else if(k===o.Byte){var P=d(w,y);b.text+=P.text,(v=b.bytes).push.apply(v,P.bytes),b.chunks.push({type:a.Byte,bytes:P.bytes,text:P.text})}else if(k===o.Kanji){var T=E(w,y);b.text+=T.text,(g=b.bytes).push.apply(g,T.bytes),b.chunks.push({type:a.Kanji,bytes:T.bytes,text:T.text})}}if(w.available()===0||w.readBits(w.available())===0)return b}s.decode=f},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=function(){function x(a){this.byteOffset=0,this.bitOffset=0,this.bytes=a}return x.prototype.readBits=function(a){if(a<1||a>32||a>this.available())throw new Error("Cannot read "+a.toString()+" bits");var o=0;if(this.bitOffset>0){var l=8-this.bitOffset,c=a<l?a:l,h=l-c,d=255>>8-c<<h;o=(this.bytes[this.byteOffset]&d)>>h,a-=c,this.bitOffset+=c,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(a>0){for(;a>=8;)o=o<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,a-=8;if(a>0){var h=8-a,d=255>>h<<h;o=o<<a|(this.bytes[this.byteOffset]&d)>>h,this.bitOffset+=a}}return o},x.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},x}();s.BitStream=r},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=i(1),x=i(2);function a(h,d,E,f){var C;d.degree()<E.degree()&&(C=[E,d],d=C[0],E=C[1]);for(var p=d,F=E,m=h.zero,v=h.one;F.degree()>=f/2;){var g=p,w=m;if(p=F,m=v,p.isZero())return null;F=g;for(var y=h.zero,b=p.getCoefficient(p.degree()),k=h.inverse(b);F.degree()>=p.degree()&&!F.isZero();){var _=F.degree()-p.degree(),S=h.multiply(F.getCoefficient(F.degree()),k);y=y.addOrSubtract(h.buildMonomial(_,S)),F=F.addOrSubtract(p.multiplyByMonomial(_,S))}if(v=y.multiplyPoly(m).addOrSubtract(w),F.degree()>=p.degree())return null}var P=v.getCoefficient(0);if(P===0)return null;var T=h.inverse(P);return[v.multiply(T),F.multiply(T)]}function o(h,d){var E=d.degree();if(E===1)return[d.getCoefficient(1)];for(var f=new Array(E),C=0,p=1;p<h.size&&C<E;p++)d.evaluateAt(p)===0&&(f[C]=h.inverse(p),C++);return C!==E?null:f}function l(h,d,E){for(var f=E.length,C=new Array(f),p=0;p<f;p++){for(var F=h.inverse(E[p]),m=1,v=0;v<f;v++)p!==v&&(m=h.multiply(m,r.addOrSubtractGF(1,h.multiply(E[v],F))));C[p]=h.multiply(d.evaluateAt(F),h.inverse(m)),h.generatorBase!==0&&(C[p]=h.multiply(C[p],F))}return C}function c(h,d){var E=new Uint8ClampedArray(h.length);E.set(h);for(var f=new r.default(285,256,0),C=new x.default(f,E),p=new Uint8ClampedArray(d),F=!1,m=0;m<d;m++){var v=C.evaluateAt(f.exp(m+f.generatorBase));p[p.length-1-m]=v,v!==0&&(F=!0)}if(!F)return E;var g=new x.default(f,p),w=a(f,f.buildMonomial(d,1),g,d);if(w===null)return null;var y=o(f,w[0]);if(y==null)return null;for(var b=l(f,w[1],y),k=0;k<y.length;k++){var _=E.length-1-f.log(y[k]);if(_<0)return null;E[_]=r.addOrSubtractGF(E[_],b[k])}return E}s.decode=c},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0}),s.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=i(0);function x(c,h,d,E){var f=c.x-h.x+d.x-E.x,C=c.y-h.y+d.y-E.y;if(f===0&&C===0)return{a11:h.x-c.x,a12:h.y-c.y,a13:0,a21:d.x-h.x,a22:d.y-h.y,a23:0,a31:c.x,a32:c.y,a33:1};var p=h.x-d.x,F=E.x-d.x,m=h.y-d.y,v=E.y-d.y,g=p*v-F*m,w=(f*v-F*C)/g,y=(p*C-f*m)/g;return{a11:h.x-c.x+w*h.x,a12:h.y-c.y+w*h.y,a13:w,a21:E.x-c.x+y*E.x,a22:E.y-c.y+y*E.y,a23:y,a31:c.x,a32:c.y,a33:1}}function a(c,h,d,E){var f=x(c,h,d,E);return{a11:f.a22*f.a33-f.a23*f.a32,a12:f.a13*f.a32-f.a12*f.a33,a13:f.a12*f.a23-f.a13*f.a22,a21:f.a23*f.a31-f.a21*f.a33,a22:f.a11*f.a33-f.a13*f.a31,a23:f.a13*f.a21-f.a11*f.a23,a31:f.a21*f.a32-f.a22*f.a31,a32:f.a12*f.a31-f.a11*f.a32,a33:f.a11*f.a22-f.a12*f.a21}}function o(c,h){return{a11:c.a11*h.a11+c.a21*h.a12+c.a31*h.a13,a12:c.a12*h.a11+c.a22*h.a12+c.a32*h.a13,a13:c.a13*h.a11+c.a23*h.a12+c.a33*h.a13,a21:c.a11*h.a21+c.a21*h.a22+c.a31*h.a23,a22:c.a12*h.a21+c.a22*h.a22+c.a32*h.a23,a23:c.a13*h.a21+c.a23*h.a22+c.a33*h.a23,a31:c.a11*h.a31+c.a21*h.a32+c.a31*h.a33,a32:c.a12*h.a31+c.a22*h.a32+c.a32*h.a33,a33:c.a13*h.a31+c.a23*h.a32+c.a33*h.a33}}function l(c,h){for(var d=a({x:3.5,y:3.5},{x:h.dimension-3.5,y:3.5},{x:h.dimension-6.5,y:h.dimension-6.5},{x:3.5,y:h.dimension-3.5}),E=x(h.topLeft,h.topRight,h.alignmentPattern,h.bottomLeft),f=o(E,d),C=r.BitMatrix.createEmpty(h.dimension,h.dimension),p=function(y,b){var k=f.a13*y+f.a23*b+f.a33;return{x:(f.a11*y+f.a21*b+f.a31)/k,y:(f.a12*y+f.a22*b+f.a32)/k}},F=0;F<h.dimension;F++)for(var m=0;m<h.dimension;m++){var v=m+.5,g=F+.5,w=p(v,g);C.set(m,F,c.get(Math.floor(w.x),Math.floor(w.y)))}return{matrix:C,mappingFunction:p}}s.extract=l},function(t,s,i){Object.defineProperty(s,"__esModule",{value:!0});var r=4,x=.5,a=1.5,o=function(v,g){return Math.sqrt(Math.pow(g.x-v.x,2)+Math.pow(g.y-v.y,2))};function l(v){return v.reduce(function(g,w){return g+w})}function c(v,g,w){var y,b,k,_,S=o(v,g),P=o(g,w),T=o(v,w),N,L,O;return P>=S&&P>=T?(y=[g,v,w],N=y[0],L=y[1],O=y[2]):T>=P&&T>=S?(b=[v,g,w],N=b[0],L=b[1],O=b[2]):(k=[v,w,g],N=k[0],L=k[1],O=k[2]),(O.x-L.x)*(N.y-L.y)-(O.y-L.y)*(N.x-L.x)<0&&(_=[O,N],N=_[0],O=_[1]),{bottomLeft:N,topLeft:L,topRight:O}}function h(v,g,w,y){var b=(l(E(v,w,y,5))/7+l(E(v,g,y,5))/7+l(E(w,v,y,5))/7+l(E(g,v,y,5))/7)/4;if(b<1)throw new Error("Invalid module size");var k=Math.round(o(v,g)/b),_=Math.round(o(v,w)/b),S=Math.floor((k+_)/2)+7;switch(S%4){case 0:S++;break;case 2:S--;break}return{dimension:S,moduleSize:b}}function d(v,g,w,y){var b=[{x:Math.floor(v.x),y:Math.floor(v.y)}],k=Math.abs(g.y-v.y)>Math.abs(g.x-v.x),_,S,P,T;k?(_=Math.floor(v.y),S=Math.floor(v.x),P=Math.floor(g.y),T=Math.floor(g.x)):(_=Math.floor(v.x),S=Math.floor(v.y),P=Math.floor(g.x),T=Math.floor(g.y));for(var N=Math.abs(P-_),L=Math.abs(T-S),O=Math.floor(-N/2),R=_<P?1:-1,M=S<T?1:-1,$=!0,V=_,q=S;V!==P+R;V+=R){var I=k?q:V,Y=k?V:q;if(w.get(I,Y)!==$&&($=!$,b.push({x:I,y:Y}),b.length===y+1))break;if(O+=L,O>0){if(q===T)break;q+=M,O-=N}}for(var Z=[],G=0;G<y;G++)b[G]&&b[G+1]?Z.push(o(b[G],b[G+1])):Z.push(0);return Z}function E(v,g,w,y){var b,k=g.y-v.y,_=g.x-v.x,S=d(v,g,w,Math.ceil(y/2)),P=d(v,{x:v.x-_,y:v.y-k},w,Math.ceil(y/2)),T=S.shift()+P.shift()-1;return(b=P.concat(T)).concat.apply(b,S)}function f(v,g){var w=l(v)/l(g),y=0;return g.forEach(function(b,k){y+=Math.pow(v[k]-b*w,2)}),{averageSize:w,error:y}}function C(v,g,w){try{var y=E(v,{x:-1,y:v.y},w,g.length),b=E(v,{x:v.x,y:-1},w,g.length),k={x:Math.max(0,v.x-v.y)-1,y:Math.max(0,v.y-v.x)-1},_=E(v,k,w,g.length),S={x:Math.min(w.width,v.x+v.y)+1,y:Math.min(w.height,v.y+v.x)+1},P=E(v,S,w,g.length),T=f(y,g),N=f(b,g),L=f(_,g),O=f(P,g),R=Math.sqrt(T.error*T.error+N.error*N.error+L.error*L.error+O.error*O.error),M=(T.averageSize+N.averageSize+L.averageSize+O.averageSize)/4,$=(Math.pow(T.averageSize-M,2)+Math.pow(N.averageSize-M,2)+Math.pow(L.averageSize-M,2)+Math.pow(O.averageSize-M,2))/M;return R+$}catch{return 1/0}}function p(v,g){for(var w=Math.round(g.x);v.get(w,Math.round(g.y));)w--;for(var y=Math.round(g.x);v.get(y,Math.round(g.y));)y++;for(var b=(w+y)/2,k=Math.round(g.y);v.get(Math.round(b),k);)k--;for(var _=Math.round(g.y);v.get(Math.round(b),_);)_++;var S=(k+_)/2;return{x:b,y:S}}function F(v){for(var g=[],w=[],y=[],b=[],k=function(I){for(var Y=0,Z=!1,G=[0,0,0,0,0],nt=function(j){var Q=v.get(j,I);if(Q===Z)Y++;else{G=[G[1],G[2],G[3],G[4],Y],Y=1,Z=Q;var kt=l(G)/7,c0=Math.abs(G[0]-kt)<kt&&Math.abs(G[1]-kt)<kt&&Math.abs(G[2]-3*kt)<3*kt&&Math.abs(G[3]-kt)<kt&&Math.abs(G[4]-kt)<kt&&!Q,h0=l(G.slice(-3))/3,ri=Math.abs(G[2]-h0)<h0&&Math.abs(G[3]-h0)<h0&&Math.abs(G[4]-h0)<h0&&Q;if(c0){var Vt=j-G[3]-G[4],_t=Vt-G[2],Re={startX:_t,endX:Vt,y:I},Xe=w.filter(function(ce){return _t>=ce.bottom.startX&&_t<=ce.bottom.endX||Vt>=ce.bottom.startX&&_t<=ce.bottom.endX||_t<=ce.bottom.startX&&Vt>=ce.bottom.endX&&G[2]/(ce.bottom.endX-ce.bottom.startX)<a&&G[2]/(ce.bottom.endX-ce.bottom.startX)>x});Xe.length>0?Xe[0].bottom=Re:w.push({top:Re,bottom:Re})}if(ri){var R0=j-G[4],je=R0-G[3],Re={startX:je,y:I,endX:R0},Xe=b.filter(function(Ft){return je>=Ft.bottom.startX&&je<=Ft.bottom.endX||R0>=Ft.bottom.startX&&je<=Ft.bottom.endX||je<=Ft.bottom.startX&&R0>=Ft.bottom.endX&&G[2]/(Ft.bottom.endX-Ft.bottom.startX)<a&&G[2]/(Ft.bottom.endX-Ft.bottom.startX)>x});Xe.length>0?Xe[0].bottom=Re:b.push({top:Re,bottom:Re})}}},W=-1;W<=v.width;W++)nt(W);g.push.apply(g,w.filter(function(j){return j.bottom.y!==I&&j.bottom.y-j.top.y>=2})),w=w.filter(function(j){return j.bottom.y===I}),y.push.apply(y,b.filter(function(j){return j.bottom.y!==I})),b=b.filter(function(j){return j.bottom.y===I})},_=0;_<=v.height;_++)k(_);g.push.apply(g,w.filter(function(I){return I.bottom.y-I.top.y>=2})),y.push.apply(y,b);var S=g.filter(function(I){return I.bottom.y-I.top.y>=2}).map(function(I){var Y=(I.top.startX+I.top.endX+I.bottom.startX+I.bottom.endX)/4,Z=(I.top.y+I.bottom.y+1)/2;if(v.get(Math.round(Y),Math.round(Z))){var G=[I.top.endX-I.top.startX,I.bottom.endX-I.bottom.startX,I.bottom.y-I.top.y+1],nt=l(G)/G.length,W=C({x:Math.round(Y),y:Math.round(Z)},[1,1,3,1,1],v);return{score:W,x:Y,y:Z,size:nt}}}).filter(function(I){return!!I}).sort(function(I,Y){return I.score-Y.score}).map(function(I,Y,Z){if(Y>r)return null;var G=Z.filter(function(W,j){return Y!==j}).map(function(W){return{x:W.x,y:W.y,score:W.score+Math.pow(W.size-I.size,2)/I.size,size:W.size}}).sort(function(W,j){return W.score-j.score});if(G.length<2)return null;var nt=I.score+G[0].score+G[1].score;return{points:[I].concat(G.slice(0,2)),score:nt}}).filter(function(I){return!!I}).sort(function(I,Y){return I.score-Y.score});if(S.length===0)return null;var P=c(S[0].points[0],S[0].points[1],S[0].points[2]),T=P.topRight,N=P.topLeft,L=P.bottomLeft,O=m(v,y,T,N,L),R=[];O&&R.push({alignmentPattern:{x:O.alignmentPattern.x,y:O.alignmentPattern.y},bottomLeft:{x:L.x,y:L.y},dimension:O.dimension,topLeft:{x:N.x,y:N.y},topRight:{x:T.x,y:T.y}});var M=p(v,T),$=p(v,N),V=p(v,L),q=m(v,y,M,$,V);return q&&R.push({alignmentPattern:{x:q.alignmentPattern.x,y:q.alignmentPattern.y},bottomLeft:{x:V.x,y:V.y},topLeft:{x:$.x,y:$.y},topRight:{x:M.x,y:M.y},dimension:q.dimension}),R.length===0?null:R}s.locate=F;function m(v,g,w,y,b){var k,_,S;try{k=h(y,w,b,v),_=k.dimension,S=k.moduleSize}catch{return null}var P={x:w.x-y.x+b.x,y:w.y-y.y+b.y},T=(o(y,b)+o(y,w))/2/S,N=1-3/T,L={x:y.x+N*(P.x-y.x),y:y.y+N*(P.y-y.y)},O=g.map(function(M){var $=(M.top.startX+M.top.endX+M.bottom.startX+M.bottom.endX)/4,V=(M.top.y+M.bottom.y+1)/2;if(v.get(Math.floor($),Math.floor(V))){var q=[M.top.endX-M.top.startX,M.bottom.endX-M.bottom.startX,M.bottom.y-M.top.y+1];l(q)/q.length;var I=C({x:Math.floor($),y:Math.floor(V)},[1,1,1],v),Y=I+o({x:$,y:V},L);return{x:$,y:V,score:Y}}}).filter(function(M){return!!M}).sort(function(M,$){return M.score-$.score}),R=T>=15&&O.length?O[0]:L;return{alignmentPattern:R,dimension:_}}}]).default})})(F8);var Xf=F8.exports;const jf=B8(Xf);var g8={exports:{}},Zh={exports:{}},v9;function Gh(){return v9||(v9=1,function(u,e){(function(t,s){u.exports=s(ht())})(ct,function(t){return function(s){var i=t,r=i.lib,x=r.Base,a=r.WordArray,o=i.x64={};o.Word=x.extend({init:function(l,c){this.high=l,this.low=c}}),o.WordArray=x.extend({init:function(l,c){l=this.words=l||[],c!=s?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,h=[],d=0;d<c;d++){var E=l[d];h.push(E.high),h.push(E.low)}return a.create(h,this.sigBytes)},clone:function(){for(var l=x.clone.call(this),c=l.words=this.words.slice(0),h=c.length,d=0;d<h;d++)c[d]=c[d].clone();return l}})}(),t})}(Zh)),Zh.exports}var Jh={exports:{}},b9;function Wf(){return b9||(b9=1,function(u,e){(function(t,s){u.exports=s(ht())})(ct,function(t){return function(){if(typeof ArrayBuffer=="function"){var s=t,i=s.lib,r=i.WordArray,x=r.init,a=r.init=function(o){if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),(o instanceof Int8Array||typeof Uint8ClampedArray<"u"&&o instanceof Uint8ClampedArray||o instanceof Int16Array||o instanceof Uint16Array||o instanceof Int32Array||o instanceof Uint32Array||o instanceof Float32Array||o instanceof Float64Array)&&(o=new Uint8Array(o.buffer,o.byteOffset,o.byteLength)),o instanceof Uint8Array){for(var l=o.byteLength,c=[],h=0;h<l;h++)c[h>>>2]|=o[h]<<24-h%4*8;x.call(this,c,l)}else x.apply(this,arguments)};a.prototype=r}}(),t.lib.WordArray})}(Jh)),Jh.exports}var td={exports:{}},w9;function Vf(){return w9||(w9=1,function(u,e){(function(t,s){u.exports=s(ht())})(ct,function(t){return function(){var s=t,i=s.lib,r=i.WordArray,x=s.enc;x.Utf16=x.Utf16BE={stringify:function(o){for(var l=o.words,c=o.sigBytes,h=[],d=0;d<c;d+=2){var E=l[d>>>2]>>>16-d%4*8&65535;h.push(String.fromCharCode(E))}return h.join("")},parse:function(o){for(var l=o.length,c=[],h=0;h<l;h++)c[h>>>1]|=o.charCodeAt(h)<<16-h%2*16;return r.create(c,l*2)}},x.Utf16LE={stringify:function(o){for(var l=o.words,c=o.sigBytes,h=[],d=0;d<c;d+=2){var E=a(l[d>>>2]>>>16-d%4*8&65535);h.push(String.fromCharCode(E))}return h.join("")},parse:function(o){for(var l=o.length,c=[],h=0;h<l;h++)c[h>>>1]|=a(o.charCodeAt(h)<<16-h%2*16);return r.create(c,l*2)}};function a(o){return o<<8&4278255360|o>>>8&16711935}}(),t.enc.Utf16})}(td)),td.exports}var ed={exports:{}},y9;function qf(){return y9||(y9=1,function(u,e){(function(t,s){u.exports=s(ht())})(ct,function(t){return function(){var s=t,i=s.lib,r=i.WordArray,x=s.enc;x.Base64url={stringify:function(o,l){l===void 0&&(l=!0);var c=o.words,h=o.sigBytes,d=l?this._safe_map:this._map;o.clamp();for(var E=[],f=0;f<h;f+=3)for(var C=c[f>>>2]>>>24-f%4*8&255,p=c[f+1>>>2]>>>24-(f+1)%4*8&255,F=c[f+2>>>2]>>>24-(f+2)%4*8&255,m=C<<16|p<<8|F,v=0;v<4&&f+v*.75<h;v++)E.push(d.charAt(m>>>6*(3-v)&63));var g=d.charAt(64);if(g)for(;E.length%4;)E.push(g);return E.join("")},parse:function(o,l){l===void 0&&(l=!0);var c=o.length,h=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var E=0;E<h.length;E++)d[h.charCodeAt(E)]=E}var f=h.charAt(64);if(f){var C=o.indexOf(f);C!==-1&&(c=C)}return a(o,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(o,l,c){for(var h=[],d=0,E=0;E<l;E++)if(E%4){var f=c[o.charCodeAt(E-1)]<<E%4*2,C=c[o.charCodeAt(E)]>>>6-E%4*2,p=f|C;h[d>>>2]|=p<<24-d%4*8,d++}return r.create(h,d)}}(),t.enc.Base64url})}(ed)),ed.exports}var sd={exports:{}},k9;function Wu(){return k9||(k9=1,function(u,e){(function(t,s){u.exports=s(ht())})(ct,function(t){return function(s){var i=t,r=i.lib,x=r.WordArray,a=r.Hasher,o=i.algo,l=[],c=[];(function(){function E(F){for(var m=s.sqrt(F),v=2;v<=m;v++)if(!(F%v))return!1;return!0}function f(F){return(F-(F|0))*4294967296|0}for(var C=2,p=0;p<64;)E(C)&&(p<8&&(l[p]=f(s.pow(C,1/2))),c[p]=f(s.pow(C,1/3)),p++),C++})();var h=[],d=o.SHA256=a.extend({_doReset:function(){this._hash=new x.init(l.slice(0))},_doProcessBlock:function(E,f){for(var C=this._hash.words,p=C[0],F=C[1],m=C[2],v=C[3],g=C[4],w=C[5],y=C[6],b=C[7],k=0;k<64;k++){if(k<16)h[k]=E[f+k]|0;else{var _=h[k-15],S=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,P=h[k-2],T=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;h[k]=S+h[k-7]+T+h[k-16]}var N=g&w^~g&y,L=p&F^p&m^F&m,O=(p<<30|p>>>2)^(p<<19|p>>>13)^(p<<10|p>>>22),R=(g<<26|g>>>6)^(g<<21|g>>>11)^(g<<7|g>>>25),M=b+R+N+c[k]+h[k],$=O+L;b=y,y=w,w=g,g=v+M|0,v=m,m=F,F=p,p=M+$|0}C[0]=C[0]+p|0,C[1]=C[1]+F|0,C[2]=C[2]+m|0,C[3]=C[3]+v|0,C[4]=C[4]+g|0,C[5]=C[5]+w|0,C[6]=C[6]+y|0,C[7]=C[7]+b|0},_doFinalize:function(){var E=this._data,f=E.words,C=this._nDataBytes*8,p=E.sigBytes*8;return f[p>>>5]|=128<<24-p%32,f[(p+64>>>9<<4)+14]=s.floor(C/4294967296),f[(p+64>>>9<<4)+15]=C,E.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var E=a.clone.call(this);return E._hash=this._hash.clone(),E}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),t.SHA256})}(sd)),sd.exports}var id={exports:{}},_9;function Yf(){return _9||(_9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wu())})(ct,function(t){return function(){var s=t,i=s.lib,r=i.WordArray,x=s.algo,a=x.SHA256,o=x.SHA224=a.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});s.SHA224=a._createHelper(o),s.HmacSHA224=a._createHmacHelper(o)}(),t.SHA224})}(id)),id.exports}var rd={exports:{}},P9;function D8(){return P9||(P9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Gh())})(ct,function(t){return function(){var s=t,i=s.lib,r=i.Hasher,x=s.x64,a=x.Word,o=x.WordArray,l=s.algo;function c(){return a.create.apply(a,arguments)}var h=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var f=0;f<80;f++)d[f]=c()})();var E=l.SHA512=r.extend({_doReset:function(){this._hash=new o.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(f,C){for(var p=this._hash.words,F=p[0],m=p[1],v=p[2],g=p[3],w=p[4],y=p[5],b=p[6],k=p[7],_=F.high,S=F.low,P=m.high,T=m.low,N=v.high,L=v.low,O=g.high,R=g.low,M=w.high,$=w.low,V=y.high,q=y.low,I=b.high,Y=b.low,Z=k.high,G=k.low,nt=_,W=S,j=P,Q=T,kt=N,c0=L,h0=O,ri=R,Vt=M,_t=$,Re=V,Xe=q,R0=I,je=Y,ce=Z,vx=G,Ft=0;Ft<80;Ft++){var Me,Es,El=d[Ft];if(Ft<16)Es=El.high=f[C+Ft*2]|0,Me=El.low=f[C+Ft*2+1]|0;else{var l9=d[Ft-15],Sr=l9.high,bx=l9.low,Df=(Sr>>>1|bx<<31)^(Sr>>>8|bx<<24)^Sr>>>7,c9=(bx>>>1|Sr<<31)^(bx>>>8|Sr<<24)^(bx>>>7|Sr<<25),h9=d[Ft-2],Tr=h9.high,wx=h9.low,mf=(Tr>>>19|wx<<13)^(Tr<<3|wx>>>29)^Tr>>>6,d9=(wx>>>19|Tr<<13)^(wx<<3|Tr>>>29)^(wx>>>6|Tr<<26),u9=d[Ft-7],vf=u9.high,bf=u9.low,E9=d[Ft-16],wf=E9.high,f9=E9.low;Me=c9+bf,Es=Df+vf+(Me>>>0<c9>>>0?1:0),Me=Me+d9,Es=Es+mf+(Me>>>0<d9>>>0?1:0),Me=Me+f9,Es=Es+wf+(Me>>>0<f9>>>0?1:0),El.high=Es,El.low=Me}var yf=Vt&Re^~Vt&R0,A9=_t&Xe^~_t&je,kf=nt&j^nt&kt^j&kt,_f=W&Q^W&c0^Q&c0,Pf=(nt>>>28|W<<4)^(nt<<30|W>>>2)^(nt<<25|W>>>7),C9=(W>>>28|nt<<4)^(W<<30|nt>>>2)^(W<<25|nt>>>7),Sf=(Vt>>>14|_t<<18)^(Vt>>>18|_t<<14)^(Vt<<23|_t>>>9),Tf=(_t>>>14|Vt<<18)^(_t>>>18|Vt<<14)^(_t<<23|Vt>>>9),B9=h[Ft],Rf=B9.high,p9=B9.low,Be=vx+Tf,fs=ce+Sf+(Be>>>0<vx>>>0?1:0),Be=Be+A9,fs=fs+yf+(Be>>>0<A9>>>0?1:0),Be=Be+p9,fs=fs+Rf+(Be>>>0<p9>>>0?1:0),Be=Be+Me,fs=fs+Es+(Be>>>0<Me>>>0?1:0),F9=C9+_f,Mf=Pf+kf+(F9>>>0<C9>>>0?1:0);ce=R0,vx=je,R0=Re,je=Xe,Re=Vt,Xe=_t,_t=ri+Be|0,Vt=h0+fs+(_t>>>0<ri>>>0?1:0)|0,h0=kt,ri=c0,kt=j,c0=Q,j=nt,Q=W,W=Be+F9|0,nt=fs+Mf+(W>>>0<Be>>>0?1:0)|0}S=F.low=S+W,F.high=_+nt+(S>>>0<W>>>0?1:0),T=m.low=T+Q,m.high=P+j+(T>>>0<Q>>>0?1:0),L=v.low=L+c0,v.high=N+kt+(L>>>0<c0>>>0?1:0),R=g.low=R+ri,g.high=O+h0+(R>>>0<ri>>>0?1:0),$=w.low=$+_t,w.high=M+Vt+($>>>0<_t>>>0?1:0),q=y.low=q+Xe,y.high=V+Re+(q>>>0<Xe>>>0?1:0),Y=b.low=Y+je,b.high=I+R0+(Y>>>0<je>>>0?1:0),G=k.low=G+vx,k.high=Z+ce+(G>>>0<vx>>>0?1:0)},_doFinalize:function(){var f=this._data,C=f.words,p=this._nDataBytes*8,F=f.sigBytes*8;C[F>>>5]|=128<<24-F%32,C[(F+128>>>10<<5)+30]=Math.floor(p/4294967296),C[(F+128>>>10<<5)+31]=p,f.sigBytes=C.length*4,this._process();var m=this._hash.toX32();return m},clone:function(){var f=r.clone.call(this);return f._hash=this._hash.clone(),f},blockSize:1024/32});s.SHA512=r._createHelper(E),s.HmacSHA512=r._createHmacHelper(E)}(),t.SHA512})}(rd)),rd.exports}var nd={exports:{}},S9;function Kf(){return S9||(S9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Gh(),D8())})(ct,function(t){return function(){var s=t,i=s.x64,r=i.Word,x=i.WordArray,a=s.algo,o=a.SHA512,l=a.SHA384=o.extend({_doReset:function(){this._hash=new x.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var c=o._doFinalize.call(this);return c.sigBytes-=16,c}});s.SHA384=o._createHelper(l),s.HmacSHA384=o._createHmacHelper(l)}(),t.SHA384})}(nd)),nd.exports}var xd={exports:{}},T9;function Qf(){return T9||(T9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Gh())})(ct,function(t){return function(s){var i=t,r=i.lib,x=r.WordArray,a=r.Hasher,o=i.x64,l=o.Word,c=i.algo,h=[],d=[],E=[];(function(){for(var p=1,F=0,m=0;m<24;m++){h[p+5*F]=(m+1)*(m+2)/2%64;var v=F%5,g=(2*p+3*F)%5;p=v,F=g}for(var p=0;p<5;p++)for(var F=0;F<5;F++)d[p+5*F]=F+(2*p+3*F)%5*5;for(var w=1,y=0;y<24;y++){for(var b=0,k=0,_=0;_<7;_++){if(w&1){var S=(1<<_)-1;S<32?k^=1<<S:b^=1<<S-32}w&128?w=w<<1^113:w<<=1}E[y]=l.create(b,k)}})();var f=[];(function(){for(var p=0;p<25;p++)f[p]=l.create()})();var C=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var p=this._state=[],F=0;F<25;F++)p[F]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(p,F){for(var m=this._state,v=this.blockSize/2,g=0;g<v;g++){var w=p[F+2*g],y=p[F+2*g+1];w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,y=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360;var b=m[g];b.high^=y,b.low^=w}for(var k=0;k<24;k++){for(var _=0;_<5;_++){for(var S=0,P=0,T=0;T<5;T++){var b=m[_+5*T];S^=b.high,P^=b.low}var N=f[_];N.high=S,N.low=P}for(var _=0;_<5;_++)for(var L=f[(_+4)%5],O=f[(_+1)%5],R=O.high,M=O.low,S=L.high^(R<<1|M>>>31),P=L.low^(M<<1|R>>>31),T=0;T<5;T++){var b=m[_+5*T];b.high^=S,b.low^=P}for(var $=1;$<25;$++){var S,P,b=m[$],V=b.high,q=b.low,I=h[$];I<32?(S=V<<I|q>>>32-I,P=q<<I|V>>>32-I):(S=q<<I-32|V>>>64-I,P=V<<I-32|q>>>64-I);var Y=f[d[$]];Y.high=S,Y.low=P}var Z=f[0],G=m[0];Z.high=G.high,Z.low=G.low;for(var _=0;_<5;_++)for(var T=0;T<5;T++){var $=_+5*T,b=m[$],nt=f[$],W=f[(_+1)%5+5*T],j=f[(_+2)%5+5*T];b.high=nt.high^~W.high&j.high,b.low=nt.low^~W.low&j.low}var b=m[0],Q=E[k];b.high^=Q.high,b.low^=Q.low}},_doFinalize:function(){var p=this._data,F=p.words;this._nDataBytes*8;var m=p.sigBytes*8,v=this.blockSize*32;F[m>>>5]|=1<<24-m%32,F[(s.ceil((m+1)/v)*v>>>5)-1]|=128,p.sigBytes=F.length*4,this._process();for(var g=this._state,w=this.cfg.outputLength/8,y=w/8,b=[],k=0;k<y;k++){var _=g[k],S=_.high,P=_.low;S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,b.push(P),b.push(S)}return new x.init(b,w)},clone:function(){for(var p=a.clone.call(this),F=p._state=this._state.slice(0),m=0;m<25;m++)F[m]=F[m].clone();return p}});i.SHA3=a._createHelper(C),i.HmacSHA3=a._createHmacHelper(C)}(Math),t.SHA3})}(xd)),xd.exports}var ad={exports:{}},R9;function Zf(){return R9||(R9=1,function(u,e){(function(t,s){u.exports=s(ht())})(ct,function(t){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(s){var i=t,r=i.lib,x=r.WordArray,a=r.Hasher,o=i.algo,l=x.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=x.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=x.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=x.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),E=x.create([0,1518500249,1859775393,2400959708,2840853838]),f=x.create([1352829926,1548603684,1836072691,2053994217,0]),C=o.RIPEMD160=a.extend({_doReset:function(){this._hash=x.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(y,b){for(var k=0;k<16;k++){var _=b+k,S=y[_];y[_]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var P=this._hash.words,T=E.words,N=f.words,L=l.words,O=c.words,R=h.words,M=d.words,$,V,q,I,Y,Z,G,nt,W,j;Z=$=P[0],G=V=P[1],nt=q=P[2],W=I=P[3],j=Y=P[4];for(var Q,k=0;k<80;k+=1)Q=$+y[b+L[k]]|0,k<16?Q+=p(V,q,I)+T[0]:k<32?Q+=F(V,q,I)+T[1]:k<48?Q+=m(V,q,I)+T[2]:k<64?Q+=v(V,q,I)+T[3]:Q+=g(V,q,I)+T[4],Q=Q|0,Q=w(Q,R[k]),Q=Q+Y|0,$=Y,Y=I,I=w(q,10),q=V,V=Q,Q=Z+y[b+O[k]]|0,k<16?Q+=g(G,nt,W)+N[0]:k<32?Q+=v(G,nt,W)+N[1]:k<48?Q+=m(G,nt,W)+N[2]:k<64?Q+=F(G,nt,W)+N[3]:Q+=p(G,nt,W)+N[4],Q=Q|0,Q=w(Q,M[k]),Q=Q+j|0,Z=j,j=W,W=w(nt,10),nt=G,G=Q;Q=P[1]+q+W|0,P[1]=P[2]+I+j|0,P[2]=P[3]+Y+Z|0,P[3]=P[4]+$+G|0,P[4]=P[0]+V+nt|0,P[0]=Q},_doFinalize:function(){var y=this._data,b=y.words,k=this._nDataBytes*8,_=y.sigBytes*8;b[_>>>5]|=128<<24-_%32,b[(_+64>>>9<<4)+14]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,y.sigBytes=(b.length+1)*4,this._process();for(var S=this._hash,P=S.words,T=0;T<5;T++){var N=P[T];P[T]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return S},clone:function(){var y=a.clone.call(this);return y._hash=this._hash.clone(),y}});function p(y,b,k){return y^b^k}function F(y,b,k){return y&b|~y&k}function m(y,b,k){return(y|~b)^k}function v(y,b,k){return y&k|b&~k}function g(y,b,k){return y^(b|~k)}function w(y,b){return y<<b|y>>>32-b}i.RIPEMD160=a._createHelper(C),i.HmacRIPEMD160=a._createHmacHelper(C)}(),t.RIPEMD160})}(ad)),ad.exports}var od={exports:{}},M9;function Jf(){return M9||(M9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wu(),p8())})(ct,function(t){return function(){var s=t,i=s.lib,r=i.Base,x=i.WordArray,a=s.algo,o=a.SHA256,l=a.HMAC,c=a.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:o,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,d){for(var E=this.cfg,f=l.create(E.hasher,h),C=x.create(),p=x.create([1]),F=C.words,m=p.words,v=E.keySize,g=E.iterations;F.length<v;){var w=f.update(d).finalize(p);f.reset();for(var y=w.words,b=y.length,k=w,_=1;_<g;_++){k=f.finalize(k),f.reset();for(var S=k.words,P=0;P<b;P++)y[P]^=S[P]}C.concat(w),m[0]++}return C.sigBytes=v*4,C}});s.PBKDF2=function(h,d,E){return c.create(E).compute(h,d)}}(),t.PBKDF2})}(od)),od.exports}var ld={exports:{}},L9;function t1(){return L9||(L9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wt())})(ct,function(t){return t.mode.CFB=function(){var s=t.lib.BlockCipherMode.extend();s.Encryptor=s.extend({processBlock:function(r,x){var a=this._cipher,o=a.blockSize;i.call(this,r,x,o,a),this._prevBlock=r.slice(x,x+o)}}),s.Decryptor=s.extend({processBlock:function(r,x){var a=this._cipher,o=a.blockSize,l=r.slice(x,x+o);i.call(this,r,x,o,a),this._prevBlock=l}});function i(r,x,a,o){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,o.encryptBlock(l,0);for(var h=0;h<a;h++)r[x+h]^=l[h]}return s}(),t.mode.CFB})}(ld)),ld.exports}var cd={exports:{}},I9;function e1(){return I9||(I9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wt())})(ct,function(t){return t.mode.CTR=function(){var s=t.lib.BlockCipherMode.extend(),i=s.Encryptor=s.extend({processBlock:function(r,x){var a=this._cipher,o=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var h=c.slice(0);a.encryptBlock(h,0),c[o-1]=c[o-1]+1|0;for(var d=0;d<o;d++)r[x+d]^=h[d]}});return s.Decryptor=i,s}(),t.mode.CTR})}(cd)),cd.exports}var hd={exports:{}},N9;function s1(){return N9||(N9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wt())})(ct,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var s=t.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var o=a>>16&255,l=a>>8&255,c=a&255;o===255?(o=0,l===255?(l=0,c===255?c=0:++c):++l):++o,a=0,a+=o<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function r(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var x=s.Encryptor=s.extend({processBlock:function(a,o){var l=this._cipher,c=l.blockSize,h=this._iv,d=this._counter;h&&(d=this._counter=h.slice(0),this._iv=void 0),r(d);var E=d.slice(0);l.encryptBlock(E,0);for(var f=0;f<c;f++)a[o+f]^=E[f]}});return s.Decryptor=x,s}(),t.mode.CTRGladman})}(hd)),hd.exports}var dd={exports:{}},O9;function i1(){return O9||(O9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wt())})(ct,function(t){return t.mode.OFB=function(){var s=t.lib.BlockCipherMode.extend(),i=s.Encryptor=s.extend({processBlock:function(r,x){var a=this._cipher,o=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var h=0;h<o;h++)r[x+h]^=c[h]}});return s.Decryptor=i,s}(),t.mode.OFB})}(dd)),dd.exports}var ud={exports:{}},H9;function r1(){return H9||(H9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wt())})(ct,function(t){return t.mode.ECB=function(){var s=t.lib.BlockCipherMode.extend();return s.Encryptor=s.extend({processBlock:function(i,r){this._cipher.encryptBlock(i,r)}}),s.Decryptor=s.extend({processBlock:function(i,r){this._cipher.decryptBlock(i,r)}}),s}(),t.mode.ECB})}(ud)),ud.exports}var Ed={exports:{}},z9;function n1(){return z9||(z9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wt())})(ct,function(t){return t.pad.AnsiX923={pad:function(s,i){var r=s.sigBytes,x=i*4,a=x-r%x,o=r+a-1;s.clamp(),s.words[o>>>2]|=a<<24-o%4*8,s.sigBytes+=a},unpad:function(s){var i=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=i}},t.pad.Ansix923})}(Ed)),Ed.exports}var fd={exports:{}},G9;function x1(){return G9||(G9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wt())})(ct,function(t){return t.pad.Iso10126={pad:function(s,i){var r=i*4,x=r-s.sigBytes%r;s.concat(t.lib.WordArray.random(x-1)).concat(t.lib.WordArray.create([x<<24],1))},unpad:function(s){var i=s.words[s.sigBytes-1>>>2]&255;s.sigBytes-=i}},t.pad.Iso10126})}(fd)),fd.exports}var Ad={exports:{}},$9;function a1(){return $9||($9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wt())})(ct,function(t){return t.pad.Iso97971={pad:function(s,i){s.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(s,i)},unpad:function(s){t.pad.ZeroPadding.unpad(s),s.sigBytes--}},t.pad.Iso97971})}(Ad)),Ad.exports}var Cd={exports:{}},U9;function o1(){return U9||(U9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wt())})(ct,function(t){return t.pad.ZeroPadding={pad:function(s,i){var r=i*4;s.clamp(),s.sigBytes+=r-(s.sigBytes%r||r)},unpad:function(s){for(var i=s.words,r=s.sigBytes-1,r=s.sigBytes-1;r>=0;r--)if(i[r>>>2]>>>24-r%4*8&255){s.sigBytes=r+1;break}}},t.pad.ZeroPadding})}(Cd)),Cd.exports}var Bd={exports:{}},X9;function l1(){return X9||(X9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wt())})(ct,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(Bd)),Bd.exports}var pd={exports:{}},j9;function c1(){return j9||(j9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),Wt())})(ct,function(t){return function(s){var i=t,r=i.lib,x=r.CipherParams,a=i.enc,o=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(o)},parse:function(c){var h=o.parse(c);return x.create({ciphertext:h})}}}(),t.format.Hex})}(pd)),pd.exports}var Fd={exports:{}},W9;function h1(){return W9||(W9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),gx(),Dx(),mx(),Wt())})(ct,function(t){return function(){var s=t,i=s.lib,r=i.WordArray,x=i.BlockCipher,a=s.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],E=a.DES=x.extend({_doReset:function(){for(var F=this._key,m=F.words,v=[],g=0;g<56;g++){var w=o[g]-1;v[g]=m[w>>>5]>>>31-w%32&1}for(var y=this._subKeys=[],b=0;b<16;b++){for(var k=y[b]=[],_=c[b],g=0;g<24;g++)k[g/6|0]|=v[(l[g]-1+_)%28]<<31-g%6,k[4+(g/6|0)]|=v[28+(l[g+24]-1+_)%28]<<31-g%6;k[0]=k[0]<<1|k[0]>>>31;for(var g=1;g<7;g++)k[g]=k[g]>>>(g-1)*4+3;k[7]=k[7]<<5|k[7]>>>27}for(var S=this._invSubKeys=[],g=0;g<16;g++)S[g]=y[15-g]},encryptBlock:function(F,m){this._doCryptBlock(F,m,this._subKeys)},decryptBlock:function(F,m){this._doCryptBlock(F,m,this._invSubKeys)},_doCryptBlock:function(F,m,v){this._lBlock=F[m],this._rBlock=F[m+1],f.call(this,4,252645135),f.call(this,16,65535),C.call(this,2,858993459),C.call(this,8,16711935),f.call(this,1,1431655765);for(var g=0;g<16;g++){for(var w=v[g],y=this._lBlock,b=this._rBlock,k=0,_=0;_<8;_++)k|=h[_][((b^w[_])&d[_])>>>0];this._lBlock=b,this._rBlock=y^k}var S=this._lBlock;this._lBlock=this._rBlock,this._rBlock=S,f.call(this,1,1431655765),C.call(this,8,16711935),C.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),F[m]=this._lBlock,F[m+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function f(F,m){var v=(this._lBlock>>>F^this._rBlock)&m;this._rBlock^=v,this._lBlock^=v<<F}function C(F,m){var v=(this._rBlock>>>F^this._lBlock)&m;this._lBlock^=v,this._rBlock^=v<<F}s.DES=x._createHelper(E);var p=a.TripleDES=x.extend({_doReset:function(){var F=this._key,m=F.words;if(m.length!==2&&m.length!==4&&m.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var v=m.slice(0,2),g=m.length<4?m.slice(0,2):m.slice(2,4),w=m.length<6?m.slice(0,2):m.slice(4,6);this._des1=E.createEncryptor(r.create(v)),this._des2=E.createEncryptor(r.create(g)),this._des3=E.createEncryptor(r.create(w))},encryptBlock:function(F,m){this._des1.encryptBlock(F,m),this._des2.decryptBlock(F,m),this._des3.encryptBlock(F,m)},decryptBlock:function(F,m){this._des3.decryptBlock(F,m),this._des2.encryptBlock(F,m),this._des1.decryptBlock(F,m)},keySize:192/32,ivSize:64/32,blockSize:64/32});s.TripleDES=x._createHelper(p)}(),t.TripleDES})}(Fd)),Fd.exports}var gd={exports:{}},V9;function d1(){return V9||(V9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),gx(),Dx(),mx(),Wt())})(ct,function(t){return function(){var s=t,i=s.lib,r=i.StreamCipher,x=s.algo,a=x.RC4=r.extend({_doReset:function(){for(var c=this._key,h=c.words,d=c.sigBytes,E=this._S=[],f=0;f<256;f++)E[f]=f;for(var f=0,C=0;f<256;f++){var p=f%d,F=h[p>>>2]>>>24-p%4*8&255;C=(C+E[f]+F)%256;var m=E[f];E[f]=E[C],E[C]=m}this._i=this._j=0},_doProcessBlock:function(c,h){c[h]^=o.call(this)},keySize:256/32,ivSize:0});function o(){for(var c=this._S,h=this._i,d=this._j,E=0,f=0;f<4;f++){h=(h+1)%256,d=(d+c[h])%256;var C=c[h];c[h]=c[d],c[d]=C,E|=c[(c[h]+c[d])%256]<<24-f*8}return this._i=h,this._j=d,E}s.RC4=r._createHelper(a);var l=x.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)o.call(this)}});s.RC4Drop=r._createHelper(l)}(),t.RC4})}(gd)),gd.exports}var Dd={exports:{}},q9;function u1(){return q9||(q9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),gx(),Dx(),mx(),Wt())})(ct,function(t){return function(){var s=t,i=s.lib,r=i.StreamCipher,x=s.algo,a=[],o=[],l=[],c=x.Rabbit=r.extend({_doReset:function(){for(var d=this._key.words,E=this.cfg.iv,f=0;f<4;f++)d[f]=(d[f]<<8|d[f]>>>24)&16711935|(d[f]<<24|d[f]>>>8)&4278255360;var C=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],p=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var f=0;f<4;f++)h.call(this);for(var f=0;f<8;f++)p[f]^=C[f+4&7];if(E){var F=E.words,m=F[0],v=F[1],g=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,w=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,y=g>>>16|w&4294901760,b=w<<16|g&65535;p[0]^=g,p[1]^=y,p[2]^=w,p[3]^=b,p[4]^=g,p[5]^=y,p[6]^=w,p[7]^=b;for(var f=0;f<4;f++)h.call(this)}},_doProcessBlock:function(d,E){var f=this._X;h.call(this),a[0]=f[0]^f[5]>>>16^f[3]<<16,a[1]=f[2]^f[7]>>>16^f[5]<<16,a[2]=f[4]^f[1]>>>16^f[7]<<16,a[3]=f[6]^f[3]>>>16^f[1]<<16;for(var C=0;C<4;C++)a[C]=(a[C]<<8|a[C]>>>24)&16711935|(a[C]<<24|a[C]>>>8)&4278255360,d[E+C]^=a[C]},blockSize:128/32,ivSize:64/32});function h(){for(var d=this._X,E=this._C,f=0;f<8;f++)o[f]=E[f];E[0]=E[0]+1295307597+this._b|0,E[1]=E[1]+3545052371+(E[0]>>>0<o[0]>>>0?1:0)|0,E[2]=E[2]+886263092+(E[1]>>>0<o[1]>>>0?1:0)|0,E[3]=E[3]+1295307597+(E[2]>>>0<o[2]>>>0?1:0)|0,E[4]=E[4]+3545052371+(E[3]>>>0<o[3]>>>0?1:0)|0,E[5]=E[5]+886263092+(E[4]>>>0<o[4]>>>0?1:0)|0,E[6]=E[6]+1295307597+(E[5]>>>0<o[5]>>>0?1:0)|0,E[7]=E[7]+3545052371+(E[6]>>>0<o[6]>>>0?1:0)|0,this._b=E[7]>>>0<o[7]>>>0?1:0;for(var f=0;f<8;f++){var C=d[f]+E[f],p=C&65535,F=C>>>16,m=((p*p>>>17)+p*F>>>15)+F*F,v=((C&4294901760)*C|0)+((C&65535)*C|0);l[f]=m^v}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s.Rabbit=r._createHelper(c)}(),t.Rabbit})}(Dd)),Dd.exports}var md={exports:{}},Y9;function E1(){return Y9||(Y9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),gx(),Dx(),mx(),Wt())})(ct,function(t){return function(){var s=t,i=s.lib,r=i.StreamCipher,x=s.algo,a=[],o=[],l=[],c=x.RabbitLegacy=r.extend({_doReset:function(){var d=this._key.words,E=this.cfg.iv,f=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],C=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)h.call(this);for(var p=0;p<8;p++)C[p]^=f[p+4&7];if(E){var F=E.words,m=F[0],v=F[1],g=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,w=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,y=g>>>16|w&4294901760,b=w<<16|g&65535;C[0]^=g,C[1]^=y,C[2]^=w,C[3]^=b,C[4]^=g,C[5]^=y,C[6]^=w,C[7]^=b;for(var p=0;p<4;p++)h.call(this)}},_doProcessBlock:function(d,E){var f=this._X;h.call(this),a[0]=f[0]^f[5]>>>16^f[3]<<16,a[1]=f[2]^f[7]>>>16^f[5]<<16,a[2]=f[4]^f[1]>>>16^f[7]<<16,a[3]=f[6]^f[3]>>>16^f[1]<<16;for(var C=0;C<4;C++)a[C]=(a[C]<<8|a[C]>>>24)&16711935|(a[C]<<24|a[C]>>>8)&4278255360,d[E+C]^=a[C]},blockSize:128/32,ivSize:64/32});function h(){for(var d=this._X,E=this._C,f=0;f<8;f++)o[f]=E[f];E[0]=E[0]+1295307597+this._b|0,E[1]=E[1]+3545052371+(E[0]>>>0<o[0]>>>0?1:0)|0,E[2]=E[2]+886263092+(E[1]>>>0<o[1]>>>0?1:0)|0,E[3]=E[3]+1295307597+(E[2]>>>0<o[2]>>>0?1:0)|0,E[4]=E[4]+3545052371+(E[3]>>>0<o[3]>>>0?1:0)|0,E[5]=E[5]+886263092+(E[4]>>>0<o[4]>>>0?1:0)|0,E[6]=E[6]+1295307597+(E[5]>>>0<o[5]>>>0?1:0)|0,E[7]=E[7]+3545052371+(E[6]>>>0<o[6]>>>0?1:0)|0,this._b=E[7]>>>0<o[7]>>>0?1:0;for(var f=0;f<8;f++){var C=d[f]+E[f],p=C&65535,F=C>>>16,m=((p*p>>>17)+p*F>>>15)+F*F,v=((C&4294901760)*C|0)+((C&65535)*C|0);l[f]=m^v}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s.RabbitLegacy=r._createHelper(c)}(),t.RabbitLegacy})}(md)),md.exports}var vd={exports:{}},K9;function f1(){return K9||(K9=1,function(u,e){(function(t,s,i){u.exports=s(ht(),gx(),Dx(),mx(),Wt())})(ct,function(t){return function(){var s=t,i=s.lib,r=i.BlockCipher,x=s.algo;const a=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function h(p,F){let m=F>>24&255,v=F>>16&255,g=F>>8&255,w=F&255,y=p.sbox[0][m]+p.sbox[1][v];return y=y^p.sbox[2][g],y=y+p.sbox[3][w],y}function d(p,F,m){let v=F,g=m,w;for(let y=0;y<a;++y)v=v^p.pbox[y],g=h(p,v)^g,w=v,v=g,g=w;return w=v,v=g,g=w,g=g^p.pbox[a],v=v^p.pbox[a+1],{left:v,right:g}}function E(p,F,m){let v=F,g=m,w;for(let y=a+1;y>1;--y)v=v^p.pbox[y],g=h(p,v)^g,w=v,v=g,g=w;return w=v,v=g,g=w,g=g^p.pbox[1],v=v^p.pbox[0],{left:v,right:g}}function f(p,F,m){for(let b=0;b<4;b++){p.sbox[b]=[];for(let k=0;k<256;k++)p.sbox[b][k]=l[b][k]}let v=0;for(let b=0;b<a+2;b++)p.pbox[b]=o[b]^F[v],v++,v>=m&&(v=0);let g=0,w=0,y=0;for(let b=0;b<a+2;b+=2)y=d(p,g,w),g=y.left,w=y.right,p.pbox[b]=g,p.pbox[b+1]=w;for(let b=0;b<4;b++)for(let k=0;k<256;k+=2)y=d(p,g,w),g=y.left,w=y.right,p.sbox[b][k]=g,p.sbox[b][k+1]=w;return!0}var C=x.Blowfish=r.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var p=this._keyPriorReset=this._key,F=p.words,m=p.sigBytes/4;f(c,F,m)}},encryptBlock:function(p,F){var m=d(c,p[F],p[F+1]);p[F]=m.left,p[F+1]=m.right},decryptBlock:function(p,F){var m=E(c,p[F],p[F+1]);p[F]=m.left,p[F+1]=m.right},blockSize:64/32,keySize:128/32,ivSize:64/32});s.Blowfish=r._createHelper(C)}(),t.Blowfish})}(vd)),vd.exports}(function(u,e){(function(t,s,i){u.exports=s(ht(),Gh(),Wf(),Vf(),gx(),qf(),Dx(),$f(),Wu(),Yf(),D8(),Kf(),Qf(),Zf(),p8(),Jf(),mx(),Wt(),t1(),e1(),s1(),i1(),r1(),n1(),x1(),a1(),o1(),l1(),c1(),Uf(),h1(),d1(),u1(),E1(),f1())})(ct,function(t){return t})})(g8);var A1=g8.exports;const Q9=B8(A1);var Vx={};Vx.d=(u,e)=>{for(var t in e)Vx.o(e,t)&&!Vx.o(u,t)&&Object.defineProperty(u,t,{enumerable:!0,get:e[t]})};Vx.o=(u,e)=>Object.prototype.hasOwnProperty.call(u,e);var J=globalThis.pdfjsLib={};Vx.d(J,{AbortException:()=>ei,AnnotationEditorLayer:()=>zu,AnnotationEditorParamsType:()=>xt,AnnotationEditorType:()=>tt,AnnotationEditorUIManager:()=>kr,AnnotationLayer:()=>h6,AnnotationMode:()=>Cs,ColorPicker:()=>tc,DOMSVGFactory:()=>e9,DrawLayer:()=>Uu,FeatureTest:()=>le,GlobalWorkerOptions:()=>us,ImageKind:()=>pl,InvalidPDFException:()=>Rd,MissingPDFException:()=>Yx,OPS:()=>qe,OutputScale:()=>Ld,PDFDataRangeTransport:()=>vE,PDFDateString:()=>Qu,PDFWorker:()=>Ur,PasswordResponses:()=>F1,PermissionFlag:()=>p1,PixelsPerInch:()=>si,RenderingCancelledException:()=>Yu,TextLayer:()=>Kx,TouchManager:()=>Zl,UnexpectedResponseException:()=>Yl,Util:()=>X,VerbosityLevel:()=>$h,XfaLayer:()=>wE,build:()=>jA,createValidAbsoluteUrl:()=>v1,fetchData:()=>Wh,getDocument:()=>IA,getFilenameFromUrl:()=>R1,getPdfFilenameFromUrl:()=>M1,getXfaPageViewport:()=>L1,isDataScheme:()=>Vh,isPdfFile:()=>Ku,noContextMenu:()=>l0,normalizeUnicode:()=>P1,setLayerDimensions:()=>yr,shadow:()=>rt,stopEvent:()=>Te,version:()=>XA});const se=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),m8=[1,0,0,1,0,0],Td=[.001,0,0,.001,0,0],C1=1e7,bd=1.35,Se={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Cs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},B1="pdfjs_internal_editor_",tt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},xt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},p1={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},qt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},pl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Pt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},yx={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},$h={ERRORS:0,WARNINGS:1,INFOS:5},qe={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},F1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Uh=$h.WARNINGS;function g1(u){Number.isInteger(u)&&(Uh=u)}function D1(){return Uh}function Xh(u){Uh>=$h.INFOS&&console.log(`Info: ${u}`)}function et(u){Uh>=$h.WARNINGS&&console.log(`Warning: ${u}`)}function ut(u){throw new Error(u)}function yt(u,e){u||ut(e)}function m1(u){switch(u==null?void 0:u.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function v1(u,e=null,t=null){if(!u)return null;try{if(t&&typeof u=="string"){if(t.addDefaultProtocol&&u.startsWith("www.")){const i=u.match(/\./g);(i==null?void 0:i.length)>=2&&(u=`http://${u}`)}if(t.tryConvertEncoding)try{u=_1(u)}catch{}}const s=e?new URL(u,e):new URL(u);if(m1(s))return s}catch{}return null}function rt(u,e,t,s=!1){return Object.defineProperty(u,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const ii=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class Z9 extends ii{constructor(e,t){super(e,"PasswordException"),this.code=t}}class wd extends ii{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Rd extends ii{constructor(e){super(e,"InvalidPDFException")}}class Yx extends ii{constructor(e){super(e,"MissingPDFException")}}class Yl extends ii{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class b1 extends ii{constructor(e){super(e,"FormatError")}}class ei extends ii{constructor(e){super(e,"AbortException")}}function v8(u){(typeof u!="object"||(u==null?void 0:u.length)===void 0)&&ut("Invalid argument for bytesToString");const e=u.length,t=8192;if(e<t)return String.fromCharCode.apply(null,u);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),x=u.subarray(i,r);s.push(String.fromCharCode.apply(null,x))}return s.join("")}function jh(u){typeof u!="string"&&ut("Invalid argument for stringToBytes");const e=u.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=u.charCodeAt(s)&255;return t}function w1(u){return String.fromCharCode(u>>24&255,u>>16&255,u>>8&255,u&255)}function Vu(u){const e=Object.create(null);for(const[t,s]of u)e[t]=s;return e}function y1(){const u=new Uint8Array(4);return u[0]=1,new Uint32Array(u.buffer,0,1)[0]===1}function k1(){try{return new Function(""),!0}catch{return!1}}class le{static get isLittleEndian(){return rt(this,"isLittleEndian",y1())}static get isEvalSupported(){return rt(this,"isEvalSupported",k1())}static get isOffscreenCanvasSupported(){return rt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return rt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?rt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):rt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return rt(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const yd=Array.from(Array(256).keys(),u=>u.toString(16).padStart(2,"0"));var Xr,Fl,Zx,Md;class X{static makeHexColor(e,t,s){return`#${yd[e]}${yd[t]}${yd[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const s=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[s,i]}static applyInverseTransform(e,t){const s=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/s,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/s;return[i,r]}static getAxialAlignedBoundingBox(e,t){const s=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),x=this.applyTransform([e[2],e[1]],t);return[Math.min(s[0],i[0],r[0],x[0]),Math.min(s[1],i[1],r[1],x[1]),Math.max(s[0],i[0],r[0],x[0]),Math.max(s[1],i[1],r[1],x[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],s=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],x=e[2]*t[1]+e[3]*t[3],a=(s+x)/2,o=Math.sqrt((s+x)**2-4*(s*x-r*i))/2,l=a+o||1,c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),x=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>x?null:[s,r,i,x]}static bezierBoundingBox(e,t,s,i,r,x,a,o,l){return l?(l[0]=Math.min(l[0],e,a),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,a),l[3]=Math.max(l[3],t,o)):l=[Math.min(e,a),Math.min(t,o),Math.max(e,a),Math.max(t,o)],D(this,Zx,Md).call(this,e,s,r,a,t,i,x,o,3*(-e+3*(s-r)+a),6*(e-2*s+r),3*(s-e),l),D(this,Zx,Md).call(this,e,s,r,a,t,i,x,o,3*(-t+3*(i-x)+o),6*(t-2*i+x),3*(i-t),l),l}}Xr=new WeakSet,Fl=function(e,t,s,i,r,x,a,o,l,c){if(l<=0||l>=1)return;const h=1-l,d=l*l,E=d*l,f=h*(h*(h*e+3*l*t)+3*d*s)+E*i,C=h*(h*(h*r+3*l*x)+3*d*a)+E*o;c[0]=Math.min(c[0],f),c[1]=Math.min(c[1],C),c[2]=Math.max(c[2],f),c[3]=Math.max(c[3],C)},Zx=new WeakSet,Md=function(e,t,s,i,r,x,a,o,l,c,h,d){if(Math.abs(l)<1e-12){Math.abs(c)>=1e-12&&D(this,Xr,Fl).call(this,e,t,s,i,r,x,a,o,-h/c,d);return}const E=c**2-4*h*l;if(E<0)return;const f=Math.sqrt(E),C=2*l;D(this,Xr,Fl).call(this,e,t,s,i,r,x,a,o,(-c+f)/C,d),D(this,Xr,Fl).call(this,e,t,s,i,r,x,a,o,(-c-f)/C,d)},A(X,Xr),A(X,Zx);function _1(u){return decodeURIComponent(escape(u))}let kd=null,J9=null;function P1(u){return kd||(kd=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,J9=new Map([["ﬅ","ſt"]])),u.replaceAll(kd,(e,t,s)=>t?t.normalize("NFKC"):J9.get(s))}function S1(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const u=new Uint8Array(32);return crypto.getRandomValues(u),v8(u)}const qu="pdfjs_internal_id_";function T1(u){return Uint8Array.prototype.toBase64?u.toBase64():btoa(v8(u))}typeof Promise.try!="function"&&(Promise.try=function(u,...e){return new Promise(t=>{t(u(...e))})});const M0="http://www.w3.org/2000/svg",oi=class oi{};K(oi,"CSS",96),K(oi,"PDF",72),K(oi,"PDF_TO_CSS_UNITS",oi.CSS/oi.PDF);let si=oi;async function Wh(u,e="text"){if(Sx(u,document.baseURI)){const t=await fetch(u);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",u,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class hl{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:x=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=x,s*=t;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,h,d,E;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,h=0,d=0,E=1;break;case 90:c=0,h=1,d=1,E=0;break;case 270:c=0,h=-1,d=-1,E=0;break;case 0:c=1,h=0,d=0,E=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,E=-E);let f,C,p,F;c===0?(f=Math.abs(l-e[1])*s+r,C=Math.abs(o-e[0])*s+x,p=(e[3]-e[1])*s,F=(e[2]-e[0])*s):(f=Math.abs(o-e[0])*s+r,C=Math.abs(l-e[1])*s+x,p=(e[2]-e[0])*s,F=(e[3]-e[1])*s),this.transform=[c*s,h*s,d*s,E*s,f-c*s*o-d*s*l,C-h*s*o-E*s*l],this.width=p,this.height=F}get rawDims(){const{userUnit:e,viewBox:t}=this,s=t.map(i=>i*e);return rt(this,"rawDims",{pageWidth:s[2]-s[0],pageHeight:s[3]-s[1],pageX:s[0],pageY:s[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new hl({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){return X.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=X.applyTransform([e[0],e[1]],this.transform),s=X.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){return X.applyInverseTransform([e,t],this.transform)}}class Yu extends ii{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Vh(u){const e=u.length;let t=0;for(;t<e&&u[t].trim()==="";)t++;return u.substring(t,t+5).toLowerCase()==="data:"}function Ku(u){return typeof u=="string"&&/\.pdf$/i.test(u)}function R1(u){return[u]=u.split(/[#?]/,1),u.substring(u.lastIndexOf("/")+1)}function M1(u,e="document.pdf"){if(typeof u!="string")return e;if(Vh(u))return et('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(u);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||e}class t8{constructor(){K(this,"started",Object.create(null));K(this,"times",[])}time(e){e in this.started&&et(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||et(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function Sx(u,e){try{const{protocol:t}=e?new URL(u,e):new URL(u);return t==="http:"||t==="https:"}catch{return!1}}function l0(u){u.preventDefault()}function Te(u){u.preventDefault(),u.stopPropagation()}var Jx;class Qu{static toDateObject(e){if(!e||typeof e!="string")return null;n(this,Jx)||B(this,Jx,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=n(this,Jx).exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let x=parseInt(t[4],10);x=x>=0&&x<=23?x:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,l==="-"?(x+=c,a+=h):l==="+"&&(x-=c,a-=h),new Date(Date.UTC(s,i,r,x,a,o))}}Jx=new WeakMap,A(Qu,Jx,void 0);function L1(u,{scale:e=1,rotation:t=0}){const{width:s,height:i}=u.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new hl({viewBox:r,userUnit:1,scale:e,rotation:t})}function Zu(u){if(u.startsWith("#")){const e=parseInt(u.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return u.startsWith("rgb(")?u.slice(4,-1).split(",").map(e=>parseInt(e)):u.startsWith("rgba(")?u.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(et(`Not a valid color format: "${u}"`),[0,0,0])}function I1(u){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of u.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;u.set(t,Zu(s))}e.remove()}function At(u){const{a:e,b:t,c:s,d:i,e:r,f:x}=u.getTransform();return[e,t,s,i,r,x]}function d0(u){const{a:e,b:t,c:s,d:i,e:r,f:x}=u.getTransform().invertSelf();return[e,t,s,i,r,x]}function yr(u,e,t=!1,s=!0){if(e instanceof hl){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:x}=u,a=le.isCSSRoundSupported,o=`var(--scale-factor) * ${i}px`,l=`var(--scale-factor) * ${r}px`,c=a?`round(down, ${o}, var(--scale-round-x, 1px))`:`calc(${o})`,h=a?`round(down, ${l}, var(--scale-round-y, 1px))`:`calc(${l})`;!t||e.rotation%180===0?(x.width=c,x.height=h):(x.width=h,x.height=c)}s&&u.setAttribute("data-main-rotation",e.rotation)}class Ld{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Bs,ci,Ye,hi,ta,ea,ic,b8,rc,w8,nc,y8,jr,gl,xc,k8,sa,Nd;const N0=class N0{constructor(e){A(this,rc);A(this,nc);A(this,jr);A(this,xc);A(this,sa);A(this,Bs,null);A(this,ci,null);A(this,Ye,void 0);A(this,hi,null);A(this,ta,null);B(this,Ye,e),n(N0,ea)||B(N0,ea,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=B(this,Bs,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=n(this,Ye)._uiManager._signal;e.addEventListener("contextmenu",l0,{signal:t}),e.addEventListener("pointerdown",D(N0,ic,b8),{signal:t});const s=B(this,hi,document.createElement("div"));s.className="buttons",e.append(s);const i=n(this,Ye).toolbarPosition;if(i){const{style:r}=e,x=n(this,Ye)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*x}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return D(this,xc,k8).call(this),e}get div(){return n(this,Bs)}hide(){var e;n(this,Bs).classList.add("hidden"),(e=n(this,ci))==null||e.hideDropdown()}show(){var e;n(this,Bs).classList.remove("hidden"),(e=n(this,ta))==null||e.shown()}async addAltText(e){const t=await e.render();D(this,jr,gl).call(this,t),n(this,hi).prepend(t,n(this,sa,Nd)),B(this,ta,e)}addColorPicker(e){B(this,ci,e);const t=e.renderButton();D(this,jr,gl).call(this,t),n(this,hi).prepend(t,n(this,sa,Nd))}remove(){var e;n(this,Bs).remove(),(e=n(this,ci))==null||e.destroy(),B(this,ci,null)}};Bs=new WeakMap,ci=new WeakMap,Ye=new WeakMap,hi=new WeakMap,ta=new WeakMap,ea=new WeakMap,ic=new WeakSet,b8=function(e){e.stopPropagation()},rc=new WeakSet,w8=function(e){n(this,Ye)._focusEventsAllowed=!1,Te(e)},nc=new WeakSet,y8=function(e){n(this,Ye)._focusEventsAllowed=!0,Te(e)},jr=new WeakSet,gl=function(e){const t=n(this,Ye)._uiManager._signal;e.addEventListener("focusin",D(this,rc,w8).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",D(this,nc,y8).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",l0,{signal:t})},xc=new WeakSet,k8=function(){const{editorType:e,_uiManager:t}=n(this,Ye),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",n(N0,ea)[e]),D(this,jr,gl).call(this,s),s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),n(this,hi).append(s)},sa=new WeakSet,Nd=function(){const e=document.createElement("div");return e.className="divider",e},A(N0,ic),A(N0,ea,null);let Id=N0;var ia,di,ui,ac,_8,oc,P8,lc,S8;class N1{constructor(e){A(this,ac);A(this,oc);A(this,lc);A(this,ia,null);A(this,di,null);A(this,ui,void 0);B(this,ui,e)}show(e,t,s){const[i,r]=D(this,oc,P8).call(this,t,s),{style:x}=n(this,di)||B(this,di,D(this,ac,_8).call(this));e.append(n(this,di)),x.insetInlineEnd=`${100*i}%`,x.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){n(this,di).remove()}}ia=new WeakMap,di=new WeakMap,ui=new WeakMap,ac=new WeakSet,_8=function(){const e=B(this,di,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",l0,{signal:n(this,ui)._signal});const t=B(this,ia,document.createElement("div"));return t.className="buttons",e.append(t),D(this,lc,S8).call(this),e},oc=new WeakSet,P8=function(e,t){let s=0,i=0;for(const r of e){const x=r.y+r.height;if(x<s)continue;const a=r.x+(t?r.width:0);if(x>s){i=a,s=x;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,s]},lc=new WeakSet,S8=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=n(this,ui)._signal;e.addEventListener("contextmenu",l0,{signal:s}),e.addEventListener("click",()=>{n(this,ui).highlightSelection("floating_button")},{signal:s}),n(this,ia).append(e)};function Kl(u,e,t){for(const s of t)e.addEventListener(s,u[s].bind(u))}var cc;class O1{constructor(){A(this,cc,0)}get id(){return`${B1}${ie(this,cc)._++}`}}cc=new WeakMap;var Wr,ra,Qt,Vr,Dl;const i9=class i9{constructor(){A(this,Vr);A(this,Wr,S1());A(this,ra,0);A(this,Qt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return rt(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return D(this,Vr,Dl).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return D(this,Vr,Dl).call(this,e,e)}async getFromBlob(e,t){const s=await t;return D(this,Vr,Dl).call(this,e,s)}async getFromId(e){n(this,Qt)||B(this,Qt,new Map);const t=n(this,Qt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){n(this,Qt)||B(this,Qt,new Map);let s=n(this,Qt).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${n(this,Wr)}_${ie(this,ra)._++}`,refCounter:1,isSvg:!1},n(this,Qt).set(e,s),n(this,Qt).set(s.id,s),s}getSvgUrl(e){const t=n(this,Qt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;n(this,Qt)||B(this,Qt,new Map);const t=n(this,Qt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${n(this,Wr)}_`)}};Wr=new WeakMap,ra=new WeakMap,Qt=new WeakMap,Vr=new WeakSet,Dl=async function(e,t){n(this,Qt)||B(this,Qt,new Map);let s=n(this,Qt).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${n(this,Wr)}_${ie(this,ra)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await Wh(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=i9._isSVGFittingCanvas,x=new FileReader,a=new Image,o=new Promise((l,c)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,l()},x.onload=async()=>{const h=s.svgUrl=x.result;a.src=await r?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=x.onerror=c});x.readAsDataURL(i),await o}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){et(i),s=null}return n(this,Qt).set(e,s),s&&n(this,Qt).set(s.id,s),s};let Od=i9;var mt,ps,na,Ct;class H1{constructor(e=128){A(this,mt,[]);A(this,ps,!1);A(this,na,void 0);A(this,Ct,-1);B(this,na,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:x=!1,keepUndo:a=!1}){if(i&&e(),n(this,ps))return;const o={cmd:e,undo:t,post:s,type:r};if(n(this,Ct)===-1){n(this,mt).length>0&&(n(this,mt).length=0),B(this,Ct,0),n(this,mt).push(o);return}if(x&&n(this,mt)[n(this,Ct)].type===r){a&&(o.undo=n(this,mt)[n(this,Ct)].undo),n(this,mt)[n(this,Ct)]=o;return}const l=n(this,Ct)+1;l===n(this,na)?n(this,mt).splice(0,1):(B(this,Ct,l),l<n(this,mt).length&&n(this,mt).splice(l)),n(this,mt).push(o)}undo(){if(n(this,Ct)===-1)return;B(this,ps,!0);const{undo:e,post:t}=n(this,mt)[n(this,Ct)];e(),t==null||t(),B(this,ps,!1),B(this,Ct,n(this,Ct)-1)}redo(){if(n(this,Ct)<n(this,mt).length-1){B(this,Ct,n(this,Ct)+1),B(this,ps,!0);const{cmd:e,post:t}=n(this,mt)[n(this,Ct)];e(),t==null||t(),B(this,ps,!1)}}hasSomethingToUndo(){return n(this,Ct)!==-1}hasSomethingToRedo(){return n(this,Ct)<n(this,mt).length-1}cleanType(e){if(n(this,Ct)!==-1){for(let t=n(this,Ct);t>=0;t--)if(n(this,mt)[t].type!==e){n(this,mt).splice(t+1,n(this,Ct)-t),B(this,Ct,t);return}n(this,mt).length=0,B(this,Ct,-1)}}destroy(){B(this,mt,null)}}mt=new WeakMap,ps=new WeakMap,na=new WeakMap,Ct=new WeakMap;var hc,T8;class dl{constructor(e){A(this,hc);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=le.platform;for(const[s,i,r={}]of e)for(const x of s){const a=x.startsWith("mac+");t&&a?(this.callbacks.set(x.slice(4),{callback:i,options:r}),this.allKeys.add(x.split("+").at(-1))):!t&&!a&&(this.callbacks.set(x,{callback:i,options:r}),this.allKeys.add(x.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(D(this,hc,T8).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:x=[],checker:a=null}}=s;a&&!a(e,t)||(i.bind(e,...x,t)(),r||Te(t))}}hc=new WeakSet,T8=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const dc=class dc{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return I1(e),rt(this,"_colors",e)}convert(e){const t=Zu(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,x)=>r===t[x]))return dc._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?X.makeHexColor(...t):e}};K(dc,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Hd=dc;var qr,pe,St,zt,Yr,H0,Kr,Ie,Fs,Ei,Qr,fi,f0,Ke,Ai,xa,aa,Zr,oa,A0,gs,Jr,Ds,C0,uc,ms,la,vs,Ci,ca,ha,Rt,ot,z0,Bi,da,ua,bs,B0,G0,Ea,Ne,tn,ml,fa,zd,Ec,R8,fc,M8,en,vl,Ac,L8,Cc,I8,Bc,N8,Aa,Gd,pc,O8,Ca,$d,Ba,Ud,Fc,H8,Gt,re,Qe,L0,gc,z8,Dc,G8,pa,Xd,mc,$8,pi,Tx,Fa,jd;const zr=class zr{constructor(e,t,s,i,r,x,a,o,l,c,h,d,E){A(this,tn);A(this,fa);A(this,Ec);A(this,fc);A(this,en);A(this,Ac);A(this,Cc);A(this,Bc);A(this,Aa);A(this,pc);A(this,Ca);A(this,Ba);A(this,Fc);A(this,Gt);A(this,Qe);A(this,gc);A(this,Dc);A(this,pa);A(this,mc);A(this,pi);A(this,Fa);A(this,qr,new AbortController);A(this,pe,null);A(this,St,new Map);A(this,zt,new Map);A(this,Yr,null);A(this,H0,null);A(this,Kr,null);A(this,Ie,new H1);A(this,Fs,null);A(this,Ei,null);A(this,Qr,0);A(this,fi,new Set);A(this,f0,null);A(this,Ke,null);A(this,Ai,new Set);K(this,"_editorUndoBar",null);A(this,xa,!1);A(this,aa,!1);A(this,Zr,!1);A(this,oa,null);A(this,A0,null);A(this,gs,null);A(this,Jr,null);A(this,Ds,!1);A(this,C0,null);A(this,uc,new O1);A(this,ms,!1);A(this,la,!1);A(this,vs,null);A(this,Ci,null);A(this,ca,null);A(this,ha,null);A(this,Rt,tt.NONE);A(this,ot,new Set);A(this,z0,null);A(this,Bi,null);A(this,da,null);A(this,ua,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,bs,[0,0]);A(this,B0,null);A(this,G0,null);A(this,Ea,null);A(this,Ne,null);const f=this._signal=n(this,qr).signal;B(this,G0,e),B(this,Ea,t),B(this,Yr,s),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:f}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),i._on("setpreference",this.onSetPreference.bind(this),{signal:f}),i._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:f}),D(this,Ac,L8).call(this),D(this,Fc,H8).call(this),D(this,Aa,Gd).call(this),B(this,H0,r.annotationStorage),B(this,oa,r.filterFactory),B(this,Bi,x),B(this,Jr,a||null),B(this,xa,o),B(this,aa,l),B(this,Zr,c),B(this,ha,h||null),this.viewParameters={realScale:si.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=d||null,this._supportsPinchToZoom=E!==!1}static get _keyboardManager(){const e=zr.prototype,t=x=>n(x,G0).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&x.hasSomethingToControl(),s=(x,{target:a})=>{if(a instanceof HTMLInputElement){const{type:o}=a;return o!=="text"&&o!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return rt(this,"_keyboardManager",new dl([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(x,{target:a})=>!(a instanceof HTMLButtonElement)&&n(x,G0).contains(a)&&!x.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(x,{target:a})=>!(a instanceof HTMLButtonElement)&&n(x,G0).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i,r;(e=n(this,Ne))==null||e.resolve(),B(this,Ne,null),(t=n(this,qr))==null||t.abort(),B(this,qr,null),this._signal=null;for(const x of n(this,zt).values())x.destroy();n(this,zt).clear(),n(this,St).clear(),n(this,Ai).clear(),B(this,pe,null),n(this,ot).clear(),n(this,Ie).destroy(),(s=n(this,Yr))==null||s.destroy(),(i=n(this,C0))==null||i.hide(),B(this,C0,null),n(this,A0)&&(clearTimeout(n(this,A0)),B(this,A0,null)),n(this,B0)&&(clearTimeout(n(this,B0)),B(this,B0,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return n(this,ha)}get useNewAltTextFlow(){return n(this,aa)}get useNewAltTextWhenAddingImage(){return n(this,Zr)}get hcmFilter(){return rt(this,"hcmFilter",n(this,Bi)?n(this,oa).addHCMFilter(n(this,Bi).foreground,n(this,Bi).background):"none")}get direction(){return rt(this,"direction",getComputedStyle(n(this,G0)).direction)}get highlightColors(){return rt(this,"highlightColors",n(this,Jr)?new Map(n(this,Jr).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return rt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),B(this,Ei,e)}setMainHighlightColorPicker(e){B(this,ca,e)}editAltText(e,t=!1){var s;(s=n(this,Yr))==null||s.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":B(this,Zr,t);break}}onPageChanging({pageNumber:e}){B(this,Qr,e-1)}focusMainContainer(){n(this,G0).focus()}findParent(e,t){for(const s of n(this,zt).values()){const{x:i,y:r,width:x,height:a}=s.div.getBoundingClientRect();if(e>=i&&e<=i+x&&t>=r&&t<=r+a)return s}return null}disableUserSelect(e=!1){n(this,Ea).classList.toggle("noUserSelect",e)}addShouldRescale(e){n(this,Ai).add(e)}removeShouldRescale(e){n(this,Ai).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*si.PDF_TO_CSS_UNITS;for(const s of n(this,Ai))s.onScaleChanging();(t=n(this,Ei))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:x}=t,a=t.toString(),l=D(this,tn,ml).call(this,t).closest(".textLayer"),c=this.getSelectionBoxes(l);if(!c)return;t.empty();const h=D(this,fa,zd).call(this,l),d=n(this,Rt)===tt.NONE,E=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:x,text:a}),d&&this.showAllEditors("highlight",!0,!0)};if(d){this.switchToMode(tt.HIGHLIGHT,E);return}E()}addToAnnotationStorage(e){!e.isEmpty()&&n(this,H0)&&!n(this,H0).has(e.id)&&n(this,H0).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,n(this,Ds)&&(B(this,Ds,!1),D(this,en,vl).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of n(this,ot))if(t.div.contains(e)){B(this,Ci,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!n(this,Ci))return;const[e,t]=n(this,Ci);B(this,Ci,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){D(this,Aa,Gd).call(this),D(this,Ca,$d).call(this)}removeEditListeners(){D(this,pc,O8).call(this),D(this,Ba,Ud).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of n(this,Ke))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of n(this,Ke))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=n(this,pe))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of n(this,ot)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const x of n(this,Ke))if(x.isHandlingMimeForPasting(r.type)){x.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){et(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const o of s){const l=await i.deserialize(o);if(!l)return;r.push(l)}const x=()=>{for(const o of r)D(this,pa,Xd).call(this,o);D(this,Fa,jd).call(this,r)},a=()=>{for(const o of r)o.remove()};this.addCommands({cmd:x,undo:a,mustExec:!0})}catch(r){et(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),n(this,Rt)!==tt.NONE&&!this.isEditorHandlingKeyboard&&zr._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,n(this,Ds)&&(B(this,Ds,!1),D(this,en,vl).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(D(this,Cc,I8).call(this),D(this,Ca,$d).call(this),D(this,Gt,re).call(this,{isEditing:n(this,Rt)!==tt.NONE,isEmpty:D(this,pi,Tx).call(this),hasSomethingToUndo:n(this,Ie).hasSomethingToUndo(),hasSomethingToRedo:n(this,Ie).hasSomethingToRedo(),hasSelectedEditor:!1})):(D(this,Bc,N8).call(this),D(this,Ba,Ud).call(this),D(this,Gt,re).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!n(this,Ke)){B(this,Ke,e);for(const t of n(this,Ke))D(this,Qe,L0).call(this,t.defaultPropertiesToUpdate)}}getId(){return n(this,uc).id}get currentLayer(){return n(this,zt).get(n(this,Qr))}getLayer(e){return n(this,zt).get(e)}get currentPageIndex(){return n(this,Qr)}addLayer(e){n(this,zt).set(e.pageIndex,e),n(this,ms)?e.enable():e.disable()}removeLayer(e){n(this,zt).delete(e.pageIndex)}async updateMode(e,t=null,s=!1){var i;if(n(this,Rt)!==e&&!(n(this,Ne)&&(await n(this,Ne).promise,!n(this,Ne)))){if(B(this,Ne,Promise.withResolvers()),B(this,Rt,e),e===tt.NONE){this.setEditingState(!1),D(this,Dc,G8).call(this),(i=this._editorUndoBar)==null||i.hide(),n(this,Ne).resolve();return}this.setEditingState(!0),await D(this,gc,z8).call(this),this.unselectAll();for(const r of n(this,zt).values())r.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),n(this,Ne).resolve();return}for(const r of n(this,St).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();n(this,Ne).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==n(this,Rt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var s;if(n(this,Ke)){switch(e){case xt.CREATE:this.currentLayer.addNewEditor();return;case xt.HIGHLIGHT_DEFAULT_COLOR:(s=n(this,ca))==null||s.updateColor(t);break;case xt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(n(this,da)||B(this,da,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of n(this,ot))i.updateParams(e,t);for(const i of n(this,Ke))i.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const x of n(this,St).values())x.editorType===e&&x.show(t);(((r=n(this,da))==null?void 0:r.get(xt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&D(this,Qe,L0).call(this,[[xt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(n(this,la)!==e){B(this,la,e);for(const t of n(this,zt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of n(this,St).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return n(this,St).get(e)}addEditor(e){n(this,St).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(n(this,A0)&&clearTimeout(n(this,A0)),B(this,A0,setTimeout(()=>{this.focusMainContainer(),B(this,A0,null)},0))),n(this,St).delete(e.id),this.unselect(e),(!e.annotationElementId||!n(this,fi).has(e.annotationElementId))&&((t=n(this,H0))==null||t.remove(e.id))}addDeletedAnnotationElement(e){n(this,fi).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return n(this,fi).has(e)}removeDeletedAnnotationElement(e){n(this,fi).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){n(this,pe)!==e&&(B(this,pe,e),e&&D(this,Qe,L0).call(this,e.propertiesToUpdate))}updateUI(e){n(this,mc,$8)===e&&D(this,Qe,L0).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){D(this,Qe,L0).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(n(this,ot).has(e)){n(this,ot).delete(e),e.unselect(),D(this,Gt,re).call(this,{hasSelectedEditor:this.hasSelection});return}n(this,ot).add(e),e.select(),D(this,Qe,L0).call(this,e.propertiesToUpdate),D(this,Gt,re).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=n(this,Ei))==null||t.commitOrRemove();for(const s of n(this,ot))s!==e&&s.unselect();n(this,ot).clear(),n(this,ot).add(e),e.select(),D(this,Qe,L0).call(this,e.propertiesToUpdate),D(this,Gt,re).call(this,{hasSelectedEditor:!0})}isSelected(e){return n(this,ot).has(e)}get firstSelectedEditor(){return n(this,ot).values().next().value}unselect(e){e.unselect(),n(this,ot).delete(e),D(this,Gt,re).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return n(this,ot).size!==0}get isEnterHandled(){return n(this,ot).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;n(this,Ie).undo(),D(this,Gt,re).call(this,{hasSomethingToUndo:n(this,Ie).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:D(this,pi,Tx).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){n(this,Ie).redo(),D(this,Gt,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:n(this,Ie).hasSomethingToRedo(),isEmpty:D(this,pi,Tx).call(this)})}addCommands(e){n(this,Ie).add(e),D(this,Gt,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:D(this,pi,Tx).call(this)})}cleanUndoStack(e){n(this,Ie).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...n(this,ot)],s=()=>{var x;(x=this._editorUndoBar)==null||x.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const x of t)D(this,pa,Xd).call(this,x)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=n(this,pe))==null||e.commitOrRemove()}hasSomethingToControl(){return n(this,pe)||this.hasSelection}selectAll(){for(const e of n(this,ot))e.commit();D(this,Fa,jd).call(this,n(this,St).values())}unselectAll(){var e;if(!(n(this,pe)&&(n(this,pe).commitOrRemove(),n(this,Rt)!==tt.NONE))&&!((e=n(this,Ei))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of n(this,ot))t.unselect();n(this,ot).clear(),D(this,Gt,re).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;n(this,bs)[0]+=e,n(this,bs)[1]+=t;const[i,r]=n(this,bs),x=[...n(this,ot)],a=1e3;n(this,B0)&&clearTimeout(n(this,B0)),B(this,B0,setTimeout(()=>{B(this,B0,null),n(this,bs)[0]=n(this,bs)[1]=0,this.addCommands({cmd:()=>{for(const o of x)n(this,St).has(o.id)&&o.translateInPage(i,r)},undo:()=>{for(const o of x)n(this,St).has(o.id)&&o.translateInPage(-i,-r)},mustExec:!1})},a));for(const o of x)o.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),B(this,f0,new Map);for(const e of n(this,ot))n(this,f0).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!n(this,f0))return!1;this.disableUserSelect(!1);const e=n(this,f0);B(this,f0,null);let t=!1;for(const[{x:i,y:r,pageIndex:x},a]of e)a.newX=i,a.newY=r,a.newPageIndex=x,t||(t=i!==a.savedX||r!==a.savedY||x!==a.savedPageIndex);if(!t)return!1;const s=(i,r,x,a)=>{if(n(this,St).has(i.id)){const o=n(this,zt).get(a);o?i._setParentAndPosition(o,r,x):(i.pageIndex=a,i.x=r,i.y=x)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:x,newPageIndex:a}]of e)s(i,r,x,a)},undo:()=>{for(const[i,{savedX:r,savedY:x,savedPageIndex:a}]of e)s(i,r,x,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(n(this,f0))for(const s of n(this,f0).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||n(this,ot).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return n(this,pe)===e}getActive(){return n(this,pe)}getMode(){return n(this,Rt)}get imageManager(){return rt(this,"imageManager",new Od)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:x}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(l,c,h,d)=>({x:(c-i)/x,y:1-(l+h-s)/r,width:d/x,height:h/r});break;case"180":a=(l,c,h,d)=>({x:1-(l+h-s)/r,y:1-(c+d-i)/x,width:h/r,height:d/x});break;case"270":a=(l,c,h,d)=>({x:1-(c+d-i)/x,y:(l-s)/r,width:d/x,height:h/r});break;default:a=(l,c,h,d)=>({x:(l-s)/r,y:(c-i)/x,width:h/r,height:d/x});break}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const h=t.getRangeAt(l);if(!h.collapsed)for(const{x:d,y:E,width:f,height:C}of h.getClientRects())f===0||C===0||o.push(a(d,E,f,C))}return o.length===0?null:o}addChangedExistingAnnotation({annotationElementId:e,id:t}){(n(this,Kr)||B(this,Kr,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=n(this,Kr))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=n(this,Kr))==null?void 0:i.get(e.data.id);if(!t)return;const s=n(this,H0).getRawValue(t);s&&(n(this,Rt)===tt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}};qr=new WeakMap,pe=new WeakMap,St=new WeakMap,zt=new WeakMap,Yr=new WeakMap,H0=new WeakMap,Kr=new WeakMap,Ie=new WeakMap,Fs=new WeakMap,Ei=new WeakMap,Qr=new WeakMap,fi=new WeakMap,f0=new WeakMap,Ke=new WeakMap,Ai=new WeakMap,xa=new WeakMap,aa=new WeakMap,Zr=new WeakMap,oa=new WeakMap,A0=new WeakMap,gs=new WeakMap,Jr=new WeakMap,Ds=new WeakMap,C0=new WeakMap,uc=new WeakMap,ms=new WeakMap,la=new WeakMap,vs=new WeakMap,Ci=new WeakMap,ca=new WeakMap,ha=new WeakMap,Rt=new WeakMap,ot=new WeakMap,z0=new WeakMap,Bi=new WeakMap,da=new WeakMap,ua=new WeakMap,bs=new WeakMap,B0=new WeakMap,G0=new WeakMap,Ea=new WeakMap,Ne=new WeakMap,tn=new WeakSet,ml=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},fa=new WeakSet,zd=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of n(this,zt).values())if(s.hasTextLayer(e))return s;return null},Ec=new WeakSet,R8=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=D(this,tn,ml).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(n(this,C0)||B(this,C0,new N1(this)),n(this,C0).show(s,i,this.direction==="ltr"))},fc=new WeakSet,M8=function(){var r,x,a;const e=document.getSelection();if(!e||e.isCollapsed){n(this,z0)&&((r=n(this,C0))==null||r.hide(),B(this,z0,null),D(this,Gt,re).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===n(this,z0))return;const i=D(this,tn,ml).call(this,e).closest(".textLayer");if(!i){n(this,z0)&&((x=n(this,C0))==null||x.hide(),B(this,z0,null),D(this,Gt,re).call(this,{hasSelectedText:!1}));return}if((a=n(this,C0))==null||a.hide(),B(this,z0,t),D(this,Gt,re).call(this,{hasSelectedText:!0}),!(n(this,Rt)!==tt.HIGHLIGHT&&n(this,Rt)!==tt.NONE)&&(n(this,Rt)===tt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),B(this,Ds,this.isShiftKeyDown),!this.isShiftKeyDown)){const o=n(this,Rt)===tt.HIGHLIGHT?D(this,fa,zd).call(this,i):null;o==null||o.toggleDrawing();const l=new AbortController,c=this.combinedSignal(l),h=d=>{d.type==="pointerup"&&d.button!==0||(l.abort(),o==null||o.toggleDrawing(!0),d.type==="pointerup"&&D(this,en,vl).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}},en=new WeakSet,vl=function(e=""){n(this,Rt)===tt.HIGHLIGHT?this.highlightSelection(e):n(this,xa)&&D(this,Ec,R8).call(this)},Ac=new WeakSet,L8=function(){document.addEventListener("selectionchange",D(this,fc,M8).bind(this),{signal:this._signal})},Cc=new WeakSet,I8=function(){if(n(this,gs))return;B(this,gs,new AbortController);const e=this.combinedSignal(n(this,gs));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},Bc=new WeakSet,N8=function(){var e;(e=n(this,gs))==null||e.abort(),B(this,gs,null)},Aa=new WeakSet,Gd=function(){if(n(this,vs))return;B(this,vs,new AbortController);const e=this.combinedSignal(n(this,vs));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},pc=new WeakSet,O8=function(){var e;(e=n(this,vs))==null||e.abort(),B(this,vs,null)},Ca=new WeakSet,$d=function(){if(n(this,Fs))return;B(this,Fs,new AbortController);const e=this.combinedSignal(n(this,Fs));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Ba=new WeakSet,Ud=function(){var e;(e=n(this,Fs))==null||e.abort(),B(this,Fs,null)},Fc=new WeakSet,H8=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Gt=new WeakSet,re=function(e){Object.entries(e).some(([s,i])=>n(this,ua)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(n(this,ua),e)}),n(this,Rt)===tt.HIGHLIGHT&&e.hasSelectedEditor===!1&&D(this,Qe,L0).call(this,[[xt.HIGHLIGHT_FREE,!0]]))},Qe=new WeakSet,L0=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},gc=new WeakSet,z8=async function(){if(!n(this,ms)){B(this,ms,!0);const e=[];for(const t of n(this,zt).values())e.push(t.enable());await Promise.all(e);for(const t of n(this,St).values())t.enable()}},Dc=new WeakSet,G8=function(){if(this.unselectAll(),n(this,ms)){B(this,ms,!1);for(const e of n(this,zt).values())e.disable();for(const e of n(this,St).values())e.disable()}},pa=new WeakSet,Xd=function(e){const t=n(this,zt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},mc=new WeakSet,$8=function(){let e=null;for(e of n(this,ot));return e},pi=new WeakSet,Tx=function(){if(n(this,St).size===0)return!0;if(n(this,St).size===1)for(const e of n(this,St).values())return e.isEmpty();return!1},Fa=new WeakSet,jd=function(e){for(const t of n(this,ot))t.unselect();n(this,ot).clear();for(const t of e)t.isEmpty()||(n(this,ot).add(t),t.select());D(this,Gt,re).call(this,{hasSelectedEditor:this.hasSelection})},K(zr,"TRANSLATE_SMALL",1),K(zr,"TRANSLATE_BIG",10);let kr=zr;var Mt,p0,Ze,sn,F0,Fe,rn,g0,Ee,$0,Fi,D0,ws,gi,Rx,nn,bl;const ne=class ne{constructor(e){A(this,gi);A(this,nn);A(this,Mt,null);A(this,p0,!1);A(this,Ze,null);A(this,sn,null);A(this,F0,null);A(this,Fe,null);A(this,rn,!1);A(this,g0,null);A(this,Ee,null);A(this,$0,null);A(this,Fi,null);A(this,D0,!1);B(this,Ee,e),B(this,D0,e._uiManager.useNewAltTextFlow),n(ne,ws)||B(ne,ws,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ne._l10n??(ne._l10n=e)}async render(){const e=B(this,Ze,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=B(this,sn,document.createElement("span"));e.append(t),n(this,D0)?(e.classList.add("new"),e.setAttribute("data-l10n-id",n(ne,ws).missing),t.setAttribute("data-l10n-id",n(ne,ws)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=n(this,Ee)._uiManager._signal;e.addEventListener("contextmenu",l0,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),n(this,Ee)._uiManager.editAltText(n(this,Ee)),n(this,D0)&&n(this,Ee)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:n(this,gi,Rx)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(B(this,rn,!0),i(r))},{signal:s}),await D(this,nn,bl).call(this),e}finish(){n(this,Ze)&&(n(this,Ze).focus({focusVisible:n(this,rn)}),B(this,rn,!1))}isEmpty(){return n(this,D0)?n(this,Mt)===null:!n(this,Mt)&&!n(this,p0)}hasData(){return n(this,D0)?n(this,Mt)!==null||!!n(this,$0):this.isEmpty()}get guessedText(){return n(this,$0)}async setGuessedText(e){n(this,Mt)===null&&(B(this,$0,e),B(this,Fi,await ne._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),D(this,nn,bl).call(this))}toggleAltTextBadge(e=!1){var t;if(!n(this,D0)||n(this,Mt)){(t=n(this,g0))==null||t.remove(),B(this,g0,null);return}if(!n(this,g0)){const s=B(this,g0,document.createElement("div"));s.className="noAltTextBadge",n(this,Ee).div.append(s)}n(this,g0).classList.toggle("hidden",!e)}serialize(e){let t=n(this,Mt);return!e&&n(this,$0)===t&&(t=n(this,Fi)),{altText:t,decorative:n(this,p0),guessedText:n(this,$0),textWithDisclaimer:n(this,Fi)}}get data(){return{altText:n(this,Mt),decorative:n(this,p0)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(B(this,$0,s),B(this,Fi,i)),!(n(this,Mt)===e&&n(this,p0)===t)&&(r||(B(this,Mt,e),B(this,p0,t)),D(this,nn,bl).call(this))}toggle(e=!1){n(this,Ze)&&(!e&&n(this,Fe)&&(clearTimeout(n(this,Fe)),B(this,Fe,null)),n(this,Ze).disabled=!e)}shown(){n(this,Ee)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:n(this,gi,Rx)}})}destroy(){var e,t;(e=n(this,Ze))==null||e.remove(),B(this,Ze,null),B(this,sn,null),B(this,F0,null),(t=n(this,g0))==null||t.remove(),B(this,g0,null)}};Mt=new WeakMap,p0=new WeakMap,Ze=new WeakMap,sn=new WeakMap,F0=new WeakMap,Fe=new WeakMap,rn=new WeakMap,g0=new WeakMap,Ee=new WeakMap,$0=new WeakMap,Fi=new WeakMap,D0=new WeakMap,ws=new WeakMap,gi=new WeakSet,Rx=function(){return n(this,Mt)&&"added"||n(this,Mt)===null&&this.guessedText&&"review"||"missing"},nn=new WeakSet,bl=async function(){var i,r,x;const e=n(this,Ze);if(!e)return;if(n(this,D0)){if(e.classList.toggle("done",!!n(this,Mt)),e.setAttribute("data-l10n-id",n(ne,ws)[n(this,gi,Rx)]),(i=n(this,sn))==null||i.setAttribute("data-l10n-id",n(ne,ws)[`${n(this,gi,Rx)}-label`]),!n(this,Mt)){(r=n(this,F0))==null||r.remove();return}}else{if(!n(this,Mt)&&!n(this,p0)){e.classList.remove("done"),(x=n(this,F0))==null||x.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=n(this,F0);if(!t){B(this,F0,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${n(this,Ee).id}`;const a=100,o=n(this,Ee)._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(n(this,Fe)),B(this,Fe,null)},{once:!0}),e.addEventListener("mouseenter",()=>{B(this,Fe,setTimeout(()=>{B(this,Fe,null),n(this,F0).classList.add("show"),n(this,Ee)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:o}),e.addEventListener("mouseleave",()=>{var l;n(this,Fe)&&(clearTimeout(n(this,Fe)),B(this,Fe,null)),(l=n(this,F0))==null||l.classList.remove("show")},{signal:o})}n(this,p0)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=n(this,Mt)),t.parentNode||e.append(t);const s=n(this,Ee).getImageForAltText();s==null||s.setAttribute("aria-describedby",t.id)},A(ne,ws,null),K(ne,"_l10n",null);let Ql=ne;var ga,Di,Da,ma,va,ba,wa,xn,U0,mi,ys,vc,U8,bc,X8,ya,Wd;const r9=class r9{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:x=null,signal:a}){A(this,vc);A(this,bc);A(this,ya);A(this,ga,void 0);A(this,Di,!1);A(this,Da,null);A(this,ma,void 0);A(this,va,void 0);A(this,ba,void 0);A(this,wa,void 0);A(this,xn,void 0);A(this,U0,null);A(this,mi,void 0);A(this,ys,null);B(this,ga,e),B(this,Da,s),B(this,ma,t),B(this,va,i),B(this,ba,r),B(this,wa,x),B(this,mi,new AbortController),B(this,xn,AbortSignal.any([a,n(this,mi).signal])),e.addEventListener("touchstart",D(this,vc,U8).bind(this),{passive:!1,signal:n(this,xn)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return rt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=n(this,mi))==null||e.abort(),B(this,mi,null)}};ga=new WeakMap,Di=new WeakMap,Da=new WeakMap,ma=new WeakMap,va=new WeakMap,ba=new WeakMap,wa=new WeakMap,xn=new WeakMap,U0=new WeakMap,mi=new WeakMap,ys=new WeakMap,vc=new WeakSet,U8=function(e){var i,r,x;if((i=n(this,ma))!=null&&i.call(this)||e.touches.length<2)return;if(!n(this,ys)){B(this,ys,new AbortController);const a=AbortSignal.any([n(this,xn),n(this,ys).signal]),o=n(this,ga),l={signal:a,passive:!1};o.addEventListener("touchmove",D(this,bc,X8).bind(this),l),o.addEventListener("touchend",D(this,ya,Wd).bind(this),l),o.addEventListener("touchcancel",D(this,ya,Wd).bind(this),l),(r=n(this,va))==null||r.call(this)}if(Te(e),e.touches.length!==2||(x=n(this,Da))!=null&&x.call(this)){B(this,U0,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),B(this,U0,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},bc=new WeakSet,X8=function(e){var g;if(!n(this,U0)||e.touches.length!==2)return;let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:x,screenY:a}=s,o=n(this,U0),{touch0X:l,touch0Y:c,touch1X:h,touch1Y:d}=o,E=h-l,f=d-c,C=x-i,p=a-r,F=Math.hypot(C,p)||1,m=Math.hypot(E,f)||1;if(!n(this,Di)&&Math.abs(m-F)<=r9.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(o.touch0X=i,o.touch0Y=r,o.touch1X=x,o.touch1Y=a,e.preventDefault(),!n(this,Di)){B(this,Di,!0);return}const v=[(i+x)/2,(r+a)/2];(g=n(this,ba))==null||g.call(this,v,m,F)},ya=new WeakSet,Wd=function(e){var t;n(this,ys).abort(),B(this,ys,null),(t=n(this,wa))==null||t.call(this),n(this,U0)&&(e.preventDefault(),B(this,U0,null),B(this,Di,!1))};let Zl=r9;var vi,Je,Et,an,ks,ka,bi,$t,wi,X0,_s,_a,yi,ge,Pa,ki,j0,m0,on,ln,Oe,_i,Sa,wc,Ta,Vd,Ra,qd,cn,wl,yc,j8,kc,W8,Ma,Yd,hn,yl,La,Kd,_c,V8,Pc,q8,Sc,Y8,Ia,Qd,Tc,K8,Na,Zd,Rc,Q8,Mc,Z8,Lc,J8,Oa,Jd,Pi,Mx;const st=class st{constructor(e){A(this,Ta);A(this,cn);A(this,yc);A(this,kc);A(this,Ma);A(this,hn);A(this,La);A(this,_c);A(this,Pc);A(this,Sc);A(this,Ia);A(this,Tc);A(this,Na);A(this,Rc);A(this,Mc);A(this,Lc);A(this,Oa);A(this,Pi);A(this,vi,null);A(this,Je,null);A(this,Et,null);A(this,an,!1);A(this,ks,null);A(this,ka,"");A(this,bi,!1);A(this,$t,null);A(this,wi,null);A(this,X0,null);A(this,_s,null);A(this,_a,"");A(this,yi,!1);A(this,ge,null);A(this,Pa,!1);A(this,ki,!1);A(this,j0,!1);A(this,m0,null);A(this,on,0);A(this,ln,0);A(this,Oe,null);A(this,_i,null);K(this,"_editToolbar",null);K(this,"_initialOptions",Object.create(null));K(this,"_initialData",null);K(this,"_isVisible",!0);K(this,"_uiManager",null);K(this,"_focusEventsAllowed",!0);A(this,Sa,!1);A(this,wc,st._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:x}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,x];const[a,o]=this.parentDimensions;this.x=e.x/a,this.y=e.y/o,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=st.prototype._resizeWithKeyboard,t=kr.TRANSLATE_SMALL,s=kr.TRANSLATE_BIG;return rt(this,"_resizerKeyboardManager",new dl([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],st.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return rt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new z1({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(st._l10n??(st._l10n=e),st._l10nResizer||(st._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),st._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);st._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ut("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return n(this,Sa)}set _isDraggable(e){var t;B(this,Sa,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=n(this,wc)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):D(this,Pi,Mx).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(n(this,yi)?B(this,yi,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,x]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/x,this.fixAndSetPosition()}translate(e,t){D(this,Ta,Vd).call(this,this.parentDimensions,e,t)}translateInPage(e,t){n(this,ge)||B(this,ge,[this.x,this.y,this.width,this.height]),D(this,Ta,Vd).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){n(this,ge)||B(this,ge,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x,y:a}=this;const[o,l]=this.getBaseTranslation();x+=o,a+=l;const{style:c}=s;c.left=`${(100*x).toFixed(2)}%`,c.top=`${(100*a).toFixed(2)}%`,this._onTranslating(x,a),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!n(this,ge)&&(n(this,ge)[0]!==this.x||n(this,ge)[1]!==this.y)}get _hasBeenResized(){return!!n(this,ge)&&(n(this,ge)[2]!==this.width||n(this,ge)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=st,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:x,width:a,height:o}=this;if(a*=s,o*=i,r*=s,x*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(s-a,r)),x=Math.max(0,Math.min(i-o,x));break;case 90:r=Math.max(0,Math.min(s-o,r)),x=Math.min(i,Math.max(a,x));break;case 180:r=Math.min(s,Math.max(a,r)),x=Math.min(i,Math.max(o,x));break;case 270:r=Math.min(s,Math.max(o,r)),x=Math.max(0,Math.min(i-a,x));break}this.x=r/=s,this.y=x/=i;const[l,c]=this.getBaseTranslation();r+=l,x+=c,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*x).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return D(s=st,Ra,qd).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return D(s=st,Ra,qd).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/s).toFixed(2)}%`,n(this,bi)||(r.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,i=s.endsWith("%"),r=!n(this,bi)&&t.endsWith("%");if(i&&r)return;const[x,a]=this.parentDimensions;i||(e.width=`${(100*parseFloat(s)/x).toFixed(2)}%`),!n(this,bi)&&!r&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=n(this,Et))==null||e.finish()}async addEditToolbar(){return this._editToolbar||n(this,ki)?this._editToolbar:(this._editToolbar=new Id(this),this.div.append(this._editToolbar.render()),n(this,Et)&&await this._editToolbar.addAltText(n(this,Et)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=n(this,Et))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){n(this,Et)||(Ql.initialize(st._l10n),B(this,Et,new Ql(this)),n(this,vi)&&(n(this,Et).data=n(this,vi),B(this,vi,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=n(this,Et))==null?void 0:e.data}set altTextData(e){n(this,Et)&&(n(this,Et).data=e)}get guessedAltText(){var e;return(e=n(this,Et))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=n(this,Et))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=n(this,Et))==null?void 0:t.serialize(e)}hasAltText(){return!!n(this,Et)&&!n(this,Et).isEmpty()}hasAltTextData(){var e;return((e=n(this,Et))==null?void 0:e.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=n(this,an)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),D(this,Na,Zd).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),Kl(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(n(this,_i)||B(this,_i,new Zl({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:D(this,_c,V8).bind(this),onPinching:D(this,Pc,q8).bind(this),onPinchEnd:D(this,Sc,Y8).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(e){const{isMac:t}=le.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(B(this,yi,!0),this._isDraggable){D(this,Tc,K8).call(this,e);return}D(this,Ia,Qd).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){n(this,m0)&&clearTimeout(n(this,m0)),B(this,m0,setTimeout(()=>{var e;B(this,m0,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,x]=this.pageDimensions,[a,o]=this.pageTranslation,l=e/i,c=t/i,h=this.x*r,d=this.y*x,E=this.width*r,f=this.height*x;switch(s){case 0:return[h+l+a,x-d-c-f+o,h+l+E+a,x-d-c+o];case 90:return[h+c+a,x-d+l+o,h+c+f+a,x-d+l+E+o];case 180:return[h-l-E+a,x-d+c+o,h-l+a,x-d+c+f+o];case 270:return[h-c-f+a,x-d-l-E+o,h-c+a,x-d-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,x]=e,a=r-s,o=x-i;switch(this.rotation){case 0:return[s,t-x,a,o];case 90:return[s,t-i,o,a];case 180:return[r,t-i,a,o];case 270:return[r,t-x,o,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){B(this,ki,!0)}disableEditMode(){B(this,ki,!1)}isInEditMode(){return n(this,ki)}shouldGetKeyboardEvents(){return n(this,j0)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:x}=window;return t<x&&i>0&&e<r&&s>0}rebuild(){D(this,Na,Zd).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){ut("An editor must be serializable")}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});i.rotation=e.rotation,B(i,vi,e.accessibilityData);const[r,x]=i.pageDimensions,[a,o,l,c]=i.getRectInCurrentCoords(e.rect,x);return i.x=a/r,i.y=o/x,i.width=l/r,i.height=c/x,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=n(this,_s))==null||e.abort(),B(this,_s,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),n(this,m0)&&(clearTimeout(n(this,m0)),B(this,m0,null)),D(this,Pi,Mx).call(this),this.removeEditToolbar(),n(this,Oe)){for(const s of n(this,Oe).values())clearTimeout(s);B(this,Oe,null)}this.parent=null,(t=n(this,_i))==null||t.destroy(),B(this,_i,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(D(this,yc,j8).call(this),n(this,$t).classList.remove("hidden"),Kl(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),B(this,X0,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=n(this,$t).children;if(!n(this,Je)){B(this,Je,Array.from(t));const x=D(this,Rc,Q8).bind(this),a=D(this,Mc,Z8).bind(this),o=this._uiManager._signal;for(const l of n(this,Je)){const c=l.getAttribute("data-resizer-name");l.setAttribute("role","spinbutton"),l.addEventListener("keydown",x,{signal:o}),l.addEventListener("blur",a,{signal:o}),l.addEventListener("focus",D(this,Lc,J8).bind(this,c),{signal:o}),l.setAttribute("data-l10n-id",st._l10nResizer[c])}}const s=n(this,Je)[0];let i=0;for(const x of t){if(x===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(n(this,Je).length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)n(this,$t).append(n(this,$t).firstChild);else if(r>i)for(let a=0;a<r-i;a++)n(this,$t).firstChild.before(n(this,$t).lastChild);let x=0;for(const a of t){const l=n(this,Je)[x++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",st._l10nResizer[l])}}D(this,Oa,Jd).call(this,0),B(this,j0,!0),n(this,$t).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){n(this,j0)&&D(this,La,Kd).call(this,n(this,_a),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){D(this,Pi,Mx).call(this),this.div.focus()}select(){var e,t,s;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=n(this,Et))==null||s.toggleAltTextBadge(!1)}unselect(){var e,t,s,i,r;(e=n(this,$t))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=n(this,Et))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return n(this,Pa)}set isEditing(e){B(this,Pa,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){B(this,bi,!0);const s=e/t,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){n(this,Oe)||B(this,Oe,new Map);const{action:s}=e;let i=n(this,Oe).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),n(this,Oe).delete(s),n(this,Oe).size===0&&B(this,Oe,null)},st._telemetryTimeout),n(this,Oe).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),B(this,an,!1)}disable(){this.div&&(this.div.tabIndex=-1),B(this,an,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};vi=new WeakMap,Je=new WeakMap,Et=new WeakMap,an=new WeakMap,ks=new WeakMap,ka=new WeakMap,bi=new WeakMap,$t=new WeakMap,wi=new WeakMap,X0=new WeakMap,_s=new WeakMap,_a=new WeakMap,yi=new WeakMap,ge=new WeakMap,Pa=new WeakMap,ki=new WeakMap,j0=new WeakMap,m0=new WeakMap,on=new WeakMap,ln=new WeakMap,Oe=new WeakMap,_i=new WeakMap,Sa=new WeakMap,wc=new WeakMap,Ta=new WeakSet,Vd=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ra=new WeakSet,qd=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},cn=new WeakSet,wl=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},yc=new WeakSet,j8=function(){if(n(this,$t))return;B(this,$t,document.createElement("div")),n(this,$t).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");n(this,$t).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",D(this,kc,W8).bind(this,s),{signal:t}),i.addEventListener("contextmenu",l0,{signal:t}),i.tabIndex=-1}this.div.prepend(n(this,$t))},kc=new WeakSet,W8=function(e,t){var c;t.preventDefault();const{isMac:s}=le.platform;if(t.button!==0||t.ctrlKey&&s)return;(c=n(this,Et))==null||c.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,B(this,wi,[t.screenX,t.screenY]);const r=new AbortController,x=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",D(this,La,Kd).bind(this,e),{passive:!0,capture:!0,signal:x}),window.addEventListener("touchmove",Te,{passive:!1,signal:x}),window.addEventListener("contextmenu",l0,{signal:x}),B(this,X0,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,o=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const l=()=>{var h;r.abort(),this.parent.togglePointerEvents(!0),(h=n(this,Et))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=o,D(this,hn,yl).call(this)};window.addEventListener("pointerup",l,{signal:x}),window.addEventListener("blur",l,{signal:x})},Ma=new WeakSet,Yd=function(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t;const[r,x]=this.parentDimensions;this.setDims(r*s,x*i),this.fixAndSetPosition(),this._onResized()},hn=new WeakSet,yl=function(){if(!n(this,X0))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=n(this,X0);B(this,X0,null);const r=this.x,x=this.y,a=this.width,o=this.height;r===e&&x===t&&a===s&&o===i||this.addCommands({cmd:D(this,Ma,Yd).bind(this,r,x,a,o),undo:D(this,Ma,Yd).bind(this,e,t,s,i),mustExec:!0})},La=new WeakSet,Kd=function(e,t){const[s,i]=this.parentDimensions,r=this.x,x=this.y,a=this.width,o=this.height,l=st.MIN_SIZE/s,c=st.MIN_SIZE/i,h=D(this,cn,wl).call(this,this.rotation),d=(R,M)=>[h[0]*R+h[2]*M,h[1]*R+h[3]*M],E=D(this,cn,wl).call(this,360-this.rotation),f=(R,M)=>[E[0]*R+E[2]*M,E[1]*R+E[3]*M];let C,p,F=!1,m=!1;switch(e){case"topLeft":F=!0,C=(R,M)=>[0,0],p=(R,M)=>[R,M];break;case"topMiddle":C=(R,M)=>[R/2,0],p=(R,M)=>[R/2,M];break;case"topRight":F=!0,C=(R,M)=>[R,0],p=(R,M)=>[0,M];break;case"middleRight":m=!0,C=(R,M)=>[R,M/2],p=(R,M)=>[0,M/2];break;case"bottomRight":F=!0,C=(R,M)=>[R,M],p=(R,M)=>[0,0];break;case"bottomMiddle":C=(R,M)=>[R/2,M],p=(R,M)=>[R/2,0];break;case"bottomLeft":F=!0,C=(R,M)=>[0,M],p=(R,M)=>[R,0];break;case"middleLeft":m=!0,C=(R,M)=>[0,M/2],p=(R,M)=>[R,M/2];break}const v=C(a,o),g=p(a,o);let w=d(...g);const y=st._round(r+w[0]),b=st._round(x+w[1]);let k=1,_=1,S,P;if(t.fromKeyboard)({deltaX:S,deltaY:P}=t);else{const{screenX:R,screenY:M}=t,[$,V]=n(this,wi);[S,P]=this.screenToPageTranslation(R-$,M-V),n(this,wi)[0]=R,n(this,wi)[1]=M}if([S,P]=f(S/s,P/i),F){const R=Math.hypot(a,o);k=_=Math.max(Math.min(Math.hypot(g[0]-v[0]-S,g[1]-v[1]-P)/R,1/a,1/o),l/a,c/o)}else m?k=Math.max(l,Math.min(1,Math.abs(g[0]-v[0]-S)))/a:_=Math.max(c,Math.min(1,Math.abs(g[1]-v[1]-P)))/o;const T=st._round(a*k),N=st._round(o*_);w=d(...p(T,N));const L=y-w[0],O=b-w[1];n(this,ge)||B(this,ge,[this.x,this.y,this.width,this.height]),this.width=T,this.height=N,this.x=L,this.y=O,this.setDims(s*T,i*N),this.fixAndSetPosition(),this._onResizing()},_c=new WeakSet,V8=function(){var e;B(this,X0,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=n(this,Et))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Pc=new WeakSet,q8=function(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const x=D(this,cn,wl).call(this,this.rotation),a=(y,b)=>[x[0]*y+x[2]*b,x[1]*y+x[3]*b],[o,l]=this.parentDimensions,c=this.x,h=this.y,d=this.width,E=this.height,f=st.MIN_SIZE/o,C=st.MIN_SIZE/l;r=Math.max(Math.min(r,1/d,1/E),f/d,C/E);const p=st._round(d*r),F=st._round(E*r);if(p===d&&F===E)return;n(this,ge)||B(this,ge,[c,h,d,E]);const m=a(d/2,E/2),v=st._round(c+m[0]),g=st._round(h+m[1]),w=a(p/2,F/2);this.x=v-w[0],this.y=g-w[1],this.width=p,this.height=F,this.setDims(o*p,l*F),this.fixAndSetPosition(),this._onResizing()},Sc=new WeakSet,Y8=function(){var e;(e=n(this,Et))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),D(this,hn,yl).call(this)},Ia=new WeakSet,Qd=function(e){const{isMac:t}=le.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},Tc=new WeakSet,K8=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),x={capture:!0,passive:!1,signal:r},a=l=>{i.abort(),B(this,ks,null),B(this,yi,!1),this._uiManager.endDragSession()||D(this,Ia,Qd).call(this,l),s&&this._onStopDragging()};t&&(B(this,on,e.clientX),B(this,ln,e.clientY),B(this,ks,e.pointerId),B(this,ka,e.pointerType),window.addEventListener("pointermove",l=>{s||(s=!0,this._onStartDragging());const{clientX:c,clientY:h,pointerId:d}=l;if(d!==n(this,ks)){Te(l);return}const[E,f]=this.screenToPageTranslation(c-n(this,on),h-n(this,ln));B(this,on,c),B(this,ln,h),this._uiManager.dragSelectedEditors(E,f)},x),window.addEventListener("touchmove",Te,x),window.addEventListener("pointerdown",l=>{l.pointerType===n(this,ka)&&(n(this,_i)||l.isPrimary)&&a(l),Te(l)},x));const o=l=>{if(!n(this,ks)||n(this,ks)===l.pointerId){a(l);return}Te(l)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})},Na=new WeakSet,Zd=function(){if(n(this,_s)||!this.div)return;B(this,_s,new AbortController);const e=this._uiManager.combinedSignal(n(this,_s));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Rc=new WeakSet,Q8=function(e){st._resizerKeyboardManager.exec(this,e)},Mc=new WeakSet,Z8=function(e){var t;n(this,j0)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==n(this,$t)&&D(this,Pi,Mx).call(this)},Lc=new WeakSet,J8=function(e){B(this,_a,n(this,j0)?e:"")},Oa=new WeakSet,Jd=function(e){if(n(this,Je))for(const t of n(this,Je))t.tabIndex=e},Pi=new WeakSet,Mx=function(){B(this,j0,!1),D(this,Oa,Jd).call(this,-1),D(this,hn,yl).call(this)},A(st,Ra),K(st,"_l10n",null),K(st,"_l10nResizer",null),K(st,"_borderLineWidth",-1),K(st,"_colorManager",new Hd),K(st,"_zIndex",1),K(st,"_telemetryTimeout",1e3);let pt=st;class z1 extends pt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const e8=3285377520,Le=4294901760,u0=65535;class tE{constructor(e){this.h1=e?e&4294967295:e8,this.h2=e?e&4294967295:e8}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let C=0,p=e.length;C<p;C++){const F=e.charCodeAt(C);F<=255?t[s++]=F:(t[s++]=F>>>8,t[s++]=F&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,x=new Uint32Array(t.buffer,0,i);let a=0,o=0,l=this.h1,c=this.h2;const h=3432918353,d=461845907,E=h&u0,f=d&u0;for(let C=0;C<i;C++)C&1?(a=x[C],a=a*h&Le|a*E&u0,a=a<<15|a>>>17,a=a*d&Le|a*f&u0,l^=a,l=l<<13|l>>>19,l=l*5+3864292196):(o=x[C],o=o*h&Le|o*E&u0,o=o<<15|o>>>17,o=o*d&Le|o*f&u0,c^=o,c=c<<13|c>>>19,c=c*5+3864292196);switch(a=0,r){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*h&Le|a*E&u0,a=a<<15|a>>>17,a=a*d&Le|a*f&u0,i&1?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Le|e*36045&u0,t=t*4283543511&Le|((t<<16|e>>>16)*2950163797&Le)>>>16,e^=t>>>1,e=e*444984403&Le|e*60499&u0,t=t*3301882366&Le|((t<<16|e>>>16)*3120437893&Le)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const tu=Object.freeze({map:null,hash:"",transfer:void 0});var Si,Ti,Lt,Ic,eE;class Ju{constructor(){A(this,Ic);A(this,Si,!1);A(this,Ti,null);A(this,Lt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=n(this,Lt).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return n(this,Lt).get(e)}remove(e){if(n(this,Lt).delete(e),n(this,Lt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of n(this,Lt).values())if(t instanceof pt)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=n(this,Lt).get(e);let i=!1;if(s!==void 0)for(const[r,x]of Object.entries(t))s[r]!==x&&(i=!0,s[r]=x);else i=!0,n(this,Lt).set(e,t);i&&D(this,Ic,eE).call(this),t instanceof pt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return n(this,Lt).has(e)}getAll(){return n(this,Lt).size>0?Vu(n(this,Lt)):null}setAll(e){for(const[t,s]of Object.entries(e))this.setValue(t,s)}get size(){return n(this,Lt).size}resetModified(){n(this,Si)&&(B(this,Si,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new sE(this)}get serializable(){if(n(this,Lt).size===0)return tu;const e=new Map,t=new tE,s=[],i=Object.create(null);let r=!1;for(const[x,a]of n(this,Lt)){const o=a instanceof pt?a.serialize(!1,i):a;o&&(e.set(x,o),t.update(`${x}:${JSON.stringify(o)}`),r||(r=!!o.bitmap))}if(r)for(const x of e.values())x.bitmap&&s.push(x.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:tu}get editorStats(){let e=null;const t=new Map;for(const s of n(this,Lt).values()){if(!(s instanceof pt))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const x=e[r]||(e[r]=new Map);for(const[a,o]of Object.entries(i)){if(a==="type")continue;let l=x.get(a);l||(l=new Map,x.set(a,l));const c=l.get(o)??0;l.set(o,c+1)}}for(const[s,i]of t)e[s]=i.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){B(this,Ti,null)}get modifiedIds(){if(n(this,Ti))return n(this,Ti);const e=[];for(const t of n(this,Lt).values())!(t instanceof pt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return B(this,Ti,{ids:new Set(e),hash:e.join(",")})}}Si=new WeakMap,Ti=new WeakMap,Lt=new WeakMap,Ic=new WeakSet,eE=function(){n(this,Si)||(B(this,Si,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ha;class sE extends Ju{constructor(t){super();A(this,Ha,void 0);const{map:s,hash:i,transfer:r}=t.serializable,x=structuredClone(s,r?{transfer:r}:null);B(this,Ha,{map:x,hash:i,transfer:r})}get print(){ut("Should not call PrintAnnotationStorage.print")}get serializable(){return n(this,Ha)}get modifiedIds(){return rt(this,"modifiedIds",{ids:new Set,hash:""})}}Ha=new WeakMap;var dn;class G1{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){A(this,dn,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),n(this,dn).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||n(this,dn).has(e.loadedName))){if(yt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:r}=e,x=new FontFace(s,i,r);this.addNativeFontFace(x);try{await x.load(),n(this,dn).add(s),t==null||t(e)}catch{et(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(x)}return}ut("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw et(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return rt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(se||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),rt(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(yt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return rt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(g,w){return g.charCodeAt(w)<<24|g.charCodeAt(w+1)<<16|g.charCodeAt(w+2)<<8|g.charCodeAt(w+3)&255}function i(g,w,y,b){const k=g.substring(0,w),_=g.substring(w+y);return k+b+_}let r,x;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;function c(g,w){if(++l>30){et("Load test font never loaded."),w();return}if(o.font="30px "+g,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0){w();return}setTimeout(c.bind(null,g,w))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=i(d,976,h.length,h);const f=16,C=1482184792;let p=s(d,f);for(r=0,x=h.length-3;r<x;r+=4)p=p-C+s(h,r)|0;r<h.length&&(p=p-C+s(h+"XXX",r)|0),d=i(d,f,4,w1(p));const F=`url(data:font/opentype;base64,${btoa(d)});`,m=`@font-face {font-family:"${h}";src:${F}}`;this.insertRule(m);const v=this._document.createElement("div");v.style.visibility="hidden",v.style.width=v.style.height="10px",v.style.position="absolute",v.style.top=v.style.left="0px";for(const g of[e.loadedName,h]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=g,v.append(w)}this._document.body.append(v),c(h,()=>{v.remove(),t.complete()})}}dn=new WeakMap;class $1{constructor(e,{disableFontFace:t=!1,fontExtraProperties:s=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this.fontExtraProperties=s===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${T1(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(x){et(`getPathGenerator - ignoring character: "${x}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}}const fl={DATA:1,ERROR:2},wt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function s8(){}function de(u){if(u instanceof ei||u instanceof Rd||u instanceof Yx||u instanceof Z9||u instanceof Yl||u instanceof wd)return u;switch(u instanceof Error||typeof u=="object"&&u!==null||ut('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),u.name){case"AbortException":return new ei(u.message);case"InvalidPDFException":return new Rd(u.message);case"MissingPDFException":return new Yx(u.message);case"PasswordException":return new Z9(u.message,u.code);case"UnexpectedResponseException":return new Yl(u.message,u.status);case"UnknownErrorException":return new wd(u.message,u.details)}return new wd(u.message,u.toString())}var un,Nc,iE,Oc,rE,Hc,nE,En,kl;class Lx{constructor(e,t,s){A(this,Nc);A(this,Oc);A(this,Hc);A(this,En);A(this,un,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",D(this,Nc,iE).bind(this),{signal:n(this,un).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(x){r.reject(x)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,x=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:l=>{const c=Promise.withResolvers();return this.streamControllers[r]={controller:l,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:x,targetName:a,action:e,streamId:r,data:t,desiredSize:l.desiredSize},i),c.promise},pull:l=>{const c=Promise.withResolvers();return this.streamControllers[r].pullCall=c,o.postMessage({sourceName:x,targetName:a,stream:wt.PULL,streamId:r,desiredSize:l.desiredSize}),c.promise},cancel:l=>{yt(l instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[r].cancelCall=c,this.streamControllers[r].isClosed=!0,o.postMessage({sourceName:x,targetName:a,stream:wt.CANCEL,streamId:r,reason:de(l)}),c.promise}},s)}destroy(){var e;(e=n(this,un))==null||e.abort(),B(this,un,null)}}un=new WeakMap,Nc=new WeakSet,iE=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){D(this,Hc,nE).call(this,e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===fl.DATA)i.resolve(e.data);else if(e.callback===fl.ERROR)i.reject(de(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(x){r.postMessage({sourceName:s,targetName:i,callback:fl.DATA,callbackId:e.callbackId,data:x})},function(x){r.postMessage({sourceName:s,targetName:i,callback:fl.ERROR,callbackId:e.callbackId,reason:de(x)})});return}if(e.streamId){D(this,Oc,rE).call(this,e);return}t(e.data)},Oc=new WeakSet,rE=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,x=this,a=this.actionHandler[e.action],o={enqueue(l,c=1,h){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=c,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:wt.ENQUEUE,streamId:t,chunk:l},h)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:wt.CLOSE,streamId:t}),delete x.streamSinks[t])},error(l){yt(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:wt.ERROR,streamId:t,reason:de(l)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(a,e.data,o).then(function(){r.postMessage({sourceName:s,targetName:i,stream:wt.START_COMPLETE,streamId:t,success:!0})},function(l){r.postMessage({sourceName:s,targetName:i,stream:wt.START_COMPLETE,streamId:t,reason:de(l)})})},Hc=new WeakSet,nE=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,x=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case wt.START_COMPLETE:e.success?x.startCall.resolve():x.startCall.reject(de(e.reason));break;case wt.PULL_COMPLETE:e.success?x.pullCall.resolve():x.pullCall.reject(de(e.reason));break;case wt.PULL:if(!a){r.postMessage({sourceName:s,targetName:i,stream:wt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||s8).then(function(){r.postMessage({sourceName:s,targetName:i,stream:wt.PULL_COMPLETE,streamId:t,success:!0})},function(l){r.postMessage({sourceName:s,targetName:i,stream:wt.PULL_COMPLETE,streamId:t,reason:de(l)})});break;case wt.ENQUEUE:if(yt(x,"enqueue should have stream controller"),x.isClosed)break;x.controller.enqueue(e.chunk);break;case wt.CLOSE:if(yt(x,"close should have stream controller"),x.isClosed)break;x.isClosed=!0,x.controller.close(),D(this,En,kl).call(this,x,t);break;case wt.ERROR:yt(x,"error should have stream controller"),x.controller.error(de(e.reason)),D(this,En,kl).call(this,x,t);break;case wt.CANCEL_COMPLETE:e.success?x.cancelCall.resolve():x.cancelCall.reject(de(e.reason)),D(this,En,kl).call(this,x,t);break;case wt.CANCEL:if(!a)break;const o=de(e.reason);Promise.try(a.onCancel||s8,o).then(function(){r.postMessage({sourceName:s,targetName:i,stream:wt.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){r.postMessage({sourceName:s,targetName:i,stream:wt.CANCEL_COMPLETE,streamId:t,reason:de(l)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},En=new WeakSet,kl=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var za;class xE{constructor({enableHWA:e=!1}){A(this,za,!1);B(this,za,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!n(this,za)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ut("Abstract method `_createCanvas` called.")}}za=new WeakMap;class U1 extends xE{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class aE{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ut("Abstract method `_fetch` called.")}}class oE extends aE{async _fetch(e){const t=await Wh(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):jh(t)}}class lE{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var Ri,fn,W0,V0,Zt,Mi,Li,It,Yt,Ii,Ix,Ps,Rr,An,_l,Ss,Mr,zc,cE,Ga,eu,Ts,Lr,Ni,Nx,Oi,Ox,$a,su,Hi,Hx;class X1 extends lE{constructor({docId:t,ownerDocument:s=globalThis.document}){super();A(this,It);A(this,Ii);A(this,Ps);A(this,An);A(this,Ss);A(this,zc);A(this,Ga);A(this,Ts);A(this,Ni);A(this,Oi);A(this,$a);A(this,Hi);A(this,Ri,void 0);A(this,fn,void 0);A(this,W0,void 0);A(this,V0,void 0);A(this,Zt,void 0);A(this,Mi,void 0);A(this,Li,0);B(this,V0,t),B(this,Zt,s)}addFilter(t){if(!t)return"none";let s=n(this,It,Yt).get(t);if(s)return s;const[i,r,x]=D(this,An,_l).call(this,t),a=t.length===1?i:`${i}${r}${x}`;if(s=n(this,It,Yt).get(a),s)return n(this,It,Yt).set(t,s),s;const o=`g_${n(this,V0)}_transfer_map_${ie(this,Li)._++}`,l=D(this,Ss,Mr).call(this,o);n(this,It,Yt).set(t,l),n(this,It,Yt).set(a,l);const c=D(this,Ts,Lr).call(this,o);return D(this,Oi,Ox).call(this,i,r,x,c),l}addHCMFilter(t,s){var f;const i=`${t}-${s}`,r="base";let x=n(this,Ii,Ix).get(r);if((x==null?void 0:x.key)===i||(x?((f=x.filter)==null||f.remove(),x.key=i,x.url="none",x.filter=null):(x={key:i,url:"none",filter:null},n(this,Ii,Ix).set(r,x)),!t||!s))return x.url;const a=D(this,Hi,Hx).call(this,t);t=X.makeHexColor(...a);const o=D(this,Hi,Hx).call(this,s);if(s=X.makeHexColor(...o),n(this,Ps,Rr).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return x.url;const l=new Array(256);for(let C=0;C<=255;C++){const p=C/255;l[C]=p<=.03928?p/12.92:((p+.055)/1.055)**2.4}const c=l.join(","),h=`g_${n(this,V0)}_hcm_filter`,d=x.filter=D(this,Ts,Lr).call(this,h);D(this,Oi,Ox).call(this,c,c,c,d),D(this,Ga,eu).call(this,d);const E=(C,p)=>{const F=a[C]/255,m=o[C]/255,v=new Array(p+1);for(let g=0;g<=p;g++)v[g]=F+g/p*(m-F);return v.join(",")};return D(this,Oi,Ox).call(this,E(0,5),E(1,5),E(2,5),d),x.url=D(this,Ss,Mr).call(this,h),x.url}addAlphaFilter(t){let s=n(this,It,Yt).get(t);if(s)return s;const[i]=D(this,An,_l).call(this,[t]),r=`alpha_${i}`;if(s=n(this,It,Yt).get(r),s)return n(this,It,Yt).set(t,s),s;const x=`g_${n(this,V0)}_alpha_map_${ie(this,Li)._++}`,a=D(this,Ss,Mr).call(this,x);n(this,It,Yt).set(t,a),n(this,It,Yt).set(r,a);const o=D(this,Ts,Lr).call(this,x);return D(this,$a,su).call(this,i,o),a}addLuminosityFilter(t){let s=n(this,It,Yt).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=D(this,An,_l).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=n(this,It,Yt).get(r),s)return n(this,It,Yt).set(t,s),s;const x=`g_${n(this,V0)}_luminosity_map_${ie(this,Li)._++}`,a=D(this,Ss,Mr).call(this,x);n(this,It,Yt).set(t,a),n(this,It,Yt).set(r,a);const o=D(this,Ts,Lr).call(this,x);return D(this,zc,cE).call(this,o),t&&D(this,$a,su).call(this,i,o),a}addHighlightHCMFilter(t,s,i,r,x){var m;const a=`${s}-${i}-${r}-${x}`;let o=n(this,Ii,Ix).get(t);if((o==null?void 0:o.key)===a||(o?((m=o.filter)==null||m.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},n(this,Ii,Ix).set(t,o)),!s||!i))return o.url;const[l,c]=[s,i].map(D(this,Hi,Hx).bind(this));let h=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[E,f]=[r,x].map(D(this,Hi,Hx).bind(this));d<h&&([h,d,E,f]=[d,h,f,E]),n(this,Ps,Rr).style.color="";const C=(v,g,w)=>{const y=new Array(256),b=(d-h)/w,k=v/255,_=(g-v)/(255*w);let S=0;for(let P=0;P<=w;P++){const T=Math.round(h+P*b),N=k+P*_;for(let L=S;L<=T;L++)y[L]=N;S=T+1}for(let P=S;P<256;P++)y[P]=y[S-1];return y.join(",")},p=`g_${n(this,V0)}_hcm_${t}_filter`,F=o.filter=D(this,Ts,Lr).call(this,p);return D(this,Ga,eu).call(this,F),D(this,Oi,Ox).call(this,C(E[0],f[0],5),C(E[1],f[1],5),C(E[2],f[2],5),F),o.url=D(this,Ss,Mr).call(this,p),o.url}destroy(t=!1){var s,i,r,x;t&&((s=n(this,Mi))!=null&&s.size)||((i=n(this,W0))==null||i.parentNode.parentNode.remove(),B(this,W0,null),(r=n(this,fn))==null||r.clear(),B(this,fn,null),(x=n(this,Mi))==null||x.clear(),B(this,Mi,null),B(this,Li,0))}}Ri=new WeakMap,fn=new WeakMap,W0=new WeakMap,V0=new WeakMap,Zt=new WeakMap,Mi=new WeakMap,Li=new WeakMap,It=new WeakSet,Yt=function(){return n(this,fn)||B(this,fn,new Map)},Ii=new WeakSet,Ix=function(){return n(this,Mi)||B(this,Mi,new Map)},Ps=new WeakSet,Rr=function(){if(!n(this,W0)){const t=n(this,Zt).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=n(this,Zt).createElementNS(M0,"svg");i.setAttribute("width",0),i.setAttribute("height",0),B(this,W0,n(this,Zt).createElementNS(M0,"defs")),t.append(i),i.append(n(this,W0)),n(this,Zt).body.append(t)}return n(this,W0)},An=new WeakSet,_l=function(t){if(t.length===1){const l=t[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;const h=c.join(",");return[h,h,h]}const[s,i,r]=t,x=new Array(256),a=new Array(256),o=new Array(256);for(let l=0;l<256;l++)x[l]=s[l]/255,a[l]=i[l]/255,o[l]=r[l]/255;return[x.join(","),a.join(","),o.join(",")]},Ss=new WeakSet,Mr=function(t){if(n(this,Ri)===void 0){B(this,Ri,"");const s=n(this,Zt).URL;s!==n(this,Zt).baseURI&&(Vh(s)?et('#createUrl: ignore "data:"-URL for performance reasons.'):B(this,Ri,s.split("#",1)[0]))}return`url(${n(this,Ri)}#${t})`},zc=new WeakSet,cE=function(t){const s=n(this,Zt).createElementNS(M0,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},Ga=new WeakSet,eu=function(t){const s=n(this,Zt).createElementNS(M0,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},Ts=new WeakSet,Lr=function(t){const s=n(this,Zt).createElementNS(M0,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),n(this,Ps,Rr).append(s),s},Ni=new WeakSet,Nx=function(t,s,i){const r=n(this,Zt).createElementNS(M0,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},Oi=new WeakSet,Ox=function(t,s,i,r){const x=n(this,Zt).createElementNS(M0,"feComponentTransfer");r.append(x),D(this,Ni,Nx).call(this,x,"feFuncR",t),D(this,Ni,Nx).call(this,x,"feFuncG",s),D(this,Ni,Nx).call(this,x,"feFuncB",i)},$a=new WeakSet,su=function(t,s){const i=n(this,Zt).createElementNS(M0,"feComponentTransfer");s.append(i),D(this,Ni,Nx).call(this,i,"feFuncA",t)},Hi=new WeakSet,Hx=function(t){return n(this,Ps,Rr).style.color=t,Zu(getComputedStyle(n(this,Ps,Rr)).getPropertyValue("color"))};class hE{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ut("Abstract method `_fetch` called.")}}class dE extends hE{async _fetch(e){const t=await Wh(e,"arraybuffer");return new Uint8Array(t)}}se&&et("Please use the `legacy` build in Node.js environments.");async function uE(u){const t=await process.getBuiltinModule("fs").promises.readFile(u);return new Uint8Array(t)}class j1 extends lE{}class W1 extends xE{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class V1 extends aE{async _fetch(e){return uE(e)}}class q1 extends hE{async _fetch(e){return uE(e)}}const ee={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function iu(u,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),u.clip(i)}class t9{getPattern(){ut("Abstract method `getPattern` called.")}}class Y1 extends t9{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===ee.STROKE||i===ee.FILL){const x=t.current.getClippedPathBoundingBox(i,At(e))||[0,0,0,0],a=Math.ceil(x[2]-x[0])||1,o=Math.ceil(x[3]-x[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-x[0],-x[1]),s=X.transform(s,[1,0,0,1,x[0],x[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),iu(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=e.createPattern(l.canvas,"no-repeat");const h=new DOMMatrix(s);r.setTransform(h)}else iu(e,this._bbox),r=this._createGradient(e);return r}}function _d(u,e,t,s,i,r,x,a){const o=e.coords,l=e.colors,c=u.data,h=u.width*4;let d;o[t+1]>o[s+1]&&(d=t,t=s,s=d,d=r,r=x,x=d),o[s+1]>o[i+1]&&(d=s,s=i,i=d,d=x,x=a,a=d),o[t+1]>o[s+1]&&(d=t,t=s,s=d,d=r,r=x,x=d);const E=(o[t]+e.offsetX)*e.scaleX,f=(o[t+1]+e.offsetY)*e.scaleY,C=(o[s]+e.offsetX)*e.scaleX,p=(o[s+1]+e.offsetY)*e.scaleY,F=(o[i]+e.offsetX)*e.scaleX,m=(o[i+1]+e.offsetY)*e.scaleY;if(f>=m)return;const v=l[r],g=l[r+1],w=l[r+2],y=l[x],b=l[x+1],k=l[x+2],_=l[a],S=l[a+1],P=l[a+2],T=Math.round(f),N=Math.round(m);let L,O,R,M,$,V,q,I;for(let Y=T;Y<=N;Y++){if(Y<p){const j=Y<f?0:(f-Y)/(f-p);L=E-(E-C)*j,O=v-(v-y)*j,R=g-(g-b)*j,M=w-(w-k)*j}else{let j;Y>m?j=1:p===m?j=0:j=(p-Y)/(p-m),L=C-(C-F)*j,O=y-(y-_)*j,R=b-(b-S)*j,M=k-(k-P)*j}let Z;Y<f?Z=0:Y>m?Z=1:Z=(f-Y)/(f-m),$=E-(E-F)*Z,V=v-(v-_)*Z,q=g-(g-S)*Z,I=w-(w-P)*Z;const G=Math.round(Math.min(L,$)),nt=Math.round(Math.max(L,$));let W=h*Y+G*4;for(let j=G;j<=nt;j++)Z=(L-j)/(L-$),Z<0?Z=0:Z>1&&(Z=1),c[W++]=O-(O-V)*Z|0,c[W++]=R-(R-q)*Z|0,c[W++]=M-(M-I)*Z|0,c[W++]=255}}function K1(u,e,t){const s=e.coords,i=e.colors;let r,x;switch(e.type){case"lattice":const a=e.verticesPerRow,o=Math.floor(s.length/a)-1,l=a-1;for(r=0;r<o;r++){let c=r*a;for(let h=0;h<l;h++,c++)_d(u,t,s[c],s[c+1],s[c+a],i[c],i[c+1],i[c+a]),_d(u,t,s[c+a+1],s[c+1],s[c+a],i[c+a+1],i[c+1],i[c+a])}break;case"triangles":for(r=0,x=s.length;r<x;r+=3)_d(u,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class Q1 extends t9{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,s){const a=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-a,c=Math.ceil(this._bounds[3])-o,h=Math.min(Math.ceil(Math.abs(l*e[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),E=l/h,f=c/d,C={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-o,scaleX:1/E,scaleY:1/f},p=h+2*2,F=d+2*2,m=s.getCanvas("mesh",p,F),v=m.context,g=v.createImageData(h,d);if(t){const y=g.data;for(let b=0,k=y.length;b<k;b+=4)y[b]=t[0],y[b+1]=t[1],y[b+2]=t[2],y[b+3]=255}for(const y of this._figures)K1(g,y,C);return v.putImageData(g,2,2),{canvas:m.canvas,offsetX:a-2*E,offsetY:o-2*f,scaleX:E,scaleY:f}}getPattern(e,t,s,i){iu(e,this._bbox);let r;if(i===ee.SHADING)r=X.singularValueDecompose2dScale(At(e));else if(r=X.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=X.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const x=this._createMeshCanvas(r,i===ee.SHADING?null:this._background,t.cachedCanvases);return i!==ee.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(x.offsetX,x.offsetY),e.scale(x.scaleX,x.scaleY),e.createPattern(x.canvas,"no-repeat")}}class Z1 extends t9{getPattern(){return"hotpink"}}function J1(u){switch(u[0]){case"RadialAxial":return new Y1(u);case"Mesh":return new Q1(u);case"Dummy":return new Z1}throw new Error(`Unknown IR type: ${u[0]}`)}const i8={COLORED:1,UNCOLORED:2},Gc=class Gc{constructor(e,t,s,i,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=s,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:i,tilingType:r,color:x,canvasGraphicsFactory:a}=this;let{xstep:o,ystep:l}=this;o=Math.abs(o),l=Math.abs(l),Xh("TilingType: "+r);const c=t[0],h=t[1],d=t[2],E=t[3],f=d-c,C=E-h,p=X.singularValueDecompose2dScale(this.matrix),F=X.singularValueDecompose2dScale(this.baseTransform),m=p[0]*F[0],v=p[1]*F[1];let g=f,w=C,y=!1,b=!1;const k=Math.ceil(o*m),_=Math.ceil(l*v),S=Math.ceil(f*m),P=Math.ceil(C*v);k>=S?g=o:y=!0,_>=P?w=l:b=!0;const T=this.getSizeAndScale(g,this.ctx.canvas.width,m),N=this.getSizeAndScale(w,this.ctx.canvas.height,v),L=e.cachedCanvases.getCanvas("pattern",T.size,N.size),O=L.context,R=a.createCanvasGraphics(O);if(R.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(R,i,x),O.translate(-T.scale*c,-N.scale*h),R.transform(T.scale,0,0,N.scale,0,0),O.save(),this.clipBbox(R,c,h,d,E),R.baseTransform=At(R.ctx),R.executeOperatorList(s),R.endDrawing(),O.restore(),y||b){const M=L.canvas;y&&(g=o),b&&(w=l);const $=this.getSizeAndScale(g,this.ctx.canvas.width,m),V=this.getSizeAndScale(w,this.ctx.canvas.height,v),q=$.size,I=V.size,Y=e.cachedCanvases.getCanvas("pattern-workaround",q,I),Z=Y.context,G=y?Math.floor(f/o):0,nt=b?Math.floor(C/l):0;for(let W=0;W<=G;W++)for(let j=0;j<=nt;j++)Z.drawImage(M,q*W,I*j,q,I,0,0,q,I);return{canvas:Y.canvas,scaleX:$.scale,scaleY:V.scale,offsetX:c,offsetY:h}}return{canvas:L.canvas,scaleX:T.scale,scaleY:N.scale,offsetX:c,offsetY:h}}getSizeAndScale(e,t,s){const i=Math.max(Gc.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const x=i-t,a=r-s;e.ctx.rect(t,s,x,a),e.current.updateRectMinMax(At(e.ctx),[t,s,i,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case i8.COLORED:const x=this.ctx;i.fillStyle=x.fillStyle,i.strokeStyle=x.strokeStyle,r.fillColor=x.fillStyle,r.strokeColor=x.strokeStyle;break;case i8.UNCOLORED:const a=X.makeHexColor(s[0],s[1],s[2]);i.fillStyle=a,i.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new b1(`Unsupported paint type: ${t}`)}}getPattern(e,t,s,i){let r=s;i!==ee.SHADING&&(r=X.transform(r,t.baseTransform),this.matrix&&(r=X.transform(r,this.matrix)));const x=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(x.offsetX,x.offsetY),a=a.scale(1/x.scaleX,1/x.scaleY);const o=e.createPattern(x.canvas,"repeat");return o.setTransform(a),o}};K(Gc,"MAX_PATTERN_SIZE",3e3);let ru=Gc;function tA({src:u,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:x=!1}){const a=le.isLittleEndian?4278190080:255,[o,l]=x?[r,a]:[a,r],c=s>>3,h=s&7,d=u.length;t=new Uint32Array(t.buffer);let E=0;for(let f=0;f<i;f++){for(const p=e+c;e<p;e++){const F=e<d?u[e]:255;t[E++]=F&128?l:o,t[E++]=F&64?l:o,t[E++]=F&32?l:o,t[E++]=F&16?l:o,t[E++]=F&8?l:o,t[E++]=F&4?l:o,t[E++]=F&2?l:o,t[E++]=F&1?l:o}if(h===0)continue;const C=e<d?u[e++]:255;for(let p=0;p<h;p++)t[E++]=C&1<<7-p?l:o}return{srcPos:e,destPos:E}}const r8=16,n8=100,eA=15,x8=10,a8=1e3,Ce=16;function sA(u,e){if(u._removeMirroring)throw new Error("Context is already forwarding operations.");u.__originalSave=u.save,u.__originalRestore=u.restore,u.__originalRotate=u.rotate,u.__originalScale=u.scale,u.__originalTranslate=u.translate,u.__originalTransform=u.transform,u.__originalSetTransform=u.setTransform,u.__originalResetTransform=u.resetTransform,u.__originalClip=u.clip,u.__originalMoveTo=u.moveTo,u.__originalLineTo=u.lineTo,u.__originalBezierCurveTo=u.bezierCurveTo,u.__originalRect=u.rect,u.__originalClosePath=u.closePath,u.__originalBeginPath=u.beginPath,u._removeMirroring=()=>{u.save=u.__originalSave,u.restore=u.__originalRestore,u.rotate=u.__originalRotate,u.scale=u.__originalScale,u.translate=u.__originalTranslate,u.transform=u.__originalTransform,u.setTransform=u.__originalSetTransform,u.resetTransform=u.__originalResetTransform,u.clip=u.__originalClip,u.moveTo=u.__originalMoveTo,u.lineTo=u.__originalLineTo,u.bezierCurveTo=u.__originalBezierCurveTo,u.rect=u.__originalRect,u.closePath=u.__originalClosePath,u.beginPath=u.__originalBeginPath,delete u._removeMirroring},u.save=function(){e.save(),this.__originalSave()},u.restore=function(){e.restore(),this.__originalRestore()},u.translate=function(s,i){e.translate(s,i),this.__originalTranslate(s,i)},u.scale=function(s,i){e.scale(s,i),this.__originalScale(s,i)},u.transform=function(s,i,r,x,a,o){e.transform(s,i,r,x,a,o),this.__originalTransform(s,i,r,x,a,o)},u.setTransform=function(s,i,r,x,a,o){e.setTransform(s,i,r,x,a,o),this.__originalSetTransform(s,i,r,x,a,o)},u.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},u.rotate=function(s){e.rotate(s),this.__originalRotate(s)},u.clip=function(s){e.clip(s),this.__originalClip(s)},u.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},u.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},u.bezierCurveTo=function(t,s,i,r,x,a){e.bezierCurveTo(t,s,i,r,x,a),this.__originalBezierCurveTo(t,s,i,r,x,a)},u.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},u.closePath=function(){e.closePath(),this.__originalClosePath()},u.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class iA{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Al(u,e,t,s,i,r,x,a,o,l){const[c,h,d,E,f,C]=At(u);if(h===0&&d===0){const m=x*c+f,v=Math.round(m),g=a*E+C,w=Math.round(g),y=(x+o)*c+f,b=Math.abs(Math.round(y)-v)||1,k=(a+l)*E+C,_=Math.abs(Math.round(k)-w)||1;return u.setTransform(Math.sign(c),0,0,Math.sign(E),v,w),u.drawImage(e,t,s,i,r,0,0,b,_),u.setTransform(c,h,d,E,f,C),[b,_]}if(c===0&&E===0){const m=a*d+f,v=Math.round(m),g=x*h+C,w=Math.round(g),y=(a+l)*d+f,b=Math.abs(Math.round(y)-v)||1,k=(x+o)*h+C,_=Math.abs(Math.round(k)-w)||1;return u.setTransform(0,Math.sign(h),Math.sign(d),0,v,w),u.drawImage(e,t,s,i,r,0,0,_,b),u.setTransform(c,h,d,E,f,C),[_,b]}u.drawImage(e,t,s,i,r,x,a,o,l);const p=Math.hypot(c,h),F=Math.hypot(d,E);return[p*o,F*l]}function rA(u){const{width:e,height:t}=u;if(e>a8||t>a8)return null;const s=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let x=new Uint8Array(r*(t+1)),a,o,l;const c=e+7&-8;let h=new Uint8Array(c*t),d=0;for(const F of u.data){let m=128;for(;m>0;)h[d++]=F&m?0:255,m>>=1}let E=0;for(d=0,h[d]!==0&&(x[0]=1,++E),o=1;o<e;o++)h[d]!==h[d+1]&&(x[o]=h[d]?2:1,++E),d++;for(h[d]!==0&&(x[o]=2,++E),a=1;a<t;a++){d=a*c,l=a*r,h[d-c]!==h[d]&&(x[l]=h[d]?1:8,++E);let F=(h[d]?4:0)+(h[d-c]?8:0);for(o=1;o<e;o++)F=(F>>2)+(h[d+1]?4:0)+(h[d-c+1]?8:0),i[F]&&(x[l+o]=i[F],++E),d++;if(h[d-c]!==h[d]&&(x[l+o]=h[d]?2:4,++E),E>s)return null}for(d=c*(t-1),l=a*r,h[d]!==0&&(x[l]=8,++E),o=1;o<e;o++)h[d]!==h[d+1]&&(x[l+o]=h[d]?4:8,++E),d++;if(h[d]!==0&&(x[l+o]=4,++E),E>s)return null;const f=new Int32Array([0,r,-1,0,-r,0,0,0,1]),C=new Path2D;for(a=0;E&&a<=t;a++){let F=a*r;const m=F+e;for(;F<m&&!x[F];)F++;if(F===m)continue;C.moveTo(F%r,a);const v=F;let g=x[F];do{const w=f[g];do F+=w;while(!x[F]);const y=x[F];y!==5&&y!==10?(g=y,x[F]=0):(g=y&51*g>>4,x[F]&=g>>2|g<<2),C.lineTo(F%r,F/r|0),x[F]||--E}while(v!==F);--a}return h=null,x=null,function(F){F.save(),F.scale(1/e,-1/t),F.translate(0,-t),F.fill(C),F.beginPath(),F.restore()}}class o8{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=m8,this.textMatrixScale=1,this.fontMatrix=Td,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=qt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,s){[t,s]=X.applyTransform([t,s],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(e,t){const s=X.applyTransform(t,e),i=X.applyTransform(t.slice(2),e),r=X.applyTransform([t[0],t[3]],e),x=X.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,s[0],i[0],r[0],x[0]),this.minY=Math.min(this.minY,s[1],i[1],r[1],x[1]),this.maxX=Math.max(this.maxX,s[0],i[0],r[0],x[0]),this.maxY=Math.max(this.maxY,s[1],i[1],r[1],x[1])}updateScalingPathMinMax(e,t){X.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,s,i,r,x,a,o,l,c){const h=X.bezierBoundingBox(t,s,i,r,x,a,o,l,c);c||this.updateRectMinMax(e,h)}getPathBoundingBox(e=ee.FILL,t=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(e===ee.STROKE){t||ut("Stroke bounding box must include transform.");const i=X.singularValueDecompose2dScale(t),r=i[0]*this.lineWidth/2,x=i[1]*this.lineWidth/2;s[0]-=r,s[1]-=x,s[2]+=r,s[3]+=x}return s}updateClipFromPath(){const e=X.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=ee.FILL,t=null){return X.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function l8(u,e){if(e instanceof ImageData){u.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%Ce,r=(t-i)/Ce,x=i===0?r:r+1,a=u.createImageData(s,Ce);let o=0,l;const c=e.data,h=a.data;let d,E,f,C;if(e.kind===pl.GRAYSCALE_1BPP){const p=c.byteLength,F=new Uint32Array(h.buffer,0,h.byteLength>>2),m=F.length,v=s+7>>3,g=4294967295,w=le.isLittleEndian?4278190080:255;for(d=0;d<x;d++){for(f=d<r?Ce:i,l=0,E=0;E<f;E++){const y=p-o;let b=0;const k=y>v?s:y*8-7,_=k&-8;let S=0,P=0;for(;b<_;b+=8)P=c[o++],F[l++]=P&128?g:w,F[l++]=P&64?g:w,F[l++]=P&32?g:w,F[l++]=P&16?g:w,F[l++]=P&8?g:w,F[l++]=P&4?g:w,F[l++]=P&2?g:w,F[l++]=P&1?g:w;for(;b<k;b++)S===0&&(P=c[o++],S=128),F[l++]=P&S?g:w,S>>=1}for(;l<m;)F[l++]=0;u.putImageData(a,0,d*Ce)}}else if(e.kind===pl.RGBA_32BPP){for(E=0,C=s*Ce*4,d=0;d<r;d++)h.set(c.subarray(o,o+C)),o+=C,u.putImageData(a,0,E),E+=Ce;d<x&&(C=s*i*4,h.set(c.subarray(o,o+C)),u.putImageData(a,0,E))}else if(e.kind===pl.RGB_24BPP)for(f=Ce,C=s*f,d=0;d<x;d++){for(d>=r&&(f=i,C=s*f),l=0,E=C;E--;)h[l++]=c[o++],h[l++]=c[o++],h[l++]=c[o++],h[l++]=255;u.putImageData(a,0,d*Ce)}else throw new Error(`bad image kind: ${e.kind}`)}function c8(u,e){if(e.bitmap){u.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%Ce,r=(t-i)/Ce,x=i===0?r:r+1,a=u.createImageData(s,Ce);let o=0;const l=e.data,c=a.data;for(let h=0;h<x;h++){const d=h<r?Ce:i;({srcPos:o}=tA({src:l,srcPos:o,dest:c,width:s,height:d,nonBlackColor:0})),u.putImageData(a,0,h*Ce)}}function kx(u,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)u[s]!==void 0&&(e[s]=u[s]);u.setLineDash!==void 0&&(e.setLineDash(u.getLineDash()),e.lineDashOffset=u.lineDashOffset)}function Cl(u){if(u.strokeStyle=u.fillStyle="#000000",u.fillRule="nonzero",u.globalAlpha=1,u.lineWidth=1,u.lineCap="butt",u.lineJoin="miter",u.miterLimit=10,u.globalCompositeOperation="source-over",u.font="10px sans-serif",u.setLineDash!==void 0&&(u.setLineDash([]),u.lineDashOffset=0),!se){const{filter:e}=u;e!=="none"&&e!==""&&(u.filter="none")}}function h8(u,e){if(e)return!0;const t=X.singularValueDecompose2dScale(u);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*si.PDF_TO_CSS_UNITS);return t[0]<=s&&t[1]<=s}const nA=["butt","round","square"],xA=["miter","round","bevel"],aA={},d8={};var Ua,nu,Xa,xu,ja,au;const n9=class n9{constructor(e,t,s,i,r,{optionalContentConfig:x,markedContentStack:a=null},o,l){A(this,Ua);A(this,Xa);A(this,ja);this.ctx=e,this.current=new o8(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=x,this.cachedCanvases=new iA(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,x=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,x),this.ctx.fillStyle=a,s){const o=this.cachedCanvases.getCanvas("transparent",r,x);this.compositeCtx=this.ctx,this.transparentCanvas=o.canvas,this.ctx=o.context,this.ctx.save(),this.ctx.transform(...At(this.compositeCtx))}this.ctx.save(),Cl(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=At(this.ctx)}executeOperatorList(e,t,s,i){const r=e.argsArray,x=e.fnArray;let a=t||0;const o=r.length;if(o===a)return a;const l=o-a>x8&&typeof s=="function",c=l?Date.now()+eA:0;let h=0;const d=this.commonObjs,E=this.objs;let f;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,s),a;if(f=x[a],f!==qe.dependency)this[f].apply(this,r[a]);else for(const C of r[a]){const p=C.startsWith("g_")?d:E;if(!p.has(C))return p.get(C,s),a}if(a++,a===o)return a;if(l&&++h>x8){if(Date.now()>c)return s(),a;h=0}}}endDrawing(){D(this,Ua,nu).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),D(this,Xa,xu).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),x=Math.max(Math.hypot(t[2],t[3]),1),a=s,o=i,l="prescale1",c,h;for(;r>2&&a>1||x>2&&o>1;){let d=a,E=o;r>2&&a>1&&(d=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/d),x>2&&o>1&&(E=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o)/2,x/=o/E),c=this.cachedCanvases.getCanvas(l,d,E),h=c.context,h.clearRect(0,0,d,E),h.drawImage(e,0,0,a,o,0,0,d,E),e=c.canvas,a=d,o=E,l=l==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:o}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:i}=e,r=this.current.fillColor,x=this.current.patternFill,a=At(t);let o,l,c,h;if((e.bitmap||e.data)&&e.count>1){const k=e.bitmap||e.data.buffer;l=JSON.stringify(x?a:[a.slice(0,4),r]),o=this._cachedBitmapsMap.get(k),o||(o=new Map,this._cachedBitmapsMap.set(k,o));const _=o.get(l);if(_&&!x){const S=Math.round(Math.min(a[0],a[2])+a[4]),P=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:_,offsetX:S,offsetY:P}}c=_}c||(h=this.cachedCanvases.getCanvas("maskCanvas",s,i),c8(h.context,e));let d=X.transform(a,[1/s,0,0,-1/i,0,0]);d=X.transform(d,[1,0,0,1,0,-i]);const[E,f,C,p]=X.getAxialAlignedBoundingBox([0,0,s,i],d),F=Math.round(C-E)||1,m=Math.round(p-f)||1,v=this.cachedCanvases.getCanvas("fillCanvas",F,m),g=v.context,w=E,y=f;g.translate(-w,-y),g.transform(...d),c||(c=this._scaleImage(h.canvas,d0(g)),c=c.img,o&&x&&o.set(l,c)),g.imageSmoothingEnabled=h8(At(g),e.interpolate),Al(g,c,0,0,c.width,c.height,0,0,s,i),g.globalCompositeOperation="source-in";const b=X.transform(d0(g),[1,0,0,1,-w,-y]);return g.fillStyle=x?r.getPattern(t,this,b,ee.FILL):r,g.fillRect(0,0,s,i),o&&!x&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,v.canvas)),{canvas:v.canvas,offsetX:Math.round(w),offsetY:Math.round(y)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=nA[e]}setLineJoin(e){this.ctx.lineJoin=xA[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...At(this.suspendedCtx)),kx(this.suspendedCtx,r),sA(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),kx(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],x=i[1],a=i[2]-r,o=i[3]-x;a===0||o===0||(this.genericComposeSMask(t.context,s,a,o,t.subtype,t.backdrop,t.transferMap,r,x,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,x,a,o,l,c,h){let d=e.canvas,E=o-c,f=l-h;if(x){const p=X.makeHexColor(...x);if(E<0||f<0||E+s>d.width||f+i>d.height){const F=this.cachedCanvases.getCanvas("maskExtension",s,i),m=F.context;m.drawImage(d,-E,-f),m.globalCompositeOperation="destination-atop",m.fillStyle=p,m.fillRect(0,0,s,i),m.globalCompositeOperation="source-over",d=F.canvas,E=f=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const F=new Path2D;F.rect(E,f,s,i),e.clip(F),e.globalCompositeOperation="destination-atop",e.fillStyle=p,e.fillRect(E,f,s,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const C=new Path2D;C.rect(o,l,s,i),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(d,E,f,s,i,o,l,s,i),t.restore()}save(){this.inSMaskMode?(kx(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),kx(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,s,i,r,x){this.ctx.transform(e,t,s,i,r,x),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){const i=this.ctx,r=this.current;let x=r.x,a=r.y,o,l;const c=At(i),h=c[0]===0&&c[3]===0||c[1]===0&&c[2]===0,d=h?s.slice(0):null;for(let E=0,f=0,C=e.length;E<C;E++)switch(e[E]|0){case qe.rectangle:x=t[f++],a=t[f++];const p=t[f++],F=t[f++],m=x+p,v=a+F;i.moveTo(x,a),p===0||F===0?i.lineTo(m,v):(i.lineTo(m,a),i.lineTo(m,v),i.lineTo(x,v)),h||r.updateRectMinMax(c,[x,a,m,v]),i.closePath();break;case qe.moveTo:x=t[f++],a=t[f++],i.moveTo(x,a),h||r.updatePathMinMax(c,x,a);break;case qe.lineTo:x=t[f++],a=t[f++],i.lineTo(x,a),h||r.updatePathMinMax(c,x,a);break;case qe.curveTo:o=x,l=a,x=t[f+4],a=t[f+5],i.bezierCurveTo(t[f],t[f+1],t[f+2],t[f+3],x,a),r.updateCurvePathMinMax(c,o,l,t[f],t[f+1],t[f+2],t[f+3],x,a,d),f+=6;break;case qe.curveTo2:o=x,l=a,i.bezierCurveTo(x,a,t[f],t[f+1],t[f+2],t[f+3]),r.updateCurvePathMinMax(c,o,l,x,a,t[f],t[f+1],t[f+2],t[f+3],d),x=t[f+2],a=t[f+3],f+=4;break;case qe.curveTo3:o=x,l=a,x=t[f+2],a=t[f+3],i.bezierCurveTo(t[f],t[f+1],x,a,x,a),r.updateCurvePathMinMax(c,o,l,t[f],t[f+1],x,a,x,a,d),f+=4;break;case qe.closePath:i.closePath();break}h&&r.updateScalingPathMinMax(c,d),r.setCurrentPoint(x,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,s=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(t.save(),t.strokeStyle=s.getPattern(t,this,d0(t),ee.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(t.save(),t.fillStyle=s.getPattern(t,this,d0(t),ee.FILL),r=!0);const x=this.current.getClippedPathBoundingBox();this.contentVisible&&x!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(x)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=aA}eoClip(){this.pendingClip=d8}beginText(){this.current.textMatrix=m8,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const s=new Path2D,i=t.getTransform().invertSelf();for(const{transform:r,x,y:a,fontSize:o,path:l}of e)s.addPath(l,new DOMMatrix(r).preMultiplySelf(i).translate(x,a).scale(o,-o));t.clip(s),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var c;const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||Td,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&et("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",x=((c=s.systemFontInfo)==null?void 0:c.css)||`"${r}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const o=s.italic?"italic":"normal";let l=t;t<r8?l=r8:t>n8&&(l=n8),this.current.fontSizeScale=t/l,this.ctx.font=`${o} ${a} ${l}px ${x}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,s,i,r,x){this.current.textMatrix=[e,t,s,i,r,x],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,i,r){const x=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,h=l&qt.FILL_STROKE_MASK,d=!!(l&qt.ADD_TO_PATH_FLAG),E=a.patternFill&&!o.missingFile,f=a.patternStroke&&!o.missingFile;let C;if((o.disableFontFace||d||E||f)&&(C=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||E||f){if(x.save(),x.translate(t,s),x.scale(c,-c),h===qt.FILL||h===qt.FILL_STROKE)if(i){const p=x.getTransform();x.setTransform(...i),x.fill(D(this,ja,au).call(this,C,p,i))}else x.fill(C);if(h===qt.STROKE||h===qt.FILL_STROKE)if(r){const p=x.getTransform();x.setTransform(...r),x.stroke(D(this,ja,au).call(this,C,p,r))}else x.lineWidth/=c,x.stroke(C);x.restore()}else(h===qt.FILL||h===qt.FILL_STROKE)&&x.fillText(e,t,s),(h===qt.STROKE||h===qt.FILL_STROKE)&&x.strokeText(e,t,s);d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:At(x),x:t,y:s,fontSize:c,path:C})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return rt(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const r=this.ctx,x=t.fontSizeScale,a=t.charSpacing,o=t.wordSpacing,l=t.fontDirection,c=t.textHScale*l,h=e.length,d=s.vertical,E=d?1:-1,f=s.defaultVMetrics,C=i*t.fontMatrix[0],p=t.textRenderingMode===qt.FILL&&!s.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),l>0?r.scale(c,-1):r.scale(c,1);let F,m;if(t.patternFill){r.save();const b=t.fillColor.getPattern(r,this,d0(r),ee.FILL);F=At(r),r.restore(),r.fillStyle=b}if(t.patternStroke){r.save();const b=t.strokeColor.getPattern(r,this,d0(r),ee.STROKE);m=At(r),r.restore(),r.strokeStyle=b}let v=t.lineWidth;const g=t.textMatrixScale;if(g===0||v===0){const b=t.textRenderingMode&qt.FILL_STROKE_MASK;(b===qt.STROKE||b===qt.FILL_STROKE)&&(v=this.getSinglePixelWidth())}else v/=g;if(x!==1&&(r.scale(x,x),v/=x),r.lineWidth=v,s.isInvalidPDFjsFont){const b=[];let k=0;for(const _ of e)b.push(_.unicode),k+=_.width;r.fillText(b.join(""),0,0),t.x+=k*C*c,r.restore(),this.compose();return}let w=0,y;for(y=0;y<h;++y){const b=e[y];if(typeof b=="number"){w+=E*b*i/1e3;continue}let k=!1;const _=(b.isSpace?o:0)+a,S=b.fontChar,P=b.accent;let T,N,L=b.width;if(d){const R=b.vmetric||f,M=-(b.vmetric?R[1]:L*.5)*C,$=R[2]*C;L=R?-R[0]:L,T=M/x,N=(w+$)/x}else T=w/x,N=0;if(s.remeasure&&L>0){const R=r.measureText(S).width*1e3/i*x;if(L<R&&this.isFontSubpixelAAEnabled){const M=L/R;k=!0,r.save(),r.scale(M,1),T/=M}else L!==R&&(T+=(L-R)/2e3*i/x)}if(this.contentVisible&&(b.isInFont||s.missingFile)){if(p&&!P)r.fillText(S,T,N);else if(this.paintChar(S,T,N,F,m),P){const R=T+i*P.offset.x/x,M=N-i*P.offset.y/x;this.paintChar(P.fontChar,R,M,F,m)}}const O=d?L*C-_*l:L*C+_*l;w+=O,k&&r.restore()}d?t.y-=w:t.x+=w*c,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,i=s.font,r=s.fontSize,x=s.fontDirection,a=i.vertical?1:-1,o=s.charSpacing,l=s.wordSpacing,c=s.textHScale*x,h=s.fontMatrix||Td,d=e.length,E=s.textRenderingMode===qt.INVISIBLE;let f,C,p,F;if(!(E||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...s.textMatrix),t.translate(s.x,s.y),t.scale(c,x),f=0;f<d;++f){if(C=e[f],typeof C=="number"){F=a*C*r/1e3,this.ctx.translate(F,0),s.x+=F*c;continue}const m=(C.isSpace?l:0)+o,v=i.charProcOperatorList[C.operatorListId];if(!v){et(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),t.scale(r,r),t.transform(...h),this.executeOperatorList(v),this.restore()),p=X.applyTransform([C.width,0],h)[0]*r+m,t.translate(p,0),s.x+=p*c}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,i,r,x){this.ctx.rect(s,i,r-s,x-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=e[1],i=this.baseTransform||At(this.ctx),r={createCanvasGraphics:x=>new n9(x,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new ru(e,s,this.ctx,r,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,s){this.ctx.strokeStyle=this.current.strokeColor=X.makeHexColor(e,t,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,s){this.ctx.fillStyle=this.current.fillColor=X.makeHexColor(e,t,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=J1(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,d0(t),ee.SHADING);const i=d0(t);if(i){const{width:r,height:x}=t.canvas,[a,o,l,c]=X.getAxialAlignedBoundingBox([0,0,r,x],i);this.ctx.fillRect(a,o,l-a,c-o)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ut("Should not call beginInlineImage")}beginImageData(){ut("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=At(this.ctx),t)){const s=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],s,i),this.current.updateRectMinMax(At(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Xh("TODO: Support non-isolated groups."),e.knockout&&et("Knockout groups not supported.");const s=At(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=X.getAxialAlignedBoundingBox(e.bbox,At(t));const r=[0,0,t.canvas.width,t.canvas.height];i=X.intersect(i,r)||[0,0,0,0];const x=Math.floor(i[0]),a=Math.floor(i[1]),o=Math.max(Math.ceil(i[2])-x,1),l=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(c,o,l),d=h.context;d.translate(-x,-a),d.transform(...s),e.smask?this.smaskStack.push({canvas:h.canvas,context:d,offsetX:x,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(x,a),t.save()),kx(t,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=At(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=X.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,s,i,r){if(D(this,Ua,nu).call(this),Cl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const x=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=x,t[3]=a;const[o,l]=X.singularValueDecompose2dScale(At(this.ctx)),{viewportScale:c}=this,h=Math.ceil(x*this.outputScaleX*c),d=Math.ceil(a*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:E,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(e,E),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(o,0,0,-l,0,a*l),Cl(this.ctx)}else Cl(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],x,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new o8(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),D(this,Xa,xu).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=rA(e)),i.compiled)){i.compiled(s);return}const r=this._createMaskCanvas(e),x=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(x,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,i=0,r,x){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const o=At(a);a.transform(t,s,i,r,0,0);const l=this._createMaskCanvas(e);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let c=0,h=x.length;c<h;c+=2){const d=X.transform(o,[t,s,i,r,x[c],x[c+1]]),[E,f]=X.applyTransform([0,0],d);a.drawImage(l.canvas,E,f)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:x,width:a,height:o,transform:l}=r,c=this.cachedCanvases.getCanvas("maskCanvas",a,o),h=c.context;h.save();const d=this.getObject(x,r);c8(h,d),h.globalCompositeOperation="source-in",h.fillStyle=i?s.getPattern(h,this,d0(t),ee.FILL):s,h.fillRect(0,0,a,o),h.restore(),t.save(),t.transform(...l),t.scale(1,-1),Al(t,c.canvas,0,0,a,o,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){et("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){et("Dependent image isn't ready yet");return}const x=r.width,a=r.height,o=[];for(let l=0,c=i.length;l<c;l+=2)o.push({transform:[t,0,0,s,i[l],i[l+1]],x:0,y:0,w:x,h:a});this.paintInlineImageXObjectGroup(r,o)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),x=r.context;return x.filter=this.current.transferMaps,x.drawImage(t,0,0),x.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,i=this.ctx;if(this.save(),!se){const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none")}i.scale(1/t,-1/s);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const o=this.cachedCanvases.getCanvas("inlineImage",t,s).context;l8(o,e),r=this.applyTransferMapsToCanvas(o)}const x=this._scaleImage(r,d0(i));i.imageSmoothingEnabled=h8(At(i),e.interpolate),Al(i,x.img,0,0,x.paintWidth,x.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const r=e.width,x=e.height,o=this.cachedCanvases.getCanvas("inlineImage",r,x).context;l8(o,e),i=this.applyTransferMapsToCanvas(o)}for(const r of t)s.save(),s.transform(...r.transform),s.scale(1,-1),Al(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(t||(this.pendingClip===d8?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=At(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let x,a;if(s===0&&i===0){const o=Math.abs(t),l=Math.abs(r);if(o===l)if(e===0)x=a=1/o;else{const c=o*e;x=a=c<1?1/c:1}else if(e===0)x=1/o,a=1/l;else{const c=o*e,h=l*e;x=c<1?1/c:1,a=h<1?1/h:1}}else{const o=Math.abs(t*r-s*i),l=Math.hypot(t,s),c=Math.hypot(i,r);if(e===0)x=c/o,a=l/o;else{const h=e*o;x=c>h?c/h:1,a=l>h?l/h:1}}this._cachedScaleForStroking[0]=x,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:s}=this.current,[i,r]=this.getScaleForStroking();if(t.lineWidth=s||1,i===1&&r===1){t.stroke();return}const x=t.getLineDash();if(e&&t.save(),t.scale(i,r),x.length>0){const a=Math.max(i,r);t.setLineDash(x.map(o=>o/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ua=new WeakSet,nu=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Xa=new WeakSet,xu=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},ja=new WeakSet,au=function(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i};let $r=n9;for(const u in qe)$r.prototype[u]!==void 0&&($r.prototype[qe[u]]=$r.prototype[u]);var Wa,Va;class us{static get workerPort(){return n(this,Wa)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");B(this,Wa,e)}static get workerSrc(){return n(this,Va)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");B(this,Va,e)}}Wa=new WeakMap,Va=new WeakMap,A(us,Wa,null),A(us,Va,"");var zi,qa;class oA{constructor({parsedData:e,rawData:t}){A(this,zi,void 0);A(this,qa,void 0);B(this,zi,e),B(this,qa,t)}getRaw(){return n(this,qa)}get(e){return n(this,zi).get(e)??null}getAll(){return Vu(n(this,zi))}has(e){return n(this,zi).has(e)}}zi=new WeakMap,qa=new WeakMap;const Ir=Symbol("INTERNAL");var Ya,Ka,Qa,Cn;class lA{constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){A(this,Ya,!1);A(this,Ka,!1);A(this,Qa,!1);A(this,Cn,!0);B(this,Ya,!!(e&Se.DISPLAY)),B(this,Ka,!!(e&Se.PRINT)),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(n(this,Qa))return n(this,Cn);if(!n(this,Cn))return!1;const{print:e,view:t}=this.usage;return n(this,Ya)?(t==null?void 0:t.viewState)!=="OFF":n(this,Ka)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Ir&&ut("Internal method `_setVisible` called."),B(this,Qa,s),B(this,Cn,t)}}Ya=new WeakMap,Ka=new WeakMap,Qa=new WeakMap,Cn=new WeakMap;var Rs,lt,Bn,pn,Za,ou;class cA{constructor(e,t=Se.DISPLAY){A(this,Za);A(this,Rs,null);A(this,lt,new Map);A(this,Bn,null);A(this,pn,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,B(this,pn,e.order);for(const s of e.groups)n(this,lt).set(s.id,new lA(t,s));if(e.baseState==="OFF")for(const s of n(this,lt).values())s._setVisible(Ir,!1);for(const s of e.on)n(this,lt).get(s)._setVisible(Ir,!0);for(const s of e.off)n(this,lt).get(s)._setVisible(Ir,!1);B(this,Bn,this.getHash())}}isVisible(e){if(n(this,lt).size===0)return!0;if(!e)return Xh("Optional content group not defined."),!0;if(e.type==="OCG")return n(this,lt).has(e.id)?n(this,lt).get(e.id).visible:(et(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return D(this,Za,ou).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!n(this,lt).has(t))return et(`Optional content group not found: ${t}`),!0;if(n(this,lt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!n(this,lt).has(t))return et(`Optional content group not found: ${t}`),!0;if(!n(this,lt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!n(this,lt).has(t))return et(`Optional content group not found: ${t}`),!0;if(!n(this,lt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!n(this,lt).has(t))return et(`Optional content group not found: ${t}`),!0;if(n(this,lt).get(t).visible)return!1}return!0}return et(`Unknown optional content policy ${e.policy}.`),!0}return et(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const i=n(this,lt).get(e);if(!i){et(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const x of i.rbGroups)for(const a of x)a!==e&&((r=n(this,lt).get(a))==null||r._setVisible(Ir,!1,!0));i._setVisible(Ir,!!t,!0),B(this,Rs,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=n(this,lt).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}B(this,Rs,null)}get hasInitialVisibility(){return n(this,Bn)===null||this.getHash()===n(this,Bn)}getOrder(){return n(this,lt).size?n(this,pn)?n(this,pn).slice():[...n(this,lt).keys()]:null}getGroups(){return n(this,lt).size>0?Vu(n(this,lt)):null}getGroup(e){return n(this,lt).get(e)||null}getHash(){if(n(this,Rs)!==null)return n(this,Rs);const e=new tE;for(const[t,s]of n(this,lt))e.update(`${t}:${s.visible}`);return B(this,Rs,e.hexdigest())}}Rs=new WeakMap,lt=new WeakMap,Bn=new WeakMap,pn=new WeakMap,Za=new WeakSet,ou=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let x;if(Array.isArray(r))x=D(this,Za,ou).call(this,r);else if(n(this,lt).has(r))x=n(this,lt).get(r).visible;else return et(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!x)return!1;break;case"Or":if(x)return!0;break;case"Not":return!x;default:return!0}}return s==="And"};class hA{constructor(e,{disableRange:t=!1,disableStream:s=!1}){yt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:x,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=x,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const o=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(o)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((o,l)=>{this._onReceiveData({begin:o,chunk:l})}),e.addProgressListener((o,l)=>{this._onProgress({loaded:o,total:l})}),e.addProgressiveReadListener(o=>{this._onReceiveData({chunk:o})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});yt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){yt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new dA(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new uA(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class dA{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=Ku(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class uA{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function EA(u){let e=!0,t=s("filename\\*","i").exec(u);if(t){t=t[1];let c=a(t);return c=unescape(c),c=o(c),c=l(c),r(c)}if(t=x(u),t){const c=l(t);return r(c)}if(t=s("filename","i").exec(u),t){t=t[1];let c=a(t);return c=l(c),r(c)}function s(c,h){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(c,h){if(c){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const d=new TextDecoder(c,{fatal:!0}),E=jh(h);h=d.decode(E),e=!1}catch{}}return h}function r(c){return e&&/[\x80-\xff]/.test(c)&&(c=i("utf-8",c),e&&(c=i("iso-8859-1",c))),c}function x(c){const h=[];let d;const E=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=E.exec(c))!==null;){let[,C,p,F]=d;if(C=parseInt(C,10),C in h){if(C===0)break;continue}h[C]=[p,F]}const f=[];for(let C=0;C<h.length&&C in h;++C){let[p,F]=h[C];F=a(F),p&&(F=unescape(F),C===0&&(F=o(F))),f.push(F)}return f.join("")}function a(c){if(c.startsWith('"')){const h=c.slice(1).split('\\"');for(let d=0;d<h.length;++d){const E=h[d].indexOf('"');E!==-1&&(h[d]=h[d].slice(0,E),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}c=h.join('"')}return c}function o(c){const h=c.indexOf("'");if(h===-1)return c;const d=c.slice(0,h),f=c.slice(h+1).replace(/^[^']*'/,"");return i(d,f)}function l(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,E,f){if(E==="q"||E==="Q")return f=f.replaceAll("_"," "),f=f.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,p){return String.fromCharCode(parseInt(p,16))}),i(d,f);try{f=atob(f)}catch{}return i(d,f)})}return""}function EE(u,e){const t=new Headers;if(!u||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function qh(u){try{return new URL(u).origin}catch{}return null}function fE({responseHeaders:u,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(u.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||u.get("Accept-Ranges")!=="bytes"||(u.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function AE(u){const e=u.get("Content-Disposition");if(e){let t=EA(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Ku(t))return t}return null}function Yh(u,e){return u===404||u===0&&e.startsWith("file:")?new Yx('Missing PDF "'+e+'".'):new Yl(`Unexpected server response (${u}) while retrieving PDF "${e}".`,u)}function CE(u){return u===200||u===206}function BE(u,e,t){return{method:"GET",headers:u,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function pE(u){return u instanceof Uint8Array?u.buffer:u instanceof ArrayBuffer?u:(et(`getArrayBuffer - unexpected data format: ${u}`),new Uint8Array(u).buffer)}class u8{constructor(e){K(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=EE(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return yt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new fA(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new AA(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class fA{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,BE(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=qh(r.url),!CE(r.status))throw Yh(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const x=r.headers,{allowRangeRequests:a,suggestedLength:o}=fE({responseHeaders:x,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=AE(x),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ei("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:pE(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class AA{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const x=i.url;fetch(x,BE(r,this._withCredentials,this._abortController)).then(a=>{const o=qh(a.url);if(o!==e._responseOrigin)throw new Error(`Expected range response-origin "${o}" to match "${e._responseOrigin}".`);if(!CE(a.status))throw Yh(a.status,x);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:pE(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Pd=200,Sd=206;function CA(u){const e=u.response;return typeof e!="string"?e:jh(e).buffer}class BA{constructor({url:e,httpHeaders:t,withCredentials:s}){K(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=EE(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,x]of this.headers)t.setRequestHeader(r,x);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Sd):i.expectedStatus=Pd,t.responseType="arraybuffer",yt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||Pd;if(!(r===Pd&&s.expectedStatus===Sd)&&r!==s.expectedStatus){s.onError(i.status);return}const a=CA(i);if(r===Sd){const o=i.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(o);l?s.onDone({begin:parseInt(l[1],10),chunk:a}):(et('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class pA{constructor(e){this._source=e,this._manager=new BA(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return yt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new FA(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new gA(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class FA{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=qh(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[o,...l]=a.split(": ");return[o,l.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:x}=fE({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=x||this._contentLength,this._filename=AE(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Yh(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class gA{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=qh((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Yh(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const DA=/^[a-z][a-z0-9\-+.]+:/i;function mA(u){if(DA.test(u))return new URL(u);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(u))}class vA{constructor(e){this.source=e,this.url=mA(e.url),yt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return yt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new bA(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new wA(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class bA{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Yx(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ei("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class wA{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const yA=1e5,he=30,kA=.8;var C8,Ms,fe,Ja,to,Gi,q0,eo,so,$i,Fn,gn,Ls,Dn,io,mn,Ui,ro,no,Xi,ji,xo,Is,vn,$c,FE,Uc,gE,ao,lu,bn,Pl,oo,cu,Xc,DE,jc,mE;const gt=class gt{constructor({textContentSource:e,container:t,viewport:s}){A(this,$c);A(this,Uc);A(this,ao);A(this,Ms,Promise.withResolvers());A(this,fe,null);A(this,Ja,!1);A(this,to,!!((C8=globalThis.FontInspector)!=null&&C8.enabled));A(this,Gi,null);A(this,q0,null);A(this,eo,0);A(this,so,0);A(this,$i,null);A(this,Fn,null);A(this,gn,0);A(this,Ls,0);A(this,Dn,Object.create(null));A(this,io,[]);A(this,mn,null);A(this,Ui,[]);A(this,ro,new WeakMap);A(this,no,null);var o;if(e instanceof ReadableStream)B(this,mn,e);else if(typeof e=="object")B(this,mn,new ReadableStream({start(l){l.enqueue(e),l.close()}}));else throw new Error('No "textContentSource" parameter specified.');B(this,fe,B(this,Fn,t)),B(this,Ls,s.scale*(globalThis.devicePixelRatio||1)),B(this,gn,s.rotation),B(this,q0,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:x,pageY:a}=s.rawDims;B(this,no,[1,0,0,-1,-x,a+r]),B(this,so,i),B(this,eo,r),D(o=gt,Xc,DE).call(o),yr(t,s),n(this,Ms).promise.finally(()=>{n(gt,vn).delete(this),B(this,q0,null),B(this,Dn,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=le.platform;return rt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{n(this,$i).read().then(({value:t,done:s})=>{if(s){n(this,Ms).resolve();return}n(this,Gi)??B(this,Gi,t.lang),Object.assign(n(this,Dn),t.styles),D(this,$c,FE).call(this,t.items),e()},n(this,Ms).reject)};return B(this,$i,n(this,mn).getReader()),n(gt,vn).add(this),e(),n(this,Ms).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==n(this,gn)&&(t==null||t(),B(this,gn,i),yr(n(this,Fn),{rotation:i})),s!==n(this,Ls)){t==null||t(),B(this,Ls,s);const x={div:null,properties:null,ctx:D(r=gt,bn,Pl).call(r,n(this,Gi))};for(const a of n(this,Ui))x.properties=n(this,ro).get(a),x.div=a,D(this,ao,lu).call(this,x)}}cancel(){var t;const e=new ei("TextLayer task cancelled.");(t=n(this,$i))==null||t.cancel(e).catch(()=>{}),B(this,$i,null),n(this,Ms).reject(e)}get textDivs(){return n(this,Ui)}get textContentItemsStr(){return n(this,io)}static cleanup(){if(!(n(this,vn).size>0)){n(this,Xi).clear();for(const{canvas:e}of n(this,ji).values())e.remove();n(this,ji).clear()}}};Ms=new WeakMap,fe=new WeakMap,Ja=new WeakMap,to=new WeakMap,Gi=new WeakMap,q0=new WeakMap,eo=new WeakMap,so=new WeakMap,$i=new WeakMap,Fn=new WeakMap,gn=new WeakMap,Ls=new WeakMap,Dn=new WeakMap,io=new WeakMap,mn=new WeakMap,Ui=new WeakMap,ro=new WeakMap,no=new WeakMap,Xi=new WeakMap,ji=new WeakMap,xo=new WeakMap,Is=new WeakMap,vn=new WeakMap,$c=new WeakSet,FE=function(e){var i,r;if(n(this,Ja))return;(r=n(this,q0)).ctx??(r.ctx=D(i=gt,bn,Pl).call(i,n(this,Gi)));const t=n(this,Ui),s=n(this,io);for(const x of e){if(t.length>yA){et("Ignoring additional textDivs for performance reasons."),B(this,Ja,!0);return}if(x.str===void 0){if(x.type==="beginMarkedContentProps"||x.type==="beginMarkedContent"){const a=n(this,fe);B(this,fe,document.createElement("span")),n(this,fe).classList.add("markedContent"),x.id!==null&&n(this,fe).setAttribute("id",`${x.id}`),a.append(n(this,fe))}else x.type==="endMarkedContent"&&B(this,fe,n(this,fe).parentNode);continue}s.push(x.str),D(this,Uc,gE).call(this,x)}},Uc=new WeakSet,gE=function(e){var C;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};n(this,Ui).push(t);const i=X.transform(n(this,no),e.transform);let r=Math.atan2(i[1],i[0]);const x=n(this,Dn)[e.fontName];x.vertical&&(r+=Math.PI/2);let a=n(this,to)&&x.fontSubstitution||x.fontFamily;a=gt.fontFamilyMap.get(a)||a;const o=Math.hypot(i[2],i[3]),l=o*D(C=gt,jc,mE).call(C,a,n(this,Gi));let c,h;r===0?(c=i[4],h=i[5]-l):(c=i[4]+l*Math.sin(r),h=i[5]-l*Math.cos(r));const d="calc(var(--scale-factor)*",E=t.style;n(this,fe)===n(this,Fn)?(E.left=`${(100*c/n(this,so)).toFixed(2)}%`,E.top=`${(100*h/n(this,eo)).toFixed(2)}%`):(E.left=`${d}${c.toFixed(2)}px)`,E.top=`${d}${h.toFixed(2)}px)`),E.fontSize=`${d}${(n(gt,Is)*o).toFixed(2)}px)`,E.fontFamily=a,s.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,n(this,to)&&(t.dataset.fontName=x.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let f=!1;if(e.str.length>1)f=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const p=Math.abs(e.transform[0]),F=Math.abs(e.transform[3]);p!==F&&Math.max(p,F)/Math.min(p,F)>1.5&&(f=!0)}if(f&&(s.canvasWidth=x.vertical?e.height:e.width),n(this,ro).set(t,s),n(this,q0).div=t,n(this,q0).properties=s,D(this,ao,lu).call(this,n(this,q0)),s.hasText&&n(this,fe).append(t),s.hasEOL){const p=document.createElement("br");p.setAttribute("role","presentation"),n(this,fe).append(p)}},ao=new WeakSet,lu=function(e){var a;const{div:t,properties:s,ctx:i}=e,{style:r}=t;let x="";if(n(gt,Is)>1&&(x=`scale(${1/n(gt,Is)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:o}=r,{canvasWidth:l,fontSize:c}=s;D(a=gt,oo,cu).call(a,i,c*n(this,Ls),o);const{width:h}=i.measureText(t.textContent);h>0&&(x=`scaleX(${l*n(this,Ls)/h}) ${x}`)}s.angle!==0&&(x=`rotate(${s.angle}deg) ${x}`),x.length>0&&(r.transform=x)},bn=new WeakSet,Pl=function(e=null){let t=n(this,ji).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),n(this,ji).set(e,t),n(this,xo).set(t,{size:0,family:""})}return t},oo=new WeakSet,cu=function(e,t,s){const i=n(this,xo).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},Xc=new WeakSet,DE=function(){if(n(this,Is)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),B(this,Is,e.getBoundingClientRect().height),e.remove()},jc=new WeakSet,mE=function(e,t){const s=n(this,Xi).get(e);if(s)return s;const i=D(this,bn,Pl).call(this,t);i.canvas.width=i.canvas.height=he,D(this,oo,cu).call(this,i,he,e);const r=i.measureText("");let x=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(x){const c=x/(x+a);return n(this,Xi).set(e,c),i.canvas.width=i.canvas.height=0,c}i.strokeStyle="red",i.clearRect(0,0,he,he),i.strokeText("g",0,0);let o=i.getImageData(0,0,he,he).data;a=0;for(let c=o.length-1-3;c>=0;c-=4)if(o[c]>0){a=Math.ceil(c/4/he);break}i.clearRect(0,0,he,he),i.strokeText("A",0,he),o=i.getImageData(0,0,he,he).data,x=0;for(let c=0,h=o.length;c<h;c+=4)if(o[c]>0){x=he-Math.floor(c/4/he);break}i.canvas.width=i.canvas.height=0;const l=x?x/(x+a):kA;return n(this,Xi).set(e,l),l},A(gt,bn),A(gt,oo),A(gt,Xc),A(gt,jc),A(gt,Xi,new Map),A(gt,ji,new Map),A(gt,xo,new WeakMap),A(gt,Is,null),A(gt,vn,new Set);let Kx=gt;class Qx{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var o;if(!r)return;let x=null;const a=r.name;if(a==="#text")x=r.value;else if(Qx.shouldBuildText(a))(o=r==null?void 0:r.attributes)!=null&&o.textContent?x=r.attributes.textContent:r.value&&(x=r.value);else return;if(x!==null&&t.push({str:x}),!!r.children)for(const l of r.children)i(l)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const _A=65536,PA=100,SA=5e3,TA=se?W1:U1,RA=se?V1:oE,MA=se?j1:X1,LA=se?q1:dE;function IA(u={}){typeof u=="string"||u instanceof URL?u={url:u}:(u instanceof ArrayBuffer||ArrayBuffer.isView(u))&&(u={data:u});const e=new hu,{docId:t}=e,s=u.url?NA(u.url):null,i=u.data?OA(u.data):null,r=u.httpHeaders||null,x=u.withCredentials===!0,a=u.password??null,o=u.range instanceof vE?u.range:null,l=Number.isInteger(u.rangeChunkSize)&&u.rangeChunkSize>0?u.rangeChunkSize:_A;let c=u.worker instanceof Ur?u.worker:null;const h=u.verbosity,d=typeof u.docBaseUrl=="string"&&!Vh(u.docBaseUrl)?u.docBaseUrl:null,E=typeof u.cMapUrl=="string"?u.cMapUrl:null,f=u.cMapPacked!==!1,C=u.CMapReaderFactory||RA,p=typeof u.standardFontDataUrl=="string"?u.standardFontDataUrl:null,F=u.StandardFontDataFactory||LA,m=u.stopAtErrors!==!0,v=Number.isInteger(u.maxImageSize)&&u.maxImageSize>-1?u.maxImageSize:-1,g=u.isEvalSupported!==!1,w=typeof u.isOffscreenCanvasSupported=="boolean"?u.isOffscreenCanvasSupported:!se,y=typeof u.isImageDecoderSupported=="boolean"?u.isImageDecoderSupported:!se&&(le.platform.isFirefox||!globalThis.chrome),b=Number.isInteger(u.canvasMaxAreaInBytes)?u.canvasMaxAreaInBytes:-1,k=typeof u.disableFontFace=="boolean"?u.disableFontFace:se,_=u.fontExtraProperties===!0,S=u.enableXfa===!0,P=u.ownerDocument||globalThis.document,T=u.disableRange===!0,N=u.disableStream===!0,L=u.disableAutoFetch===!0,O=u.pdfBug===!0,R=u.CanvasFactory||TA,M=u.FilterFactory||MA,$=u.enableHWA===!0,V=o?o.length:u.length??NaN,q=typeof u.useSystemFonts=="boolean"?u.useSystemFonts:!se&&!k,I=typeof u.useWorkerFetch=="boolean"?u.useWorkerFetch:C===oE&&F===dE&&E&&p&&Sx(E,document.baseURI)&&Sx(p,document.baseURI),Y=null;g1(h);const Z={canvasFactory:new R({ownerDocument:P,enableHWA:$}),filterFactory:new M({docId:t,ownerDocument:P}),cMapReaderFactory:I?null:new C({baseUrl:E,isCompressed:f}),standardFontDataFactory:I?null:new F({baseUrl:p})};if(!c){const W={verbosity:h,port:us.workerPort};c=W.port?Ur.fromPort(W):new Ur(W),e._worker=c}const G={docId:t,apiVersion:"4.10.38",data:i,password:a,disableAutoFetch:L,rangeChunkSize:l,length:V,docBaseUrl:d,enableXfa:S,evaluatorOptions:{maxImageSize:v,disableFontFace:k,ignoreErrors:m,isEvalSupported:g,isOffscreenCanvasSupported:w,isImageDecoderSupported:y,canvasMaxAreaInBytes:b,fontExtraProperties:_,useSystemFonts:q,cMapUrl:I?E:null,standardFontDataUrl:I?p:null}},nt={disableFontFace:k,fontExtraProperties:_,ownerDocument:P,pdfBug:O,styleElement:Y,loadingParams:{disableAutoFetch:L,enableXfa:S}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const W=c.messageHandler.sendWithPromise("GetDocRequest",G,i?[i.buffer]:null);let j;if(o)j=new hA(o,{disableRange:T,disableStream:N});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let Q;if(se)if(Sx(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Q=u8}else Q=vA;else Q=Sx(s)?u8:pA;j=new Q({url:s,length:V,httpHeaders:r,withCredentials:x,rangeChunkSize:l,disableRange:T,disableStream:N})}return W.then(Q=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const kt=new Lx(t,Q,c.port),c0=new $A(kt,e,j,nt,Z);e._transport=c0,kt.send("Ready",null)})}).catch(e._capability.reject),e}function NA(u){if(u instanceof URL)return u.href;try{return new URL(u,window.location).href}catch{if(se&&typeof u=="string")return u}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function OA(u){if(se&&typeof Buffer<"u"&&u instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength)return u;if(typeof u=="string")return jh(u);if(u instanceof ArrayBuffer||ArrayBuffer.isView(u)||typeof u=="object"&&!isNaN(u==null?void 0:u.length))return new Uint8Array(u);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function E8(u){return typeof u=="object"&&Number.isInteger(u==null?void 0:u.num)&&u.num>=0&&Number.isInteger(u==null?void 0:u.gen)&&u.gen>=0}var Wc;const Vc=class Vc{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${ie(Vc,Wc)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,s,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};Wc=new WeakMap,A(Vc,Wc,0);let hu=Vc;class vE{constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const s of this._rangeListeners)s(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){ut("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class HA{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return rt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ns,Y0,Os,Nr,wn,Sl;class zA{constructor(e,t,s,i=!1){A(this,Os);A(this,wn);A(this,Ns,null);A(this,Y0,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new t8:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new bE,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new hl({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return rt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:i=Cs.ENABLE,transform:r=null,background:x=null,optionalContentConfigPromise:a=null,annotationCanvasMap:o=null,pageColors:l=null,printAnnotationStorage:c=null,isEditing:h=!1}){var g,w;(g=this._stats)==null||g.time("Overall");const d=this._transport.getRenderingIntent(s,i,c,h),{renderingIntent:E,cacheKey:f}=d;B(this,Y0,!1),D(this,wn,Sl).call(this),a||(a=this._transport.getOptionalContentConfig(E));let C=this._intentStates.get(f);C||(C=Object.create(null),this._intentStates.set(f,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const p=!!(E&Se.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(w=this._stats)==null||w.time("Page Request"),this._pumpOperatorList(d));const F=y=>{var b;C.renderTasks.delete(m),(this._maybeCleanupAfterRender||p)&&B(this,Y0,!0),D(this,Os,Nr).call(this,!p),y?(m.capability.reject(y),this._abortOperatorList({intentState:C,reason:y instanceof Error?y:new Error(y)})):m.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(b=globalThis.Stats)!=null&&b.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},m=new uu({callback:F,params:{canvasContext:e,viewport:t,transform:r,background:x},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:o,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!p,pdfBug:this._pdfBug,pageColors:l});(C.renderTasks||(C.renderTasks=new Set)).add(m);const v=m.task;return Promise.all([C.displayReadyCapability.promise,a]).then(([y,b])=>{var k;if(this.destroyed){F();return}if((k=this._stats)==null||k.time("Rendering"),!(b.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");m.initializeGraphics({transparency:y,optionalContentConfig:b}),m.operatorListChanged()}).catch(F),v}getOperatorList({intent:e="display",annotationMode:t=Cs.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var l;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(o))}const x=this._transport.getRenderingIntent(e,t,s,i,!0);let a=this._intentStates.get(x.cacheKey);a||(a=Object.create(null),this._intentStates.set(x.cacheKey,a));let o;return a.opListReadCapability||(o=Object.create(null),o.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(o),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(l=this._stats)==null||l.time("Page Request"),this._pumpOperatorList(x)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Qx.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){x.read().then(function({value:o,done:l}){if(l){s(a);return}a.lang??(a.lang=o.lang),Object.assign(a.styles,o.styles),a.items.push(...o.items),r()},i)}const x=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),B(this,Y0,!1),D(this,wn,Sl).call(this),Promise.all(e)}cleanup(e=!1){B(this,Y0,!0);const t=D(this,Os,Nr).call(this,!1);return e&&t&&this._stats&&(this._stats=new t8),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&D(this,Os,Nr).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:x}=s,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},x).getReader(),l=this._intentStates.get(t);l.streamReader=o;const c=()=>{o.read().then(({value:h,done:d})=>{if(d){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,l),c())},h=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const d of l.renderTasks)d.operatorListChanged();D(this,Os,Nr).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(h);else if(l.opListReadCapability)l.opListReadCapability.reject(h);else throw h}})};c()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Yu){let i=PA;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new ei(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Ns=new WeakMap,Y0=new WeakMap,Os=new WeakSet,Nr=function(e=!1){if(D(this,wn,Sl).call(this),!n(this,Y0)||this.destroyed)return!1;if(e)return B(this,Ns,setTimeout(()=>{B(this,Ns,null),D(this,Os,Nr).call(this,!1)},SA)),!1;for(const{renderTasks:t,operatorList:s}of this._intentStates.values())if(t.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),B(this,Y0,!1),!0},wn=new WeakSet,Sl=function(){n(this,Ns)&&(clearTimeout(n(this,Ns)),B(this,Ns,null))};var K0,qc;class GA{constructor(){A(this,K0,new Map);A(this,qc,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};n(this,qc).then(()=>{for(const[i]of n(this,K0))i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){et("LoopbackPort - cannot use an `aborted` signal.");return}const x=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",x),r.addEventListener("abort",x)}n(this,K0).set(t,i)}removeEventListener(e,t){const s=n(this,K0).get(t);s==null||s(),n(this,K0).delete(t)}terminate(){for(const[,e]of n(this,K0))e==null||e();n(this,K0).clear()}}K0=new WeakMap,qc=new WeakMap;var Yc,Wi,Vi,yn,Tl,kn,Rl;const ft=class ft{constructor({name:e=null,port:t=null,verbosity:s=D1()}={}){A(this,yn);var i;if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=n(ft,Vi))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(n(ft,Vi)||B(ft,Vi,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Lx("main","worker",e),this._messageHandler.on("ready",function(){}),D(this,yn,Tl).call(this)}_initialize(){if(n(ft,Wi)||n(ft,kn,Rl)){this._setupFakeWorker();return}let{workerSrc:e}=ft;try{ft._isSameOrigin(window.location.href,e)||(e=ft._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Lx("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}this._messageHandler=s,this._port=t,this._webWorker=t,D(this,yn,Tl).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{x()}catch{this._setupFakeWorker()}});const x=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};x();return}catch{Xh("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){n(ft,Wi)||(et("Setting up fake worker."),B(ft,Wi,!0)),ft._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new GA;this._port=t;const s=`fake${ie(ft,Yc)._++}`,i=new Lx(s+"_worker",s,t);e.setup(i,t),this._messageHandler=new Lx(s,s+"_worker",t),D(this,yn,Tl).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,s;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=n(ft,Vi))==null||t.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(e){var s;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(s=n(this,Vi))==null?void 0:s.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ft(e)}static get workerSrc(){if(us.workerSrc)return us.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return rt(this,"_setupFakeWorkerGlobal",(async()=>n(this,kn,Rl)?n(this,kn,Rl):(await Nf(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};Yc=new WeakMap,Wi=new WeakMap,Vi=new WeakMap,yn=new WeakSet,Tl=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},kn=new WeakSet,Rl=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},A(ft,kn),A(ft,Yc,0),A(ft,Wi,!1),A(ft,Vi,void 0),se&&(B(ft,Wi,!0),us.workerSrc||(us.workerSrc="./pdf.worker.mjs")),ft._isSameOrigin=(e,t)=>{let s;try{if(s=new URL(e),!s.origin||s.origin==="null")return!1}catch{return!1}const i=new URL(t,s);return s.origin===i.origin},ft._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Ur=ft;var Q0,v0,_n,Pn,Z0,qi,zx;class $A{constructor(e,t,s,i,r){A(this,qi);A(this,Q0,new Map);A(this,v0,new Map);A(this,_n,new Map);A(this,Pn,new Map);A(this,Z0,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new bE,this.fontLoader=new G1({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return rt(this,"annotationStorage",new Ju)}getRenderingIntent(e,t=Cs.ENABLE,s=null,i=!1,r=!1){let x=Se.DISPLAY,a=tu;switch(e){case"any":x=Se.ANY;break;case"display":break;case"print":x=Se.PRINT;break;default:et(`getRenderingIntent - invalid intent: ${e}`)}const o=x&Se.PRINT&&s instanceof sE?s:this.annotationStorage;switch(t){case Cs.DISABLE:x+=Se.ANNOTATIONS_DISABLE;break;case Cs.ENABLE:break;case Cs.ENABLE_FORMS:x+=Se.ANNOTATIONS_FORMS;break;case Cs.ENABLE_STORAGE:x+=Se.ANNOTATIONS_STORAGE,a=o.serializable;break;default:et(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(x+=Se.IS_EDITING),r&&(x+=Se.OPLIST);const{ids:l,hash:c}=o.modifiedIds,h=[x,a.hash,c];return{renderingIntent:x,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=n(this,Z0))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of n(this,v0).values())e.push(i._destroy());n(this,v0).clear(),n(this,_n).clear(),n(this,Pn).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),n(this,Q0).clear(),this.filterFactory.destroy(),Kx.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new ei("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{yt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:x}){if(x){i.close();return}yt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(x=>{if(!this.destroyed)throw x})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:x}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=o=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:o.loaded,total:o.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:x}}),e.on("GetRangeReader",(s,i)=>{yt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:x,done:a}){if(a){i.close();return}yt(x instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(x),1,[x])}).catch(x=>{i.error(x)})},i.onCancel=x=>{r.cancel(x),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new HA(s,this))}),e.on("DocException",s=>{t._capability.reject(de(s))}),e.on("PasswordRequest",s=>{B(this,Z0,Promise.withResolvers());try{if(!t.onPassword)throw de(s);const i=r=>{r instanceof Error?n(this,Z0).reject(r):n(this,Z0).resolve({password:r})};t.onPassword(i,s.code)}catch(i){n(this,Z0).reject(i)}return n(this,Z0).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;n(this,v0).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var x;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":const{disableFontFace:a,fontExtraProperties:o,pdfBug:l}=this._params;if("error"in r){const E=r.error;et(`Error during font loading: ${E}`),this.commonObjs.resolve(s,E);break}const c=l&&((x=globalThis.FontInspector)!=null&&x.enabled)?(E,f)=>globalThis.FontInspector.fontAdded(E,f):null,h=new $1(r,{disableFontFace:a,fontExtraProperties:o,inspectFont:c});this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!o&&h.data&&(h.data=null),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:d}=r;yt(d,"The imageRef must be defined.");for(const E of n(this,v0).values())for(const[,f]of E.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,x])=>{var o;if(this.destroyed)return;const a=n(this,v0).get(i);if(!a.objs.has(s)){if(a._intentStates.size===0){(o=x==null?void 0:x.bitmap)==null||o.close();return}switch(r){case"Image":a.objs.resolve(s,x),(x==null?void 0:x.dataLen)>C1&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(s,x);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),e.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&et("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=n(this,_n).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&n(this,Pn).set(r.refStr,e);const x=new zA(t,r,this,this._params.pdfBug);return n(this,v0).set(t,x),x});return n(this,_n).set(t,i),i}getPageIndex(e){return E8(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return D(this,qi,zx).call(this,"GetFieldObjects")}hasJSActions(){return D(this,qi,zx).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return D(this,qi,zx).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return D(this,qi,zx).call(this,"GetOptionalContentConfig").then(t=>new cA(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=n(this,Q0).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,x;return{info:i[0],metadata:i[1]?new oA(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((x=this._fullReader)==null?void 0:x.contentLength)??null}});return n(this,Q0).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of n(this,v0).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),n(this,Q0).clear(),this.filterFactory.destroy(!0),Kx.cleanup()}}cachedPageNumber(e){if(!E8(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return n(this,Pn).get(t)??null}}Q0=new WeakMap,v0=new WeakMap,_n=new WeakMap,Pn=new WeakMap,Z0=new WeakMap,qi=new WeakSet,zx=function(e,t=null){const s=n(this,Q0).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return n(this,Q0).set(e,i),i};const _x=Symbol("INITIAL_DATA");var De,lo,du;class bE{constructor(){A(this,lo);A(this,De,Object.create(null))}get(e,t=null){if(t){const i=D(this,lo,du).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=n(this,De)[e];if(!s||s.data===_x)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=n(this,De)[e];return!!t&&t.data!==_x}delete(e){const t=n(this,De)[e];return!t||t.data===_x?!1:(delete n(this,De)[e],!0)}resolve(e,t=null){const s=D(this,lo,du).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in n(this,De)){const{data:s}=n(this,De)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}B(this,De,Object.create(null))}*[Symbol.iterator](){for(const e in n(this,De)){const{data:t}=n(this,De)[e];t!==_x&&(yield[e,t])}}}De=new WeakMap,lo=new WeakSet,du=function(e){var t;return(t=n(this,De))[e]||(t[e]={...Promise.withResolvers(),data:_x})};var Hs;class UA{constructor(e){A(this,Hs,null);B(this,Hs,e),this.onContinue=null}get promise(){return n(this,Hs).capability.promise}cancel(e=0){n(this,Hs).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=n(this,Hs).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=n(this,Hs);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Hs=new WeakMap;var zs,Yi;const li=class li{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:x,pageIndex:a,canvasFactory:o,filterFactory:l,useRequestAnimationFrame:c=!1,pdfBug:h=!1,pageColors:d=null}){A(this,zs,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=x,this._pageIndex=a,this.canvasFactory=o,this.filterFactory=l,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new UA(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,o;if(this.cancelled)return;if(this._canvas){if(n(li,Yi).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");n(li,Yi).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:x}=this.params;this.gfx=new $r(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:x}),this.operatorListIdx=0,this.graphicsReady=!0,(o=this.graphicsReadyCallback)==null||o.call(this)}cancel(e=null,t=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),n(this,zs)&&(window.cancelAnimationFrame(n(this,zs)),B(this,zs,null)),n(li,Yi).delete(this._canvas),this.callback(e||new Yu(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?B(this,zs,window.requestAnimationFrame(()=>{B(this,zs,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),n(li,Yi).delete(this._canvas),this.callback())))}};zs=new WeakMap,Yi=new WeakMap,A(li,Yi,new WeakSet);let uu=li;const XA="4.10.38",jA="f9bea397f";function f8(u){return Math.floor(Math.max(0,Math.min(1,u))*255).toString(16).padStart(2,"0")}function Px(u){return Math.max(0,Math.min(255,255*u))}class A8{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Px(e),[e,e,e]}static G_HTML([e]){const t=f8(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Px)}static RGB_HTML(e){return`#${e.map(f8).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[Px(1-Math.min(1,e+i)),Px(1-Math.min(1,s+i)),Px(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,x=1-s,a=Math.min(i,r,x);return["CMYK",i,r,x,a]}}class WA{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ut("Abstract method `_createSVG` called.")}}class e9 extends WA{_createSVG(e){return document.createElementNS(M0,e)}}class wE{static setupStorage(e,t,s,i,r){const x=i.getValue(t,{value:null});switch(s.name){case"textarea":if(x.value!==null&&(e.textContent=x.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(x.value===s.attributes.xfaOn?e.setAttribute("checked",!0):x.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(x.value!==null&&e.setAttribute("value",x.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(x.value!==null){e.setAttribute("value",x.value);for(const a of s.children)a.attributes.value===x.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const o=a.target.options,l=o.selectedIndex===-1?"":o[o.selectedIndex].value;i.setValue(t,{value:l})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:x}=t,a=e instanceof HTMLAnchorElement;x.type==="radio"&&(x.name=`${x.name}-${i}`);for(const[o,l]of Object.entries(x))if(l!=null)switch(o){case"class":l.length&&e.setAttribute(o,l.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",l);break;case"style":Object.assign(e.style,l);break;case"textContent":e.textContent=l;break;default:(!a||o!=="href"&&o!=="newWindow")&&e.setAttribute(o,l)}a&&r.addLinkAttributes(e,x.href,x.newWindow),s&&x.dataId&&this.setupStorage(e,x.dataId,t,s)}static render(e){var h,d;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",x=document.createElement(i.name);i.attributes&&this.setAttributes({html:x,element:i,intent:r,linkService:s});const a=r!=="richText",o=e.div;if(o.append(x),e.viewport){const E=`matrix(${e.viewport.transform.join(",")})`;o.style.transform=E}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(i.children.length===0){if(i.value){const E=document.createTextNode(i.value);x.append(E),a&&Qx.shouldBuildText(i.name)&&l.push(E)}return{textDivs:l}}const c=[[i,-1,x]];for(;c.length>0;){const[E,f,C]=c.at(-1);if(f+1===E.children.length){c.pop();continue}const p=E.children[++c.at(-1)[1]];if(p===null)continue;const{name:F}=p;if(F==="#text"){const v=document.createTextNode(p.value);l.push(v),C.append(v);continue}const m=(h=p==null?void 0:p.attributes)!=null&&h.xmlns?document.createElementNS(p.attributes.xmlns,F):document.createElement(F);if(C.append(m),p.attributes&&this.setAttributes({html:m,element:p,storage:t,intent:r,linkService:s}),((d=p.children)==null?void 0:d.length)>0)c.push([p,-1,m]);else if(p.value){const v=document.createTextNode(p.value);a&&Qx.shouldBuildText(F)&&l.push(v),m.append(v)}}for(const E of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))E.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ul=1e3,VA=9,_r=new WeakSet;function ti(u){return{width:u[2]-u[0],height:u[3]-u[1]}}class qA{static create(e){switch(e.data.annotationType){case Pt.LINK:return new yE(e);case Pt.TEXT:return new YA(e);case Pt.WIDGET:switch(e.data.fieldType){case"Tx":return new KA(e);case"Btn":return e.data.radioButton?new PE(e):e.data.checkBox?new ZA(e):new JA(e);case"Ch":return new t6(e);case"Sig":return new QA(e)}return new Pr(e);case Pt.POPUP:return new fu(e);case Pt.FREETEXT:return new LE(e);case Pt.LINE:return new s6(e);case Pt.SQUARE:return new i6(e);case Pt.CIRCLE:return new r6(e);case Pt.POLYLINE:return new IE(e);case Pt.CARET:return new x6(e);case Pt.INK:return new s9(e);case Pt.POLYGON:return new n6(e);case Pt.HIGHLIGHT:return new NE(e);case Pt.UNDERLINE:return new a6(e);case Pt.SQUIGGLY:return new o6(e);case Pt.STRIKEOUT:return new l6(e);case Pt.STAMP:return new OE(e);case Pt.FILEATTACHMENT:return new c6(e);default:return new bt(e)}}}var Ki,Sn,Tn,co,Eu;const x9=class x9{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){A(this,co);A(this,Ki,null);A(this,Sn,!1);A(this,Tn,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:s}){return!!(e!=null&&e.str||t!=null&&t.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return x9._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;n(this,Ki)||B(this,Ki,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&D(this,co,Eu).call(this,t),(s=n(this,Tn))==null||s.popup.updateEdited(e)}resetEdited(){var e;n(this,Ki)&&(D(this,co,Eu).call(this,n(this,Ki).rect),(e=n(this,Tn))==null||e.popup.resetEdited(),B(this,Ki,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Pr||(r.tabIndex=ul);const{style:x}=r;if(x.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof fu){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,r),r}const{width:a,height:o}=ti(t.rect);if(!e&&t.borderStyle.width>0){x.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,p=t.borderStyle.verticalCornerRadius;if(C>0||p>0){const m=`calc(${C}px * var(--scale-factor)) / calc(${p}px * var(--scale-factor))`;x.borderRadius=m}else if(this instanceof PE){const m=`calc(${a}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;x.borderRadius=m}switch(t.borderStyle.style){case yx.SOLID:x.borderStyle="solid";break;case yx.DASHED:x.borderStyle="dashed";break;case yx.BEVELED:et("Unimplemented border style: beveled");break;case yx.INSET:et("Unimplemented border style: inset");break;case yx.UNDERLINE:x.borderBottomStyle="solid";break}const F=t.borderColor||null;F?(B(this,Sn,!0),x.borderColor=X.makeHexColor(F[0]|0,F[1]|0,F[2]|0)):x.borderWidth=0}const l=X.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:c,pageHeight:h,pageX:d,pageY:E}=i.rawDims;x.left=`${100*(l[0]-d)/c}%`,x.top=`${100*(l[1]-E)/h}%`;const{rotation:f}=t;return t.hasOwnCanvas||f===0?(x.width=`${100*a/c}%`,x.height=`${100*o/h}%`):this.setRotation(f,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:x}=ti(this.data.rect);let a,o;e%180===0?(a=100*r/s,o=100*x/i):(a=100*x/s,o=100*r/i),t.style.width=`${a}%`,t.style.height=`${o}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],x=r[0],a=r.slice(1);i.target.style[s]=A8[`${x}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:A8[`${x}_rgb`](a)})};return rt(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const x=s[i];if(x){const a={detail:{[i]:r},target:e};x(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,p,F,m]=e.subarray(2,6);if(i===C&&r===p&&t===F&&s===m)return}const{style:x}=this.container;let a;if(n(this,Sn)){const{borderColor:C,borderWidth:p}=x;x.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${p}">`],this.container.classList.add("hasBorder")}const o=i-t,l=r-s,{svgFactory:c}=this,h=c.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const d=c.createElement("defs");h.append(d);const E=c.createElement("clipPath"),f=`clippath_${this.data.id}`;E.setAttribute("id",f),E.setAttribute("clipPathUnits","objectBoundingBox"),d.append(E);for(let C=2,p=e.length;C<p;C+=8){const F=e[C],m=e[C+1],v=e[C+2],g=e[C+3],w=c.createElement("rect"),y=(v-t)/o,b=(r-m)/l,k=(F-v)/o,_=(m-g)/l;w.setAttribute("x",y),w.setAttribute("y",b),w.setAttribute("width",k),w.setAttribute("height",_),E.append(w),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${y}" y="${b}" width="${k}" height="${_}"/>`)}n(this,Sn)&&(a.push("</g></svg>')"),x.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${f})`}_createPopup(){const{data:e}=this,t=B(this,Tn,new fu({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){ut("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:x,exportValues:a}of i){if(r===-1||x===t)continue;const o=typeof a=="string"?a:null,l=document.querySelector(`[data-element-id="${x}"]`);if(l&&!_r.has(l)){et(`_getElementsByName - element not allowed: ${x}`);continue}s.push({id:x,exportValue:o,domElement:l})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,x=i.getAttribute("data-element-id");x!==t&&_r.has(i)&&s.push({id:x,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Ki=new WeakMap,Sn=new WeakMap,Tn=new WeakMap,co=new WeakSet,Eu=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:x,pageX:a,pageY:o}}}}=this;s==null||s.splice(0,4,...e);const{width:l,height:c}=ti(e);t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(x-e[3]+o)/x}%`,i===0?(t.width=`${100*l/r}%`,t.height=`${100*c/x}%`):this.setRotation(i)};let bt=x9;var J0,ni,Kc,kE,Qc,_E;class yE extends bt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});A(this,J0);A(this,Kc);A(this,Qc);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(D(this,Kc,kE).call(this,i,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(D(this,Qc,_E).call(this,i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&D(this,J0,ni).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),D(this,J0,ni).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const x=i.get(r);x&&(t[x]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),D(this,J0,ni).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),D(this,J0,ni).call(this),!this._fieldObjects){et('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var h;i==null||i();const{fields:r,refs:x,include:a}=s,o=[];if(r.length!==0||x.length!==0){const d=new Set(x);for(const E of r){const f=this._fieldObjects[E]||[];for(const{id:C}of f)d.add(C)}for(const E of Object.values(this._fieldObjects))for(const f of E)d.has(f.id)===a&&o.push(f)}else for(const d of Object.values(this._fieldObjects))o.push(...d);const l=this.annotationStorage,c=[];for(const d of o){const{id:E}=d;switch(c.push(E),d.type){case"text":{const C=d.defaultValue||"";l.setValue(E,{value:C});break}case"checkbox":case"radiobutton":{const C=d.defaultValue===d.exportValues;l.setValue(E,{value:C});break}case"combobox":case"listbox":{const C=d.defaultValue||"";l.setValue(E,{value:C});break}default:continue}const f=document.querySelector(`[data-element-id="${E}"]`);if(f){if(!_r.has(f)){et(`_bindResetFormAction - element not allowed: ${E}`);continue}}else continue;f.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}J0=new WeakSet,ni=function(){this.container.setAttribute("data-internal-link","")},Kc=new WeakSet,kE=function(t,s,i=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},D(this,J0,ni).call(this)},Qc=new WeakSet,_E=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),D(this,J0,ni).call(this)};class YA extends bt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Pr extends bt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return le.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,x=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(x),shift:x.shiftKey,modifier:this._getKeyModifier(x)}})}):e.addEventListener(s,x=>{var a;if(s==="blur"){if(!t.focused||!x.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(x)}}))})}_setEventListeners(e,t,s,i){var r,x,a;for(const[o,l]of s)(l==="Action"||(r=this.data.actions)!=null&&r[l])&&((l==="Focus"||l==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,o,l,i),l==="Focus"&&!((x=this.data.actions)!=null&&x.Blur)?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":X.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||VA,r=e.style;let x;const a=2,o=l=>Math.round(10*l)/10;if(this.data.multiLine){const l=Math.abs(this.data.rect[3]-this.data.rect[1]-a),c=Math.round(l/(bd*i))||1,h=l/c;x=Math.min(i,o(h/bd))}else{const l=Math.abs(this.data.rect[3]-this.data.rect[1]-a);x=Math.min(i,o(l/bd))}r.fontSize=`calc(${x}px * var(--scale-factor))`,r.color=X.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class KA extends Pr{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const x of this._getElementsByName(e.name,e.id))x.domElement&&(x.domElement[t]=s),r.setValue(x.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const x=e.getValue(t,{value:this.data.fieldValue});let a=x.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=x.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=l??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",l??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),_r.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=ul,this._setRequired(s,this.data.required),o&&(s.maxLength=o),s.addEventListener("input",d=>{e.setValue(t,{value:d.target.value}),this.setPropertyOnSiblings(s,"value",d.target.value,"value"),c.formattedValue=null}),s.addEventListener("resetform",d=>{const E=this.data.defaultFieldValue??"";s.value=c.userValue=E,c.formattedValue=null});let h=d=>{const{formattedValue:E}=c;E!=null&&(d.target.value=E),d.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",E=>{var C;if(c.focused)return;const{target:f}=E;c.userValue&&(f.value=c.userValue),c.lastCommittedValue=f.value,c.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(c.focused=!0)}),s.addEventListener("updatefromsandbox",E=>{this.showElementAndHideCanvas(E.target);const f={value(C){c.userValue=C.detail.value??"",e.setValue(t,{value:c.userValue.toString()}),C.target.value=c.userValue},formattedValue(C){const{formattedValue:p}=C.detail;c.formattedValue=p,p!=null&&C.target!==document.activeElement&&(C.target.value=p),e.setValue(t,{formattedValue:p})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var v;const{charLimit:p}=C.detail,{target:F}=C;if(p===0){F.removeAttribute("maxLength");return}F.setAttribute("maxLength",p);let m=c.userValue;!m||m.length<=p||(m=m.slice(0,p),F.value=c.userValue=m,e.setValue(t,{value:m}),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:1,selStart:F.selectionStart,selEnd:F.selectionEnd}}))}};this._dispatchEventFromSandbox(f,E)}),s.addEventListener("keydown",E=>{var p;c.commitKey=1;let f=-1;if(E.key==="Escape"?f=0:E.key==="Enter"&&!this.data.multiLine?f=2:E.key==="Tab"&&(c.commitKey=3),f===-1)return;const{value:C}=E.target;c.lastCommittedValue!==C&&(c.lastCommittedValue=C,c.userValue=C,(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:f,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}}))});const d=h;h=null,s.addEventListener("blur",E=>{var C,p;if(!c.focused||!E.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(c.focused=!1);const{value:f}=E.target;c.userValue=f,c.lastCommittedValue!==f&&((p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:f,willCommit:!0,commitKey:c.commitKey,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}})),d(E)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",E=>{var w;c.lastCommittedValue=null;const{data:f,target:C}=E,{value:p,selectionStart:F,selectionEnd:m}=C;let v=F,g=m;switch(E.inputType){case"deleteWordBackward":{const y=p.substring(0,F).match(/\w*[^\w]*$/);y&&(v-=y[0].length);break}case"deleteWordForward":{const y=p.substring(F).match(/^[^\w]*\w*/);y&&(g+=y[0].length);break}case"deleteContentBackward":F===m&&(v-=1);break;case"deleteContentForward":F===m&&(g+=1);break}E.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,change:f||"",willCommit:!1,selStart:v,selEnd:g}})}),this._setEventListeners(s,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],E=>E.target.value)}if(h&&s.addEventListener("blur",h),this.data.comb){const E=(this.data.rect[2]-this.data.rect[0])/o;s.classList.add("comb"),s.style.letterSpacing=`calc(${E}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class QA extends Pr{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class ZA extends Pr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return _r.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=ul,r.addEventListener("change",x=>{const{name:a,checked:o}=x.target;for(const l of this._getElementsByName(a,s)){const c=o&&l.exportValue===t.exportValue;l.domElement&&(l.domElement.checked=c),e.setValue(l.id,{value:c})}e.setValue(s,{value:o})}),r.addEventListener("resetform",x=>{const a=t.defaultFieldValue||"Off";x.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",x=>{const a={value(o){o.target.checked=o.detail.value!=="Off",e.setValue(s,{value:o.target.checked})}};this._dispatchEventFromSandbox(a,x)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class PE extends Pr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const x of this._getElementsByName(t.fieldName,s))e.setValue(x.id,{value:!1});const r=document.createElement("input");if(_r.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=ul,r.addEventListener("change",x=>{const{name:a,checked:o}=x.target;for(const l of this._getElementsByName(a,s))e.setValue(l.id,{value:!1});e.setValue(s,{value:o})}),r.addEventListener("resetform",x=>{const a=t.defaultFieldValue;x.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const x=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const o={value:l=>{const c=x===l.detail.value;for(const h of this._getElementsByName(l.target.name)){const d=c&&h.id===s;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class JA extends yE{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class t6 extends Pr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");_r.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=ul;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",c=>{const h=this.data.defaultFieldValue;for(const d of i.options)d.selected=d.value===h});for(const c of this.data.options){const h=document.createElement("option");h.textContent=c.displayValue,h.value=c.exportValue,s.value.includes(c.exportValue)&&(h.setAttribute("selected",!0),r=!1),i.append(h)}let x=null;if(r){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),i.prepend(c),x=()=>{c.remove(),i.removeEventListener("input",x),x=null},i.addEventListener("input",x)}const a=c=>{const h=c?"value":"textContent",{options:d,multiple:E}=i;return E?Array.prototype.filter.call(d,f=>f.selected).map(f=>f[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]};let o=a(!1);const l=c=>{const h=c.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",c=>{const h={value(d){x==null||x();const E=d.detail.value,f=new Set(Array.isArray(E)?E:[E]);for(const C of i.options)C.selected=f.has(C.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(d){i.multiple=!0},remove(d){const E=i.options,f=d.detail.remove;E[f].selected=!1,i.remove(f),E.length>0&&Array.prototype.findIndex.call(E,p=>p.selected)===-1&&(E[0].selected=!0),e.setValue(t,{value:a(!0),items:l(d)}),o=a(!1)},clear(d){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(d){const{index:E,displayValue:f,exportValue:C}=d.detail.insert,p=i.children[E],F=document.createElement("option");F.textContent=f,F.value=C,p?p.before(F):i.append(F),e.setValue(t,{value:a(!0),items:l(d)}),o=a(!1)},items(d){const{items:E}=d.detail;for(;i.length!==0;)i.remove(0);for(const f of E){const{displayValue:C,exportValue:p}=f,F=document.createElement("option");F.textContent=C,F.value=p,i.append(F)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(d)}),o=a(!1)},indices(d){const E=new Set(d.detail.indices);for(const f of d.target.options)f.selected=E.has(f.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,c)}),i.addEventListener("input",c=>{var E;const h=a(!0),d=a(!1);e.setValue(t,{value:h}),c.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):i.addEventListener("input",function(c){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class fu extends bt{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:bt._hasPopupData(t)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new e6({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",t.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(s=>`${qu}${s}`).join(",")),this.container}}var Rn,Zc,Jc,Mn,Qi,Dt,ts,Ln,ho,uo,In,es,t0,ss,Eo,is,fo,Zi,Ji,Nn,Ml,Ao,Au,th,SE,eh,TE,sh,RE,ih,ME,On,Ll,Hn,Il,Co,Cu;class e6{constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:x,richText:a,parent:o,rect:l,parentRect:c,open:h}){A(this,Nn);A(this,Ao);A(this,th);A(this,eh);A(this,sh);A(this,ih);A(this,On);A(this,Hn);A(this,Co);A(this,Rn,D(this,sh,RE).bind(this));A(this,Zc,D(this,Co,Cu).bind(this));A(this,Jc,D(this,Hn,Il).bind(this));A(this,Mn,D(this,On,Ll).bind(this));A(this,Qi,null);A(this,Dt,null);A(this,ts,null);A(this,Ln,null);A(this,ho,null);A(this,uo,null);A(this,In,null);A(this,es,!1);A(this,t0,null);A(this,ss,null);A(this,Eo,null);A(this,is,null);A(this,fo,null);A(this,Zi,null);A(this,Ji,!1);var d;B(this,Dt,e),B(this,fo,i),B(this,ts,x),B(this,is,a),B(this,uo,o),B(this,Qi,t),B(this,Eo,l),B(this,In,c),B(this,ho,s),B(this,Ln,Qu.toDateObject(r)),this.trigger=s.flatMap(E=>E.getElementsToTriggerPopup());for(const E of this.trigger)E.addEventListener("click",n(this,Mn)),E.addEventListener("mouseenter",n(this,Jc)),E.addEventListener("mouseleave",n(this,Zc)),E.classList.add("popupTriggerArea");for(const E of s)(d=E.container)==null||d.addEventListener("keydown",n(this,Rn));n(this,Dt).hidden=!0,h&&D(this,On,Ll).call(this)}render(){if(n(this,t0))return;const e=B(this,t0,document.createElement("div"));if(e.className="popup",n(this,Qi)){const r=e.style.outlineColor=X.makeHexColor(...n(this,Qi));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=X.makeHexColor(...n(this,Qi).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=n(this,fo),e.append(t),n(this,Ln)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:n(this,Ln).valueOf()})),t.append(r)}const i=n(this,Nn,Ml);if(i)wE.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(n(this,ts));e.append(r)}n(this,Dt).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let r=0,x=i.length;r<x;++r){const a=i[r];s.append(document.createTextNode(a)),r<x-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;n(this,Zi)||B(this,Zi,{contentsObj:n(this,ts),richText:n(this,is)}),e&&B(this,ss,null),t&&(B(this,is,D(this,eh,TE).call(this,t)),B(this,ts,null)),(s=n(this,t0))==null||s.remove(),B(this,t0,null)}resetEdited(){var e;n(this,Zi)&&({contentsObj:ie(this,ts)._,richText:ie(this,is)._}=n(this,Zi),B(this,Zi,null),(e=n(this,t0))==null||e.remove(),B(this,t0,null),B(this,ss,null))}forceHide(){B(this,Ji,this.isVisible),n(this,Ji)&&(n(this,Dt).hidden=!0)}maybeShow(){n(this,Ji)&&(n(this,t0)||D(this,Hn,Il).call(this),B(this,Ji,!1),n(this,Dt).hidden=!1)}get isVisible(){return n(this,Dt).hidden===!1}}Rn=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,Mn=new WeakMap,Qi=new WeakMap,Dt=new WeakMap,ts=new WeakMap,Ln=new WeakMap,ho=new WeakMap,uo=new WeakMap,In=new WeakMap,es=new WeakMap,t0=new WeakMap,ss=new WeakMap,Eo=new WeakMap,is=new WeakMap,fo=new WeakMap,Zi=new WeakMap,Ji=new WeakMap,Nn=new WeakSet,Ml=function(){const e=n(this,is),t=n(this,ts);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&n(this,is).html||null},Ao=new WeakSet,Au=function(){var e,t,s;return((s=(t=(e=n(this,Nn,Ml))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},th=new WeakSet,SE=function(){var e,t,s;return((s=(t=(e=n(this,Nn,Ml))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},eh=new WeakSet,TE=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:n(this,th,SE),fontSize:n(this,Ao,Au)?`calc(${n(this,Ao,Au)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},sh=new WeakSet,RE=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&n(this,es))&&D(this,On,Ll).call(this)},ih=new WeakSet,ME=function(){if(n(this,ss)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=n(this,uo);let x=!!n(this,In),a=x?n(this,In):n(this,Eo);for(const f of n(this,ho))if(!a||X.intersect(f.data.rect,a)!==null){a=f.data.rect,x=!0;break}const o=X.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),l=5,c=x?a[2]-a[0]+l:0,h=o[0]+c,d=o[1];B(this,ss,[100*(h-i)/t,100*(d-r)/s]);const{style:E}=n(this,Dt);E.left=`${n(this,ss)[0]}%`,E.top=`${n(this,ss)[1]}%`},On=new WeakSet,Ll=function(){B(this,es,!n(this,es)),n(this,es)?(D(this,Hn,Il).call(this),n(this,Dt).addEventListener("click",n(this,Mn)),n(this,Dt).addEventListener("keydown",n(this,Rn))):(D(this,Co,Cu).call(this),n(this,Dt).removeEventListener("click",n(this,Mn)),n(this,Dt).removeEventListener("keydown",n(this,Rn)))},Hn=new WeakSet,Il=function(){n(this,t0)||this.render(),this.isVisible?n(this,es)&&n(this,Dt).classList.add("focused"):(D(this,ih,ME).call(this),n(this,Dt).hidden=!1,n(this,Dt).style.zIndex=parseInt(n(this,Dt).style.zIndex)+1e3)},Co=new WeakSet,Cu=function(){n(this,Dt).classList.remove("focused"),!(n(this,es)||!this.isVisible)&&(n(this,Dt).hidden=!0,n(this,Dt).style.zIndex=parseInt(n(this,Dt).style.zIndex)-1e3)};class LE extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=tt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Bo;class s6 extends bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Bo,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:s,height:i}=ti(t.rect),r=this.svgFactory.create(s,i,!0),x=B(this,Bo,this.svgFactory.createElement("svg:line"));return x.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),x.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),x.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),x.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),x.setAttribute("stroke-width",t.borderStyle.width||1),x.setAttribute("stroke","transparent"),x.setAttribute("fill","transparent"),r.append(x),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n(this,Bo)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bo=new WeakMap;var po;class i6 extends bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,po,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:s,height:i}=ti(t.rect),r=this.svgFactory.create(s,i,!0),x=t.borderStyle.width,a=B(this,po,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",x/2),a.setAttribute("y",x/2),a.setAttribute("width",s-x),a.setAttribute("height",i-x),a.setAttribute("stroke-width",x||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n(this,po)}addHighlightArea(){this.container.classList.add("highlightArea")}}po=new WeakMap;var Fo;class r6 extends bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Fo,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:s,height:i}=ti(t.rect),r=this.svgFactory.create(s,i,!0),x=t.borderStyle.width,a=B(this,Fo,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",i/2),a.setAttribute("rx",s/2-x/2),a.setAttribute("ry",i/2-x/2),a.setAttribute("stroke-width",x||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n(this,Fo)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fo=new WeakMap;var go;class IE extends bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,go,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r}}=this;if(!s)return this.container;const{width:x,height:a}=ti(t),o=this.svgFactory.create(x,a,!0);let l=[];for(let h=0,d=s.length;h<d;h+=2){const E=s[h]-t[0],f=t[3]-s[h+1];l.push(`${E},${f}`)}l=l.join(" ");const c=B(this,go,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",l),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return n(this,go)}addHighlightArea(){this.container.classList.add("highlightArea")}}go=new WeakMap;class n6 extends IE{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class x6 extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Do,tr,mo,Bu;class s9 extends bt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,mo);A(this,Do,null);A(this,tr,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?tt.HIGHLIGHT:tt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:i,borderStyle:r,popupRef:x}}=this,{transform:a,width:o,height:l}=D(this,mo,Bu).call(this,s,t),c=this.svgFactory.create(o,l,!0),h=B(this,Do,this.svgFactory.createElement("svg:g"));c.append(h),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let d=0,E=i.length;d<E;d++){const f=this.svgFactory.createElement(this.svgElementName);n(this,tr).push(f),f.setAttribute("points",i[d].join(",")),h.append(f)}return!x&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:i,rect:r}=t,x=n(this,Do);if(s>=0&&x.setAttribute("stroke-width",s||1),i)for(let a=0,o=n(this,tr).length;a<o;a++)n(this,tr)[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:o,height:l}=D(this,mo,Bu).call(this,this.data.rotation,r);x.parentElement.setAttribute("viewBox",`0 0 ${o} ${l}`),x.setAttribute("transform",a)}}getElementsToTriggerPopup(){return n(this,tr)}addHighlightArea(){this.container.classList.add("highlightArea")}}Do=new WeakMap,tr=new WeakMap,mo=new WeakSet,Bu=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class NE extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=tt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class a6 extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class o6 extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class l6 extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class OE extends bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=tt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var vo,bo,pu;class c6 extends bt{constructor(t){var i;super(t,{isRenderable:!0});A(this,bo);A(this,vo,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",D(this,bo,pu).bind(this)),B(this,vo,i);const{isMac:r}=le.platform;return t.addEventListener("keydown",x=>{x.key==="Enter"&&(r?x.metaKey:x.ctrlKey)&&D(this,bo,pu).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return n(this,vo)}addHighlightArea(){this.container.classList.add("highlightArea")}}vo=new WeakMap,bo=new WeakSet,pu=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var wo,er,sr,yo,rh,HE,ko,Fu;class h6{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:x,structTreeLayer:a}){A(this,rh);A(this,ko);A(this,wo,null);A(this,er,null);A(this,sr,new Map);A(this,yo,null);this.div=e,B(this,wo,t),B(this,er,s),B(this,yo,a||null),this.page=r,this.viewport=x,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return n(this,sr).size>0}async render(e){var x;const{annotations:t}=e,s=this.div;yr(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new e9,annotationStorage:e.annotationStorage||new Ju,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const o=a.annotationType===Pt.POPUP;if(o){const h=i.get(a.id);if(!h)continue;r.elements=h}else{const{width:h,height:d}=ti(a.rect);if(h<=0||d<=0)continue}r.data=a;const l=qA.create(r);if(!l.isRenderable)continue;if(!o&&a.popupRef){const h=i.get(a.popupRef);h?h.push(l):i.set(a.popupRef,[l])}const c=l.render();a.hidden&&(c.style.visibility="hidden"),await D(this,rh,HE).call(this,c,a.id),l._isEditable&&(n(this,sr).set(l.data.id,l),(x=this._annotationEditorUIManager)==null||x.renderAnnotationElement(l))}D(this,ko,Fu).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,yr(t,{rotation:e.rotation}),D(this,ko,Fu).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(n(this,sr).values())}getEditableAnnotation(e){return n(this,sr).get(e)}}wo=new WeakMap,er=new WeakMap,sr=new WeakMap,yo=new WeakMap,rh=new WeakSet,HE=async function(e,t){var x,a;const s=e.firstChild||e,i=s.id=`${qu}${t}`,r=await((x=n(this,yo))==null?void 0:x.getAriaAttributes(i));if(r)for(const[o,l]of r)s.setAttribute(o,l);this.div.append(e),(a=n(this,wo))==null||a.moveElementInDOM(this.div,e,s,!1)},ko=new WeakSet,Fu=function(){if(!n(this,er))return;const e=this.div;for(const[t,s]of n(this,er)){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s)}n(this,er).clear()};const Bl=/\r\n?|\n/g;var e0,me,_o,ir,ve,nh,zE,xh,GE,ah,$E,zn,Nl,Gn,Ol,$n,Hl,oh,UE,Po,Du,lh,XE;const dt=class dt extends pt{constructor(t){super({...t,name:"freeTextEditor"});A(this,nh);A(this,xh);A(this,ah);A(this,zn);A(this,$n);A(this,oh);A(this,lh);A(this,e0,void 0);A(this,me,"");A(this,_o,`${this.id}-editor`);A(this,ir,null);A(this,ve,void 0);B(this,e0,t.color||dt._defaultColor||pt._defaultLineColor),B(this,ve,t.fontSize||dt._defaultFontSize)}static get _keyboardManager(){const t=dt.prototype,s=x=>x.isEmpty(),i=kr.TRANSLATE_SMALL,r=kr.TRANSLATE_BIG;return rt(this,"_keyboardManager",new dl([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){pt.initialize(t,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case xt.FREETEXT_SIZE:dt._defaultFontSize=s;break;case xt.FREETEXT_COLOR:dt._defaultColor=s;break}}updateParams(t,s){switch(t){case xt.FREETEXT_SIZE:D(this,nh,zE).call(this,s);break;case xt.FREETEXT_COLOR:D(this,xh,GE).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[xt.FREETEXT_SIZE,dt._defaultFontSize],[xt.FREETEXT_COLOR,dt._defaultColor||pt._defaultLineColor]]}get propertiesToUpdate(){return[[xt.FREETEXT_SIZE,n(this,ve)],[xt.FREETEXT_COLOR,n(this,e0)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-dt._internalPadding*t,-(dt._internalPadding+n(this,ve))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(tt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),B(this,ir,new AbortController);const t=this._uiManager.combinedSignal(n(this,ir));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",n(this,_o)),this._isDraggable=!0,(t=n(this,ir))==null||t.abort(),B(this,ir,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=n(this,me),s=B(this,me,D(this,ah,$E).call(this).trimEnd());if(t===s)return;const i=r=>{if(B(this,me,r),!r){this.remove();return}D(this,$n,Hl).call(this),this._uiManager.rebuild(this),D(this,zn,Nl).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),D(this,zn,Nl).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){dt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",n(this,_o)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${n(this,ve)}px * var(--scale-factor))`,i.color=n(this,e0),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Kl(this,this.div,["dblclick","keydown"]),this.width){const[r,x]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);const[c,h]=this.pageDimensions,[d,E]=this.pageTranslation;let f,C;switch(this.rotation){case 0:f=t+(a[0]-d)/c,C=s+this.height-(a[1]-E)/h;break;case 90:f=t+(a[0]-d)/c,C=s-(a[1]-E)/h,[o,l]=[l,-o];break;case 180:f=t-this.width+(a[0]-d)/c,C=s-(a[1]-E)/h,[o,l]=[-o,-l];break;case 270:f=t+(a[0]-d-this.height*h)/c,C=s+(a[1]-E-this.width*c)/h,[o,l]=[-l,o];break}this.setAt(f*r,C*x,o,l)}else this.setAt(t*r,s*x,this.width*r,this.height*x);D(this,$n,Hl).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var f,C,p;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=D(f=dt,Po,Du).call(f,s.getData("text")||"").replaceAll(Bl,`
`);if(!r)return;const x=window.getSelection();if(!x.rangeCount)return;this.editorDiv.normalize(),x.deleteFromDocument();const a=x.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),x.collapseToStart();return}const{startContainer:o,startOffset:l}=a,c=[],h=[];if(o.nodeType===Node.TEXT_NODE){const F=o.parentElement;if(h.push(o.nodeValue.slice(l).replaceAll(Bl,"")),F!==this.editorDiv){let m=c;for(const v of this.editorDiv.childNodes){if(v===F){m=h;continue}m.push(D(C=dt,Gn,Ol).call(C,v))}}c.push(o.nodeValue.slice(0,l).replaceAll(Bl,""))}else if(o===this.editorDiv){let F=c,m=0;for(const v of this.editorDiv.childNodes)m++===l&&(F=h),F.push(D(p=dt,Gn,Ol).call(p,v))}B(this,me,`${c.join(`
`)}${r}${h.join(`
`)}`),D(this,$n,Hl).call(this);const d=new Range;let E=c.reduce((F,m)=>F+m.length,0);for(const{firstChild:F}of this.editorDiv.childNodes)if(F.nodeType===Node.TEXT_NODE){const m=F.nodeValue.length;if(E<=m){d.setStart(F,E),d.setEnd(F,E);break}E-=m}x.removeAllRanges(),x.addRange(d)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,i){var a;let r=null;if(t instanceof LE){const{data:{defaultAppearanceData:{fontSize:o,fontColor:l},rect:c,rotation:h,id:d,popupRef:E},textContent:f,textPosition:C,parent:{page:{pageNumber:p}}}=t;if(!f||f.length===0)return null;r=t={annotationType:tt.FREETEXT,color:Array.from(l),fontSize:o,value:f.join(`
`),position:C,pageIndex:p-1,rect:c.slice(0),rotation:h,id:d,deleted:!1,popupRef:E}}const x=await super.deserialize(t,s,i);return B(x,ve,t.fontSize),B(x,e0,X.makeHexColor(...t.color)),B(x,me,D(a=dt,Po,Du).call(a,t.value)),x.annotationElementId=t.id||null,x._initialData=r,x}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=dt._internalPadding*this.parentScale,i=this.getRect(s,s),r=pt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:n(this,e0)),x={annotationType:tt.FREETEXT,color:r,fontSize:n(this,ve),value:D(this,oh,UE).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?x:this.annotationElementId&&!D(this,lh,XE).call(this,x)?null:(x.id=this.annotationElementId,x)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${n(this,ve)}px * var(--scale-factor))`,i.color=n(this,e0),s.replaceChildren();for(const x of n(this,me).split(`
`)){const a=document.createElement("div");a.append(x?document.createTextNode(x):document.createElement("br")),s.append(a)}const r=dt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:n(this,me)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};e0=new WeakMap,me=new WeakMap,_o=new WeakMap,ir=new WeakMap,ve=new WeakMap,nh=new WeakSet,zE=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-n(this,ve))*this.parentScale),B(this,ve,r),D(this,zn,Nl).call(this)},i=n(this,ve);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},xh=new WeakSet,GE=function(t){const s=r=>{B(this,e0,this.editorDiv.style.color=r)},i=n(this,e0);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ah=new WeakSet,$E=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(D(i=dt,Gn,Ol).call(i,r)),s=r);return t.join(`
`)},zn=new WeakSet,Nl=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:x}=this,a=x.style.display,o=x.classList.contains("hidden");x.classList.remove("hidden"),x.style.display="hidden",r.div.append(this.div),i=x.getBoundingClientRect(),x.remove(),x.style.display=a,x.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},Gn=new WeakSet,Ol=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Bl,"")},$n=new WeakSet,Hl=function(){if(this.editorDiv.replaceChildren(),!!n(this,me))for(const t of n(this,me).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},oh=new WeakSet,UE=function(){return n(this,me).replaceAll(" "," ")},Po=new WeakSet,Du=function(t){return t.replaceAll(" "," ")},lh=new WeakSet,XE=function(t){const{value:s,fontSize:i,color:r,pageIndex:x}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((a,o)=>a!==r[o])||t.pageIndex!==x},A(dt,Gn),A(dt,Po),K(dt,"_freeTextDefaultContent",""),K(dt,"_internalPadding",0),K(dt,"_defaultColor",null),K(dt,"_defaultFontSize",10),K(dt,"_type","freetext"),K(dt,"_editorType",tt.FREETEXT);let gu=dt;class H{toSVGPath(){ut("Abstract method `toSVGPath` must be implemented.")}get box(){ut("Abstract getter `box` must be implemented.")}serialize(e,t){ut("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,x){x||(x=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)x[a]=t+e[a]*i,x[a+1]=s+e[a+1]*r;return x}static _rescaleAndSwap(e,t,s,i,r,x){x||(x=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)x[a]=t+e[a+1]*i,x[a+1]=s+e[a]*r;return x}static _translate(e,t,s,i){i||(i=new Float32Array(e.length));for(let r=0,x=e.length;r<x;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,x){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+x)/6,(s+r)/2,(i+x)/2]}}K(H,"PRECISION",1e-4);var be,s0,Un,Xn,b0,it,rr,nr,So,To,jn,Wn,Gs,Ro,ch,hh,xr,Gx,dh,jE,uh,WE,Eh,VE,fh,qE,Ah,YE,Ch,KE;const O0=class O0{constructor({x:e,y:t},s,i,r,x,a=0){A(this,xr);A(this,dh);A(this,uh);A(this,Eh);A(this,fh);A(this,Ah);A(this,Ch);A(this,be,void 0);A(this,s0,[]);A(this,Un,void 0);A(this,Xn,void 0);A(this,b0,[]);A(this,it,new Float32Array(18));A(this,rr,void 0);A(this,nr,void 0);A(this,So,void 0);A(this,To,void 0);A(this,jn,void 0);A(this,Wn,void 0);A(this,Gs,[]);B(this,be,s),B(this,Wn,r*i),B(this,Xn,x),n(this,it).set([NaN,NaN,NaN,NaN,e,t],6),B(this,Un,a),B(this,To,n(O0,Ro)*i),B(this,So,n(O0,hh)*i),B(this,jn,i),n(this,Gs).push(e,t)}isEmpty(){return isNaN(n(this,it)[8])}add({x:e,y:t}){var _;B(this,rr,e),B(this,nr,t);const[s,i,r,x]=n(this,be);let[a,o,l,c]=n(this,it).subarray(8,12);const h=e-l,d=t-c,E=Math.hypot(h,d);if(E<n(this,So))return!1;const f=E-n(this,To),C=f/E,p=C*h,F=C*d;let m=a,v=o;a=l,o=c,l+=p,c+=F,(_=n(this,Gs))==null||_.push(e,t);const g=-F/f,w=p/f,y=g*n(this,Wn),b=w*n(this,Wn);return n(this,it).set(n(this,it).subarray(2,8),0),n(this,it).set([l+y,c+b],4),n(this,it).set(n(this,it).subarray(14,18),12),n(this,it).set([l-y,c-b],16),isNaN(n(this,it)[6])?(n(this,b0).length===0&&(n(this,it).set([a+y,o+b],2),n(this,b0).push(NaN,NaN,NaN,NaN,(a+y-s)/r,(o+b-i)/x),n(this,it).set([a-y,o-b],14),n(this,s0).push(NaN,NaN,NaN,NaN,(a-y-s)/r,(o-b-i)/x)),n(this,it).set([m,v,a,o,l,c],6),!this.isEmpty()):(n(this,it).set([m,v,a,o,l,c],6),Math.abs(Math.atan2(v-o,m-a)-Math.atan2(F,p))<Math.PI/2?([a,o,l,c]=n(this,it).subarray(2,6),n(this,b0).push(NaN,NaN,NaN,NaN,((a+l)/2-s)/r,((o+c)/2-i)/x),[a,o,m,v]=n(this,it).subarray(14,18),n(this,s0).push(NaN,NaN,NaN,NaN,((m+a)/2-s)/r,((v+o)/2-i)/x),!0):([m,v,a,o,l,c]=n(this,it).subarray(0,6),n(this,b0).push(((m+5*a)/6-s)/r,((v+5*o)/6-i)/x,((5*a+l)/6-s)/r,((5*o+c)/6-i)/x,((a+l)/2-s)/r,((o+c)/2-i)/x),[l,c,a,o,m,v]=n(this,it).subarray(12,18),n(this,s0).push(((m+5*a)/6-s)/r,((v+5*o)/6-i)/x,((5*a+l)/6-s)/r,((5*o+c)/6-i)/x,((a+l)/2-s)/r,((o+c)/2-i)/x),!0))}toSVGPath(){if(this.isEmpty())return"";const e=n(this,b0),t=n(this,s0);if(isNaN(n(this,it)[6])&&!this.isEmpty())return D(this,dh,jE).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);D(this,Eh,VE).call(this,s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return D(this,uh,WE).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,i,r,x){return new QE(e,t,s,i,r,x)}getOutlines(){var h;const e=n(this,b0),t=n(this,s0),s=n(this,it),[i,r,x,a]=n(this,be),o=new Float32Array((((h=n(this,Gs))==null?void 0:h.length)??0)+2);for(let d=0,E=o.length-2;d<E;d+=2)o[d]=(n(this,Gs)[d]-i)/x,o[d+1]=(n(this,Gs)[d+1]-r)/a;if(o[o.length-2]=(n(this,rr)-i)/x,o[o.length-1]=(n(this,nr)-r)/a,isNaN(s[6])&&!this.isEmpty())return D(this,fh,qE).call(this,o);const l=new Float32Array(n(this,b0).length+24+n(this,s0).length);let c=e.length;for(let d=0;d<c;d+=2){if(isNaN(e[d])){l[d]=l[d+1]=NaN;continue}l[d]=e[d],l[d+1]=e[d+1]}c=D(this,Ch,KE).call(this,l,c);for(let d=t.length-6;d>=6;d-=6)for(let E=0;E<6;E+=2){if(isNaN(t[d+E])){l[c]=l[c+1]=NaN,c+=2;continue}l[c]=t[d+E],l[c+1]=t[d+E+1],c+=2}return D(this,Ah,YE).call(this,l,c),this.newFreeDrawOutline(l,o,n(this,be),n(this,jn),n(this,Un),n(this,Xn))}};be=new WeakMap,s0=new WeakMap,Un=new WeakMap,Xn=new WeakMap,b0=new WeakMap,it=new WeakMap,rr=new WeakMap,nr=new WeakMap,So=new WeakMap,To=new WeakMap,jn=new WeakMap,Wn=new WeakMap,Gs=new WeakMap,Ro=new WeakMap,ch=new WeakMap,hh=new WeakMap,xr=new WeakSet,Gx=function(){const e=n(this,it).subarray(4,6),t=n(this,it).subarray(16,18),[s,i,r,x]=n(this,be);return[(n(this,rr)+(e[0]-t[0])/2-s)/r,(n(this,nr)+(e[1]-t[1])/2-i)/x,(n(this,rr)+(t[0]-e[0])/2-s)/r,(n(this,nr)+(t[1]-e[1])/2-i)/x]},dh=new WeakSet,jE=function(){const[e,t,s,i]=n(this,be),[r,x,a,o]=D(this,xr,Gx).call(this);return`M${(n(this,it)[2]-e)/s} ${(n(this,it)[3]-t)/i} L${(n(this,it)[4]-e)/s} ${(n(this,it)[5]-t)/i} L${r} ${x} L${a} ${o} L${(n(this,it)[16]-e)/s} ${(n(this,it)[17]-t)/i} L${(n(this,it)[14]-e)/s} ${(n(this,it)[15]-t)/i} Z`},uh=new WeakSet,WE=function(e){const t=n(this,s0);e.push(`L${t[4]} ${t[5]} Z`)},Eh=new WeakSet,VE=function(e){const[t,s,i,r]=n(this,be),x=n(this,it).subarray(4,6),a=n(this,it).subarray(16,18),[o,l,c,h]=D(this,xr,Gx).call(this);e.push(`L${(x[0]-t)/i} ${(x[1]-s)/r} L${o} ${l} L${c} ${h} L${(a[0]-t)/i} ${(a[1]-s)/r}`)},fh=new WeakSet,qE=function(e){const t=n(this,it),[s,i,r,x]=n(this,be),[a,o,l,c]=D(this,xr,Gx).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/x,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/x,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/x,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/x],0),this.newFreeDrawOutline(h,e,n(this,be),n(this,jn),n(this,Un),n(this,Xn))},Ah=new WeakSet,YE=function(e,t){const s=n(this,s0);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},Ch=new WeakSet,KE=function(e,t){const s=n(this,it).subarray(4,6),i=n(this,it).subarray(16,18),[r,x,a,o]=n(this,be),[l,c,h,d]=D(this,xr,Gx).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-x)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-x)/o],t),t+=24},A(O0,Ro,8),A(O0,ch,2),A(O0,hh,n(O0,Ro)+n(O0,ch));let Jl=O0;var Vn,ar,rs,Mo,we,Lo,vt,Bh,ZE;class QE extends H{constructor(t,s,i,r,x,a){super();A(this,Bh);A(this,Vn,void 0);A(this,ar,new Float32Array(4));A(this,rs,void 0);A(this,Mo,void 0);A(this,we,void 0);A(this,Lo,void 0);A(this,vt,void 0);B(this,vt,t),B(this,we,s),B(this,Vn,i),B(this,Lo,r),B(this,rs,x),B(this,Mo,a),this.lastPoint=[NaN,NaN],D(this,Bh,ZE).call(this,a);const[o,l,c,h]=n(this,ar);for(let d=0,E=t.length;d<E;d+=2)t[d]=(t[d]-o)/c,t[d+1]=(t[d+1]-l)/h;for(let d=0,E=s.length;d<E;d+=2)s[d]=(s[d]-o)/c,s[d+1]=(s[d+1]-l)/h}toSVGPath(){const t=[`M${n(this,vt)[4]} ${n(this,vt)[5]}`];for(let s=6,i=n(this,vt).length;s<i;s+=6){if(isNaN(n(this,vt)[s])){t.push(`L${n(this,vt)[s+4]} ${n(this,vt)[s+5]}`);continue}t.push(`C${n(this,vt)[s]} ${n(this,vt)[s+1]} ${n(this,vt)[s+2]} ${n(this,vt)[s+3]} ${n(this,vt)[s+4]} ${n(this,vt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],x){const a=i-t,o=r-s;let l,c;switch(x){case 0:l=H._rescale(n(this,vt),t,r,a,-o),c=H._rescale(n(this,we),t,r,a,-o);break;case 90:l=H._rescaleAndSwap(n(this,vt),t,s,a,o),c=H._rescaleAndSwap(n(this,we),t,s,a,o);break;case 180:l=H._rescale(n(this,vt),i,s,-a,o),c=H._rescale(n(this,we),i,s,-a,o);break;case 270:l=H._rescaleAndSwap(n(this,vt),i,r,-a,-o),c=H._rescaleAndSwap(n(this,we),i,r,-a,-o);break}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return n(this,ar)}newOutliner(t,s,i,r,x,a=0){return new Jl(t,s,i,r,x,a)}getNewOutline(t,s){const[i,r,x,a]=n(this,ar),[o,l,c,h]=n(this,Vn),d=x*c,E=a*h,f=i*c+o,C=r*h+l,p=this.newOutliner({x:n(this,we)[0]*d+f,y:n(this,we)[1]*E+C},n(this,Vn),n(this,Lo),t,n(this,Mo),s??n(this,rs));for(let F=2;F<n(this,we).length;F+=2)p.add({x:n(this,we)[F]*d+f,y:n(this,we)[F+1]*E+C});return p.getOutlines()}}Vn=new WeakMap,ar=new WeakMap,rs=new WeakMap,Mo=new WeakMap,we=new WeakMap,Lo=new WeakMap,vt=new WeakMap,Bh=new WeakSet,ZE=function(t){const s=n(this,vt);let i=s[4],r=s[5],x=i,a=r,o=i,l=r,c=i,h=r;const d=t?Math.max:Math.min;for(let f=6,C=s.length;f<C;f+=6){if(isNaN(s[f]))x=Math.min(x,s[f+4]),a=Math.min(a,s[f+5]),o=Math.max(o,s[f+4]),l=Math.max(l,s[f+5]),h<s[f+5]?(c=s[f+4],h=s[f+5]):h===s[f+5]&&(c=d(c,s[f+4]));else{const p=X.bezierBoundingBox(i,r,...s.slice(f,f+6));x=Math.min(x,p[0]),a=Math.min(a,p[1]),o=Math.max(o,p[2]),l=Math.max(l,p[3]),h<p[3]?(c=p[2],h=p[3]):h===p[3]&&(c=d(c,p[2]))}i=s[f+4],r=s[f+5]}const E=n(this,ar);E[0]=x-n(this,rs),E[1]=a-n(this,rs),E[2]=o-x+2*n(this,rs),E[3]=l-a+2*n(this,rs),this.lastPoint=[c,h]};var Io,No,$s,i0,ph,JE,qn,zl,Fh,tf,gh,ef,Oo,vu;class mu{constructor(e,t=0,s=0,i=!0){A(this,ph);A(this,qn);A(this,Fh);A(this,gh);A(this,Oo);A(this,Io,void 0);A(this,No,void 0);A(this,$s,[]);A(this,i0,[]);let r=1/0,x=-1/0,a=1/0,o=-1/0;const c=10**-4;for(const{x:F,y:m,width:v,height:g}of e){const w=Math.floor((F-t)/c)*c,y=Math.ceil((F+v+t)/c)*c,b=Math.floor((m-t)/c)*c,k=Math.ceil((m+g+t)/c)*c,_=[w,b,k,!0],S=[y,b,k,!1];n(this,$s).push(_,S),r=Math.min(r,w),x=Math.max(x,y),a=Math.min(a,b),o=Math.max(o,k)}const h=x-r+2*s,d=o-a+2*s,E=r-s,f=a-s,C=n(this,$s).at(i?-1:-2),p=[C[0],C[2]];for(const F of n(this,$s)){const[m,v,g]=F;F[0]=(m-E)/h,F[1]=(v-f)/d,F[2]=(g-f)/d}B(this,Io,new Float32Array([E,f,h,d])),B(this,No,p)}getOutlines(){n(this,$s).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of n(this,$s))t[3]?(e.push(...D(this,Oo,vu).call(this,t)),D(this,Fh,tf).call(this,t)):(D(this,gh,ef).call(this,t),e.push(...D(this,Oo,vu).call(this,t)));return D(this,ph,JE).call(this,e)}}Io=new WeakMap,No=new WeakMap,$s=new WeakMap,i0=new WeakMap,ph=new WeakSet,JE=function(e){const t=[],s=new Set;for(const x of e){const[a,o,l]=x;t.push([a,o,x],[a,l,x])}t.sort((x,a)=>x[1]-a[1]||x[0]-a[0]);for(let x=0,a=t.length;x<a;x+=2){const o=t[x][2],l=t[x+1][2];o.push(l),l.push(o),s.add(o),s.add(l)}const i=[];let r;for(;s.size>0;){const x=s.values().next().value;let[a,o,l,c,h]=x;s.delete(x);let d=a,E=o;for(r=[a,l],i.push(r);;){let f;if(s.has(c))f=c;else if(s.has(h))f=h;else break;s.delete(f),[a,o,l,c,h]=f,d!==a&&(r.push(d,E,a,E===o?o:l),d=a),E=E===o?l:o}r.push(d,E)}return new d6(i,n(this,Io),n(this,No))},qn=new WeakSet,zl=function(e){const t=n(this,i0);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,x=t[r][0];if(x===e)return r;x<e?s=r+1:i=r-1}return i+1},Fh=new WeakSet,tf=function([,e,t]){const s=D(this,qn,zl).call(this,e);n(this,i0).splice(s,0,[e,t])},gh=new WeakSet,ef=function([,e,t]){const s=D(this,qn,zl).call(this,e);for(let i=s;i<n(this,i0).length;i++){const[r,x]=n(this,i0)[i];if(r!==e)break;if(r===e&&x===t){n(this,i0).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,x]=n(this,i0)[i];if(r!==e)break;if(r===e&&x===t){n(this,i0).splice(i,1);return}}},Oo=new WeakSet,vu=function(e){const[t,s,i]=e,r=[[t,s,i]],x=D(this,qn,zl).call(this,i);for(let a=0;a<x;a++){const[o,l]=n(this,i0)[a];for(let c=0,h=r.length;c<h;c++){const[,d,E]=r[c];if(!(l<=d||E<=o)){if(d>=o){if(E>l)r[c][1]=l;else{if(h===1)return[];r.splice(c,1),c--,h--}continue}r[c][2]=o,E>l&&r.push([t,l,E])}}}return r};var Ho,Yn;class d6 extends H{constructor(t,s,i){super();A(this,Ho,void 0);A(this,Yn,void 0);B(this,Yn,t),B(this,Ho,s),this.lastPoint=i}toSVGPath(){const t=[];for(const s of n(this,Yn)){let[i,r]=s;t.push(`M${i} ${r}`);for(let x=2;x<s.length;x+=2){const a=s[x],o=s[x+1];a===i?(t.push(`V${o}`),r=o):o===r&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],x){const a=[],o=i-t,l=r-s;for(const c of n(this,Yn)){const h=new Array(c.length);for(let d=0;d<c.length;d+=2)h[d]=t+c[d]*o,h[d+1]=r-c[d+1]*l;a.push(h)}return a}get box(){return n(this,Ho)}get classNamesForOutlining(){return["highlightOutline"]}}Ho=new WeakMap,Yn=new WeakMap;class bu extends Jl{newFreeDrawOutline(e,t,s,i,r,x){return new u6(e,t,s,i,r,x)}}class u6 extends QE{newOutliner(e,t,s,i,r,x=0){return new bu(e,t,s,i,r,x)}}var r0,or,Kn,Tt,zo,Qn,Go,$o,Us,n0,Zn,Uo,Xo,wu,jo,yu,Wo,ku,ns,xi,Dh,sf,w0,As;const ue=class ue{constructor({editor:e=null,uiManager:t=null}){A(this,Xo);A(this,jo);A(this,Wo);A(this,ns);A(this,Dh);A(this,w0);A(this,r0,null);A(this,or,null);A(this,Kn,void 0);A(this,Tt,null);A(this,zo,!1);A(this,Qn,!1);A(this,Go,null);A(this,$o,void 0);A(this,Us,null);A(this,n0,null);A(this,Zn,void 0);var s;e?(B(this,Qn,!1),B(this,Zn,xt.HIGHLIGHT_COLOR),B(this,Go,e)):(B(this,Qn,!0),B(this,Zn,xt.HIGHLIGHT_DEFAULT_COLOR)),B(this,n0,(e==null?void 0:e._uiManager)||t),B(this,$o,n(this,n0)._eventBus),B(this,Kn,(e==null?void 0:e.color)||((s=n(this,n0))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),n(ue,Uo)||B(ue,Uo,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return rt(this,"_keyboardManager",new dl([[["Escape","mac+Escape"],ue.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ue.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ue.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ue.prototype._moveToPrevious],[["Home","mac+Home"],ue.prototype._moveToBeginning],[["End","mac+End"],ue.prototype._moveToEnd]]))}renderButton(){const e=B(this,r0,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=n(this,n0)._signal;e.addEventListener("click",D(this,ns,xi).bind(this),{signal:t}),e.addEventListener("keydown",D(this,Wo,ku).bind(this),{signal:t});const s=B(this,or,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=n(this,Kn),e.append(s),e}renderMainDropdown(){const e=B(this,Tt,D(this,Xo,wu).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===n(this,r0)){D(this,ns,xi).call(this,e);return}const t=e.target.getAttribute("data-color");t&&D(this,jo,yu).call(this,t,e)}_moveToNext(e){var t,s;if(!n(this,w0,As)){D(this,ns,xi).call(this,e);return}if(e.target===n(this,r0)){(t=n(this,Tt).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=n(this,Tt))==null?void 0:t.firstChild)||e.target===n(this,r0)){n(this,w0,As)&&this._hideDropdownFromKeyboard();return}n(this,w0,As)||D(this,ns,xi).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!n(this,w0,As)){D(this,ns,xi).call(this,e);return}(t=n(this,Tt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!n(this,w0,As)){D(this,ns,xi).call(this,e);return}(t=n(this,Tt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=n(this,Tt))==null||e.classList.add("hidden"),(t=n(this,Us))==null||t.abort(),B(this,Us,null)}_hideDropdownFromKeyboard(){var e;if(!n(this,Qn)){if(!n(this,w0,As)){(e=n(this,Go))==null||e.unselect();return}this.hideDropdown(),n(this,r0).focus({preventScroll:!0,focusVisible:n(this,zo)})}}updateColor(e){if(n(this,or)&&(n(this,or).style.backgroundColor=e),!n(this,Tt))return;const t=n(this,n0).highlightColors.values();for(const s of n(this,Tt).children)s.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=n(this,r0))==null||e.remove(),B(this,r0,null),B(this,or,null),(t=n(this,Tt))==null||t.remove(),B(this,Tt,null)}};r0=new WeakMap,or=new WeakMap,Kn=new WeakMap,Tt=new WeakMap,zo=new WeakMap,Qn=new WeakMap,Go=new WeakMap,$o=new WeakMap,Us=new WeakMap,n0=new WeakMap,Zn=new WeakMap,Uo=new WeakMap,Xo=new WeakSet,wu=function(){const e=document.createElement("div"),t=n(this,n0)._signal;e.addEventListener("contextmenu",l0,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of n(this,n0).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",n(ue,Uo)[s]);const x=document.createElement("span");r.append(x),x.className="swatch",x.style.backgroundColor=i,r.setAttribute("aria-selected",i===n(this,Kn)),r.addEventListener("click",D(this,jo,yu).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",D(this,Wo,ku).bind(this),{signal:t}),e},jo=new WeakSet,yu=function(e,t){t.stopPropagation(),n(this,$o).dispatch("switchannotationeditorparams",{source:this,type:n(this,Zn),value:e})},Wo=new WeakSet,ku=function(e){ue._keyboardManager.exec(this,e)},ns=new WeakSet,xi=function(e){if(n(this,w0,As)){this.hideDropdown();return}if(B(this,zo,e.detail===0),n(this,Us)||(B(this,Us,new AbortController),window.addEventListener("pointerdown",D(this,Dh,sf).bind(this),{signal:n(this,n0).combinedSignal(n(this,Us))})),n(this,Tt)){n(this,Tt).classList.remove("hidden");return}const t=B(this,Tt,D(this,Xo,wu).call(this));n(this,r0).append(t)},Dh=new WeakSet,sf=function(e){var t;(t=n(this,Tt))!=null&&t.contains(e.target)||this.hideDropdown()},w0=new WeakSet,As=function(){return n(this,Tt)&&!n(this,Tt).classList.contains("hidden")},A(ue,Uo,null);let tc=ue;var Jn,Vo,xs,lr,tx,Ae,qo,Yo,cr,He,ye,Ut,ex,as,Jt,sx,ze,Ko,Qo,_u,ix,Gl,mh,rf,vh,nf,bh,xf,Zo,Pu,os,ai,Xs,Or,wh,af,rx,$l,hr,$x,yh,of,kh,lf,_h,cf,Ph,hf,Sh,df;const at=class at extends pt{constructor(t){super({...t,name:"highlightEditor"});A(this,Qo);A(this,ix);A(this,mh);A(this,vh);A(this,bh);A(this,Zo);A(this,os);A(this,wh);A(this,rx);A(this,hr);A(this,yh);A(this,kh);A(this,Sh);A(this,Jn,null);A(this,Vo,0);A(this,xs,void 0);A(this,lr,null);A(this,tx,null);A(this,Ae,null);A(this,qo,null);A(this,Yo,0);A(this,cr,null);A(this,He,null);A(this,ye,null);A(this,Ut,!1);A(this,ex,null);A(this,as,void 0);A(this,Jt,null);A(this,sx,"");A(this,ze,void 0);A(this,Ko,"");this.color=t.color||at._defaultColor,B(this,ze,t.thickness||at._defaultThickness),B(this,as,t.opacity||at._defaultOpacity),B(this,xs,t.boxes||null),B(this,Ko,t.methodOfCreation||""),B(this,sx,t.text||""),this._isDraggable=!1,t.highlightId>-1?(B(this,Ut,!0),D(this,ix,Gl).call(this,t),D(this,os,ai).call(this)):n(this,xs)&&(B(this,Jn,t.anchorNode),B(this,Vo,t.anchorOffset),B(this,qo,t.focusNode),B(this,Yo,t.focusOffset),D(this,Qo,_u).call(this),D(this,os,ai).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=at.prototype;return rt(this,"_keyboardManager",new dl([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:n(this,Ut)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:n(this,ze),methodOfCreation:n(this,Ko)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;pt.initialize(t,s),at._defaultColor||(at._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case xt.HIGHLIGHT_DEFAULT_COLOR:at._defaultColor=s;break;case xt.HIGHLIGHT_THICKNESS:at._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return n(this,ex)}updateParams(t,s){switch(t){case xt.HIGHLIGHT_COLOR:D(this,mh,rf).call(this,s);break;case xt.HIGHLIGHT_THICKNESS:D(this,vh,nf).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[xt.HIGHLIGHT_DEFAULT_COLOR,at._defaultColor],[xt.HIGHLIGHT_THICKNESS,at._defaultThickness]]}get propertiesToUpdate(){return[[xt.HIGHLIGHT_COLOR,this.color||at._defaultColor],[xt.HIGHLIGHT_THICKNESS,n(this,ze)||at._defaultThickness],[xt.HIGHLIGHT_FREE,n(this,Ut)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(B(this,tx,new tc({editor:this})),t.addColorPicker(n(this,tx))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(D(this,hr,$x).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,D(this,hr,$x).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){D(this,Zo,Pu).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,os,ai).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?D(this,Zo,Pu).call(this):t&&(D(this,os,ai).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,x,a;const{drawLayer:s}=this.parent;let i;n(this,Ut)?(t=(t-this.rotation+360)%360,i=D(r=at,Xs,Or).call(r,n(this,He).box,t)):i=D(x=at,Xs,Or).call(x,[this.x,this.y,this.width,this.height],t),s.updateProperties(n(this,ye),{bbox:i,root:{"data-main-rotation":t}}),s.updateProperties(n(this,Jt),{bbox:D(a=at,Xs,Or).call(a,n(this,Ae).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();n(this,sx)&&(t.setAttribute("aria-label",n(this,sx)),t.setAttribute("role","mark")),n(this,Ut)?t.classList.add("free"):this.div.addEventListener("keydown",D(this,wh,af).bind(this),{signal:this._uiManager._signal});const s=B(this,cr,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=n(this,lr);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Kl(this,n(this,cr),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(n(this,Jt),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(n(this,Jt),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:D(this,rx,$l).call(this,!0);break;case 1:case 3:D(this,rx,$l).call(this,!1);break}}select(){var t;super.select(),n(this,Jt)&&((t=this.parent)==null||t.drawLayer.updateProperties(n(this,Jt),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),n(this,Jt)&&((t=this.parent)==null||t.drawLayer.updateProperties(n(this,Jt),{rootClass:{selected:!1}}),n(this,Ut)||D(this,rx,$l).call(this,!1))}get _mustFixPosition(){return!n(this,Ut)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(n(this,ye),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(n(this,Jt),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:i,x:r,y:x}){const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),h=new AbortController,d=t.combinedSignal(h),E=f=>{h.abort(),D(this,Ph,hf).call(this,t,f)};window.addEventListener("blur",E,{signal:d}),window.addEventListener("pointerup",E,{signal:d}),window.addEventListener("pointerdown",Te,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",l0,{signal:d}),i.addEventListener("pointermove",D(this,_h,cf).bind(this,t),{signal:d}),this._freeHighlight=new bu({x:r,y:x},[a,o,l,c],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,i){var C,p,F,m;let r=null;if(t instanceof NE){const{data:{quadPoints:v,rect:g,rotation:w,id:y,color:b,opacity:k,popupRef:_},parent:{page:{pageNumber:S}}}=t;r=t={annotationType:tt.HIGHLIGHT,color:Array.from(b),opacity:k,quadPoints:v,boxes:null,pageIndex:S-1,rect:g.slice(0),rotation:w,id:y,deleted:!1,popupRef:_}}else if(t instanceof s9){const{data:{inkLists:v,rect:g,rotation:w,id:y,color:b,borderStyle:{rawWidth:k},popupRef:_},parent:{page:{pageNumber:S}}}=t;r=t={annotationType:tt.HIGHLIGHT,color:Array.from(b),thickness:k,inkLists:v,boxes:null,pageIndex:S-1,rect:g.slice(0),rotation:w,id:y,deleted:!1,popupRef:_}}const{color:x,quadPoints:a,inkLists:o,opacity:l}=t,c=await super.deserialize(t,s,i);c.color=X.makeHexColor(...x),B(c,as,l||1),o&&B(c,ze,t.thickness),c.annotationElementId=t.id||null,c._initialData=r;const[h,d]=c.pageDimensions,[E,f]=c.pageTranslation;if(a){const v=B(c,xs,[]);for(let g=0;g<a.length;g+=8)v.push({x:(a[g]-E)/h,y:1-(a[g+1]-f)/d,width:(a[g+2]-a[g])/h,height:(a[g+1]-a[g+5])/d});D(C=c,Qo,_u).call(C),D(p=c,os,ai).call(p),c.rotate(c.rotation)}else if(o){B(c,Ut,!0);const v=o[0],g={x:v[0]-E,y:d-(v[1]-f)},w=new bu(g,[0,0,h,d],1,n(c,ze)/2,!0,.001);for(let k=0,_=v.length;k<_;k+=2)g.x=v[k]-E,g.y=d-(v[k+1]-f),w.add(g);const{id:y,clipPathId:b}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:w.toSVGPath()}},!0,!0);D(F=c,ix,Gl).call(F,{highlightOutlines:w.getOutlines(),highlightId:y,clipPathId:b}),D(m=c,os,ai).call(m)}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=pt._colorManager.convert(this.color),r={annotationType:tt.HIGHLIGHT,color:i,opacity:n(this,as),thickness:n(this,ze),quadPoints:D(this,yh,of).call(this),outlines:D(this,kh,lf).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:D(this,hr,$x).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!D(this,Sh,df).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Jn=new WeakMap,Vo=new WeakMap,xs=new WeakMap,lr=new WeakMap,tx=new WeakMap,Ae=new WeakMap,qo=new WeakMap,Yo=new WeakMap,cr=new WeakMap,He=new WeakMap,ye=new WeakMap,Ut=new WeakMap,ex=new WeakMap,as=new WeakMap,Jt=new WeakMap,sx=new WeakMap,ze=new WeakMap,Ko=new WeakMap,Qo=new WeakSet,_u=function(){const t=new mu(n(this,xs),.001);B(this,He,t.getOutlines()),[this.x,this.y,this.width,this.height]=n(this,He).box;const s=new mu(n(this,xs),.0025,.001,this._uiManager.direction==="ltr");B(this,Ae,s.getOutlines());const{lastPoint:i}=n(this,Ae);B(this,ex,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},ix=new WeakSet,Gl=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var h,d;B(this,He,t);const r=1.5;if(B(this,Ae,t.getNewOutline(n(this,ze)/2+r,.0025)),s>=0)B(this,ye,s),B(this,lr,i),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),B(this,Jt,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:n(this,Ae).box,path:{d:n(this,Ae).toSVGPath()}},!0));else if(this.parent){const E=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(n(this,ye),{bbox:D(h=at,Xs,Or).call(h,n(this,He).box,(E-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(n(this,Jt),{bbox:D(d=at,Xs,Or).call(d,n(this,Ae).box,E),path:{d:n(this,Ae).toSVGPath()}})}const[x,a,o,l]=t.box;switch(this.rotation){case 0:this.x=x,this.y=a,this.width=o,this.height=l;break;case 90:{const[E,f]=this.parentDimensions;this.x=a,this.y=1-x,this.width=o*f/E,this.height=l*E/f;break}case 180:this.x=1-x,this.y=1-a,this.width=o,this.height=l;break;case 270:{const[E,f]=this.parentDimensions;this.x=1-a,this.y=x,this.width=o*f/E,this.height=l*E/f;break}}const{lastPoint:c}=n(this,Ae);B(this,ex,[(c[0]-x)/o,(c[1]-a)/l])},mh=new WeakSet,rf=function(t){const s=(x,a)=>{var o,l;this.color=x,B(this,as,a),(o=this.parent)==null||o.drawLayer.updateProperties(n(this,ye),{root:{fill:x,"fill-opacity":a}}),(l=n(this,tx))==null||l.updateColor(x)},i=this.color,r=n(this,as);this.addCommands({cmd:s.bind(this,t,at._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},vh=new WeakSet,nf=function(t){const s=n(this,ze),i=r=>{B(this,ze,r),D(this,bh,xf).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},bh=new WeakSet,xf=function(t){if(!n(this,Ut))return;D(this,ix,Gl).call(this,{highlightOutlines:n(this,He).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},Zo=new WeakSet,Pu=function(){n(this,ye)===null||!this.parent||(this.parent.drawLayer.remove(n(this,ye)),B(this,ye,null),this.parent.drawLayer.remove(n(this,Jt)),B(this,Jt,null))},os=new WeakSet,ai=function(t=this.parent){n(this,ye)===null&&({id:ie(this,ye)._,clipPathId:ie(this,lr)._}=t.drawLayer.draw({bbox:n(this,He).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":n(this,as)},rootClass:{highlight:!0,free:n(this,Ut)},path:{d:n(this,He).toSVGPath()}},!1,!0),B(this,Jt,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:n(this,Ut)},bbox:n(this,Ae).box,path:{d:n(this,Ae).toSVGPath()}},n(this,Ut))),n(this,cr)&&(n(this,cr).style.clipPath=n(this,lr)))},Xs=new WeakSet,Or=function([t,s,i,r],x){switch(x){case 90:return[1-s-r,t,r,i];case 180:return[1-t-i,1-s-r,i,r];case 270:return[s,1-t-i,r,i]}return[t,s,i,r]},wh=new WeakSet,af=function(t){at._keyboardManager.exec(this,t)},rx=new WeakSet,$l=function(t){if(!n(this,Jn))return;const s=window.getSelection();t?s.setPosition(n(this,Jn),n(this,Vo)):s.setPosition(n(this,qo),n(this,Yo))},hr=new WeakSet,$x=function(){return n(this,Ut)?this.rotation:0},yh=new WeakSet,of=function(){if(n(this,Ut))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,x=n(this,xs),a=new Float32Array(x.length*8);let o=0;for(const{x:l,y:c,width:h,height:d}of x){const E=l*t+i,f=(1-c)*s+r;a[o]=a[o+4]=E,a[o+1]=a[o+3]=f,a[o+2]=a[o+6]=E+h*t,a[o+5]=a[o+7]=f-d*s,o+=8}return a},kh=new WeakSet,lf=function(t){return n(this,He).serialize(t,D(this,hr,$x).call(this))},_h=new WeakSet,cf=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Ph=new WeakSet,hf=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Sh=new WeakSet,df=function(t){const{color:s}=this._initialData;return t.color.some((i,r)=>i!==s[r])},A(at,Xs),A(at,_h),A(at,Ph),K(at,"_defaultColor",null),K(at,"_defaultOpacity",1),K(at,"_defaultThickness",12),K(at,"_type","highlight"),K(at,"_editorType",tt.HIGHLIGHT),K(at,"_freeHighlightId",-1),K(at,"_freeHighlight",null),K(at,"_freeHighlightClipId","");let ec=at;var dr;class E6{constructor(){A(this,dr,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))this.updateProperty(t,s)}updateSVGProperty(e,t){n(this,dr)[e]=t}toSVGProperties(){const e=n(this,dr);return B(this,dr,Object.create(null)),{root:e}}reset(){B(this,dr,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){ut("Not implemented")}}dr=new WeakMap;var ke,nx,Nt,ur,Er,js,Ws,Vs,fr,Jo,Tu,tl,Ru,el,Mu,Ar,Ux,Th,uf,xx,Ul,Cr,Xx,qs,Hr;const z=class z extends pt{constructor(t){super(t);A(this,Jo);A(this,tl);A(this,el);A(this,Ar);A(this,Th);A(this,xx);A(this,Cr);A(this,qs);A(this,ke,null);A(this,nx,void 0);K(this,"_drawId",null);B(this,nx,t.mustBeCommitted||!1),t.drawOutlines&&(D(this,Jo,Tu).call(this,t),D(this,Ar,Ux).call(this))}static _mergeSVGProperties(t,s){const i=new Set(Object.keys(t));for(const[r,x]of Object.entries(s))i.has(r)?Object.assign(t[r],x):t[r]=x;return t}static getDefaultDrawingOptions(t){ut("Not implemented")}static get typesMap(){ut("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(n(z,Nt).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,s[r]]);return t}_updateProperty(t,s,i){const r=this._drawingOptions,x=r[s],a=o=>{var c;r.updateProperty(s,o);const l=n(this,ke).updateProperty(s,o);l&&D(this,Cr,Xx).call(this,l),(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,x),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,z._mergeSVGProperties(n(this,ke).getPathResizingSVGProperties(D(this,xx,Ul).call(this)),{bbox:D(this,qs,Hr).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,z._mergeSVGProperties(n(this,ke).getPathResizedSVGProperties(D(this,xx,Ul).call(this)),{bbox:D(this,qs,Hr).call(this)}))}_onTranslating(t,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:D(this,qs,Hr).call(this,t,s)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,z._mergeSVGProperties(n(this,ke).getPathTranslatedSVGProperties(D(this,xx,Ul).call(this),this.parentDimensions),{bbox:D(this,qs,Hr).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,n(this,nx)&&(B(this,nx,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){D(this,el,Mu).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,Ar,Ux).call(this),D(this,Cr,Xx).call(this,n(this,ke).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),D(this,el,Mu).call(this)):t&&(this._uiManager.addShouldRescale(this),D(this,Ar,Ux).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,z._mergeSVGProperties({bbox:D(this,qs,Hr).call(this)},n(this,ke).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&D(this,Cr,Xx).call(this,n(this,ke).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const s=document.createElement("div");t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,s,i,r,x){ut("Not implemented")}static startDrawing(t,s,i,r){var p;const{target:x,offsetX:a,offsetY:o,pointerId:l,pointerType:c}=r;if(n(z,Ws)&&n(z,Ws)!==c)return;const{viewport:{rotation:h}}=t,{width:d,height:E}=x.getBoundingClientRect(),f=B(z,ur,new AbortController),C=t.combinedSignal(f);if(n(z,js)||B(z,js,l),n(z,Ws)??B(z,Ws,c),window.addEventListener("pointerup",F=>{var m;n(z,js)===F.pointerId?this._endDraw(F):(m=n(z,Vs))==null||m.delete(F.pointerId)},{signal:C}),window.addEventListener("pointercancel",F=>{var m;n(z,js)===F.pointerId?this._currentParent.endDrawingSession():(m=n(z,Vs))==null||m.delete(F.pointerId)},{signal:C}),window.addEventListener("pointerdown",F=>{n(z,Ws)===F.pointerType&&((n(z,Vs)||B(z,Vs,new Set)).add(F.pointerId),n(z,Nt).isCancellable()&&(n(z,Nt).removeLastElement(),n(z,Nt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",l0,{signal:C}),x.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),x.addEventListener("touchmove",F=>{F.timeStamp===n(z,fr)&&Te(F)},{signal:C}),t.toggleDrawing(),(p=s._editorUndoBar)==null||p.hide(),n(z,Nt)){t.drawLayer.updateProperties(this._currentDrawId,n(z,Nt).startNew(a,o,d,E,h));return}s.updateUIForDefaultProperties(this),B(z,Nt,this.createDrawerInstance(a,o,d,E,h)),B(z,Er,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(n(z,Er).toSVGProperties(),n(z,Nt).defaultSVGProperties),!0,!1)}static _drawMove(t){var x;if(B(z,fr,-1),!n(z,Nt))return;const{offsetX:s,offsetY:i,pointerId:r}=t;if(n(z,js)===r){if(((x=n(z,Vs))==null?void 0:x.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,n(z,Nt).add(s,i)),B(z,fr,t.timeStamp),Te(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,B(z,Nt,null),B(z,Er,null),B(z,Ws,null),B(z,fr,NaN)),n(z,ur)&&(n(z,ur).abort(),B(z,ur,null),B(z,js,NaN),B(z,Vs,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),t&&s.drawLayer.updateProperties(this._currentDrawId,n(z,Nt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=n(z,Nt),r=this._currentDrawId,x=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(x))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:xt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(xt.DRAW_STEP),!n(z,Nt).isEmpty()){const{pageDimensions:[i,r],scale:x}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:n(z,Nt).getOutlines(i*x,r*x,x,this._INNER_MARGIN),drawingOptions:n(z,Er),mustBeCommitted:!t});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,i,r,x,a){ut("Not implemented")}static async deserialize(t,s,i){var h,d;const{rawDims:{pageWidth:r,pageHeight:x,pageX:a,pageY:o}}=s.viewport,l=this.deserializeDraw(a,o,r,x,this._INNER_MARGIN,t),c=await super.deserialize(t,s,i);return c.createDrawingOptions(t),D(h=c,Jo,Tu).call(h,{drawOutlines:l}),D(d=c,Ar,Ux).call(d),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[s,i]=this.pageTranslation,[r,x]=this.pageDimensions;return n(this,ke).serialize([s,i,r,x],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ke=new WeakMap,nx=new WeakMap,Nt=new WeakMap,ur=new WeakMap,Er=new WeakMap,js=new WeakMap,Ws=new WeakMap,Vs=new WeakMap,fr=new WeakMap,Jo=new WeakSet,Tu=function({drawOutlines:t,drawId:s,drawingOptions:i}){B(this,ke,t),this._drawingOptions||(this._drawingOptions=i),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=D(this,tl,Ru).call(this,t,this.parent),D(this,Cr,Xx).call(this,t.box)},tl=new WeakSet,Ru=function(t,s){const{id:i}=s.drawLayer.draw(z._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},el=new WeakSet,Mu=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Ar=new WeakSet,Ux=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=D(this,tl,Ru).call(this,n(this,ke),t)}},Th=new WeakSet,uf=function([t,s,i,r]){const{parentDimensions:[x,a],rotation:o}=this;switch(o){case 90:return[s,1-t,i*(a/x),r*(x/a)];case 180:return[1-t,1-s,i,r];case 270:return[1-s,t,i*(a/x),r*(x/a)];default:return[t,s,i,r]}},xx=new WeakSet,Ul=function(){const{x:t,y:s,width:i,height:r,parentDimensions:[x,a],rotation:o}=this;switch(o){case 90:return[1-s,t,i*(x/a),r*(a/x)];case 180:return[1-t,1-s,i,r];case 270:return[s,1-t,i*(x/a),r*(a/x)];default:return[t,s,i,r]}},Cr=new WeakSet,Xx=function(t){if([this.x,this.y,this.width,this.height]=D(this,Th,uf).call(this,t),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},qs=new WeakSet,Hr=function(){const{x:t,y:s,width:i,height:r,rotation:x,parentRotation:a,parentDimensions:[o,l]}=this;switch((x*4+a)/90){case 1:return[1-s-r,t,r,i];case 2:return[1-t-i,1-s-r,i,r];case 3:return[s,1-t-i,r,i];case 4:return[t,s-i*(o/l),r*(l/o),i*(o/l)];case 5:return[1-s,t,i*(o/l),r*(l/o)];case 6:return[1-t-r*(l/o),1-s,r*(l/o),i*(o/l)];case 7:return[s-i*(o/l),1-t-r*(l/o),i*(o/l),r*(l/o)];case 8:return[t-i,s-r,i,r];case 9:return[1-s,t-i,r,i];case 10:return[1-t,1-s,i,r];case 11:return[s-r,1-t,r,i];case 12:return[t-r*(l/o),s,r*(l/o),i*(o/l)];case 13:return[1-s-i*(o/l),t-r*(l/o),i*(o/l),r*(l/o)];case 14:return[1-t,1-s-i*(o/l),r*(l/o),i*(o/l)];case 15:return[s,1-t,i*(o/l),r*(l/o)];default:return[t,s,i,r]}},K(z,"_currentDrawId",-1),K(z,"_currentParent",null),A(z,Nt,null),A(z,ur,null),A(z,Er,null),A(z,js,NaN),A(z,Ws,null),A(z,Vs,null),A(z,fr,NaN),K(z,"_INNER_MARGIN",3);let Su=z;var y0,Ot,Ht,Br,ax,xe,Xt,Ge,pr,Fr,gr,ox,Xl;class f6{constructor(e,t,s,i,r,x){A(this,ox);A(this,y0,new Float64Array(6));A(this,Ot,void 0);A(this,Ht,void 0);A(this,Br,void 0);A(this,ax,void 0);A(this,xe,void 0);A(this,Xt,"");A(this,Ge,0);A(this,pr,new sc);A(this,Fr,void 0);A(this,gr,void 0);B(this,Fr,s),B(this,gr,i),B(this,Br,r),B(this,ax,x),[e,t]=D(this,ox,Xl).call(this,e,t);const a=B(this,Ot,[NaN,NaN,NaN,NaN,e,t]);B(this,xe,[e,t]),B(this,Ht,[{line:a,points:n(this,xe)}]),n(this,y0).set(a,0)}updateProperty(e,t){e==="stroke-width"&&B(this,ax,t)}isEmpty(){return!n(this,Ht)||n(this,Ht).length===0}isCancellable(){return n(this,xe).length<=10}add(e,t){[e,t]=D(this,ox,Xl).call(this,e,t);const[s,i,r,x]=n(this,y0).subarray(2,6),a=e-r,o=t-x;return Math.hypot(n(this,Fr)*a,n(this,gr)*o)<=2?null:(n(this,xe).push(e,t),isNaN(s)?(n(this,y0).set([r,x,e,t],2),n(this,Ot).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(n(this,y0)[0])&&n(this,Ot).splice(6,6),n(this,y0).set([s,i,r,x,e,t],0),n(this,Ot).push(...H.createBezierPoints(s,i,r,x,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(n(this,xe).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){B(this,Fr,s),B(this,gr,i),B(this,Br,r),[e,t]=D(this,ox,Xl).call(this,e,t);const x=B(this,Ot,[NaN,NaN,NaN,NaN,e,t]);B(this,xe,[e,t]);const a=n(this,Ht).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),n(this,Ht).push({line:x,points:n(this,xe)}),n(this,y0).set(x,0),B(this,Ge,0),this.toSVGPath(),null}getLastElement(){return n(this,Ht).at(-1)}setLastElement(e){return n(this,Ht)?(n(this,Ht).push(e),B(this,Ot,e.line),B(this,xe,e.points),B(this,Ge,0),{path:{d:this.toSVGPath()}}):n(this,pr).setLastElement(e)}removeLastElement(){if(!n(this,Ht))return n(this,pr).removeLastElement();n(this,Ht).pop(),B(this,Xt,"");for(let e=0,t=n(this,Ht).length;e<t;e++){const{line:s,points:i}=n(this,Ht)[e];B(this,Ot,s),B(this,xe,i),B(this,Ge,0),this.toSVGPath()}return{path:{d:n(this,Xt)}}}toSVGPath(){const e=H.svgRound(n(this,Ot)[4]),t=H.svgRound(n(this,Ot)[5]);if(n(this,xe).length===2)return B(this,Xt,`${n(this,Xt)} M ${e} ${t} Z`),n(this,Xt);if(n(this,xe).length<=6){const i=n(this,Xt).lastIndexOf("M");B(this,Xt,`${n(this,Xt).slice(0,i)} M ${e} ${t}`),B(this,Ge,6)}if(n(this,xe).length===4){const i=H.svgRound(n(this,Ot)[10]),r=H.svgRound(n(this,Ot)[11]);return B(this,Xt,`${n(this,Xt)} L ${i} ${r}`),B(this,Ge,12),n(this,Xt)}const s=[];n(this,Ge)===0&&(s.push(`M ${e} ${t}`),B(this,Ge,6));for(let i=n(this,Ge),r=n(this,Ot).length;i<r;i+=6){const[x,a,o,l,c,h]=n(this,Ot).slice(i,i+6).map(H.svgRound);s.push(`C${x} ${a} ${o} ${l} ${c} ${h}`)}return B(this,Xt,n(this,Xt)+s.join(" ")),B(this,Ge,n(this,Ot).length),n(this,Xt)}getOutlines(e,t,s,i){const r=n(this,Ht).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),n(this,pr).build(n(this,Ht),e,t,s,n(this,Br),n(this,ax),i),B(this,y0,null),B(this,Ot,null),B(this,Ht,null),B(this,Xt,null),n(this,pr)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}y0=new WeakMap,Ot=new WeakMap,Ht=new WeakMap,Br=new WeakMap,ax=new WeakMap,xe=new WeakMap,Xt=new WeakMap,Ge=new WeakMap,pr=new WeakMap,Fr=new WeakMap,gr=new WeakMap,ox=new WeakSet,Xl=function(e,t){return H._normalizePoint(e,t,n(this,Fr),n(this,gr),n(this,Br))};var ae,sl,il,_e,k0,_0,lx,cx,hx,x0,I0,Rh,Ef,Mh,ff,Lh,Af;const a9=class a9 extends H{constructor(){super(...arguments);A(this,x0);A(this,Rh);A(this,Mh);A(this,Lh);A(this,ae,void 0);A(this,sl,0);A(this,il,void 0);A(this,_e,void 0);A(this,k0,void 0);A(this,_0,void 0);A(this,lx,void 0);A(this,cx,void 0);A(this,hx,void 0)}build(t,s,i,r,x,a,o){B(this,k0,s),B(this,_0,i),B(this,lx,r),B(this,cx,x),B(this,hx,a),B(this,il,o??0),B(this,_e,t),D(this,Mh,ff).call(this)}setLastElement(t){return n(this,_e).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return n(this,_e).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of n(this,_e)){if(t.push(`M${H.svgRound(s[4])} ${H.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12){t.push(`L${H.svgRound(s[10])} ${H.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[x,a,o,l,c,h]=s.subarray(i,i+6).map(H.svgRound);t.push(`C${x} ${a} ${o} ${l} ${c} ${h}`)}}return t.join("")}serialize([t,s,i,r],x){const a=[],o=[],[l,c,h,d]=D(this,Rh,Ef).call(this);let E,f,C,p,F,m,v,g,w;switch(n(this,cx)){case 0:w=H._rescale,E=t,f=s+r,C=i,p=-r,F=t+l*i,m=s+(1-c-d)*r,v=t+(l+h)*i,g=s+(1-c)*r;break;case 90:w=H._rescaleAndSwap,E=t,f=s,C=i,p=r,F=t+c*i,m=s+l*r,v=t+(c+d)*i,g=s+(l+h)*r;break;case 180:w=H._rescale,E=t+i,f=s,C=-i,p=r,F=t+(1-l-h)*i,m=s+c*r,v=t+(1-l)*i,g=s+(c+d)*r;break;case 270:w=H._rescaleAndSwap,E=t+i,f=s+r,C=-i,p=-r,F=t+(1-c-d)*i,m=s+(1-l-h)*r,v=t+(1-c)*i,g=s+(1-l)*r;break}for(const{line:y,points:b}of n(this,_e))a.push(w(y,E,f,C,p,x?new Array(y.length):null)),o.push(w(b,E,f,C,p,x?new Array(b.length):null));return{lines:a,points:o,rect:[F,m,v,g]}}static deserialize(t,s,i,r,x,{paths:{lines:a,points:o},rotation:l,thickness:c}){const h=[];let d,E,f,C,p;switch(l){case 0:p=H._rescale,d=-t/i,E=s/r+1,f=1/i,C=-1/r;break;case 90:p=H._rescaleAndSwap,d=-s/r,E=-t/i,f=1/r,C=1/i;break;case 180:p=H._rescale,d=t/i+1,E=-s/r,f=-1/i,C=1/r;break;case 270:p=H._rescaleAndSwap,d=s/r+1,E=t/i+1,f=-1/r,C=-1/i;break}if(!a){a=[];for(const m of o){const v=m.length;if(v===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,m[0],m[1]]));continue}if(v===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,m[0],m[1],NaN,NaN,NaN,NaN,m[2],m[3]]));continue}const g=new Float32Array(3*(v-2));a.push(g);let[w,y,b,k]=m.subarray(0,4);g.set([NaN,NaN,NaN,NaN,w,y],0);for(let _=4;_<v;_+=2){const S=m[_],P=m[_+1];g.set(H.createBezierPoints(w,y,b,k,S,P),(_-2)*3),[w,y,b,k]=[b,k,S,P]}}}for(let m=0,v=a.length;m<v;m++)h.push({line:p(a[m].map(g=>g??NaN),d,E,f,C),points:p(o[m].map(g=>g??NaN),d,E,f,C)});const F=new a9;return F.build(h,i,r,1,l,c,x),F}get box(){return n(this,ae)}updateProperty(t,s){return t==="stroke-width"?D(this,Lh,Af).call(this,s):null}updateParentDimensions([t,s],i){const[r,x]=D(this,x0,I0).call(this);B(this,k0,t),B(this,_0,s),B(this,lx,i);const[a,o]=D(this,x0,I0).call(this),l=a-r,c=o-x,h=n(this,ae);return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h}updateRotation(t){return B(this,sl,t),{path:{transform:this.rotationTransform}}}get viewBox(){return n(this,ae).map(H.svgRound).join(" ")}get defaultProperties(){const[t,s]=n(this,ae);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=n(this,ae);let i=0,r=0,x=0,a=0,o=0,l=0;switch(n(this,sl)){case 90:r=s/t,x=-t/s,o=t;break;case 180:i=-1,a=-1,o=t,l=s;break;case 270:r=-s/t,x=t/s,l=s;break;default:return""}return`matrix(${i} ${r} ${x} ${a} ${H.svgRound(o)} ${H.svgRound(l)})`}getPathResizingSVGProperties([t,s,i,r]){const[x,a]=D(this,x0,I0).call(this),[o,l,c,h]=n(this,ae);if(Math.abs(c-x)<=H.PRECISION||Math.abs(h-a)<=H.PRECISION){const p=t+i/2-(o+c/2),F=s+r/2-(l+h/2);return{path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(s)}`,transform:`${this.rotationTransform} translate(${p} ${F})`}}}const d=(i-2*x)/(c-2*x),E=(r-2*a)/(h-2*a),f=c/i,C=h/r;return{path:{"transform-origin":`${H.svgRound(o)} ${H.svgRound(l)}`,transform:`${this.rotationTransform} scale(${f} ${C}) translate(${H.svgRound(x)} ${H.svgRound(a)}) scale(${d} ${E}) translate(${H.svgRound(-x)} ${H.svgRound(-a)})`}}}getPathResizedSVGProperties([t,s,i,r]){const[x,a]=D(this,x0,I0).call(this),o=n(this,ae),[l,c,h,d]=o;if(o[0]=t,o[1]=s,o[2]=i,o[3]=r,Math.abs(h-x)<=H.PRECISION||Math.abs(d-a)<=H.PRECISION){const F=t+i/2-(l+h/2),m=s+r/2-(c+d/2);for(const{line:v,points:g}of n(this,_e))H._translate(v,F,m,v),H._translate(g,F,m,g);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const E=(i-2*x)/(h-2*x),f=(r-2*a)/(d-2*a),C=-E*(l+x)+t+x,p=-f*(c+a)+s+a;if(E!==1||f!==1||C!==0||p!==0)for(const{line:F,points:m}of n(this,_e))H._rescale(F,C,p,E,f,F),H._rescale(m,C,p,E,f,m);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],i){const[r,x]=i,a=n(this,ae),o=t-a[0],l=s-a[1];if(n(this,k0)===r&&n(this,_0)===x)for(const{line:c,points:h}of n(this,_e))H._translate(c,o,l,c),H._translate(h,o,l,h);else{const c=n(this,k0)/r,h=n(this,_0)/x;B(this,k0,r),B(this,_0,x);for(const{line:d,points:E}of n(this,_e))H._rescale(d,o,l,c,h,d),H._rescale(E,o,l,c,h,E);a[2]*=c,a[3]*=h}return a[0]=t,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${H.svgRound(t)} ${H.svgRound(s)}`}}}get defaultSVGProperties(){const t=n(this,ae);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${H.svgRound(t[0])} ${H.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};ae=new WeakMap,sl=new WeakMap,il=new WeakMap,_e=new WeakMap,k0=new WeakMap,_0=new WeakMap,lx=new WeakMap,cx=new WeakMap,hx=new WeakMap,x0=new WeakSet,I0=function(t=n(this,hx)){const s=n(this,il)+t/2*n(this,lx);return n(this,cx)%180===0?[s/n(this,k0),s/n(this,_0)]:[s/n(this,_0),s/n(this,k0)]},Rh=new WeakSet,Ef=function(){const[t,s,i,r]=n(this,ae),[x,a]=D(this,x0,I0).call(this,0);return[t+x,s+a,i-2*x,r-2*a]},Mh=new WeakSet,ff=function(){const t=B(this,ae,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of n(this,_e)){if(r.length<=12){for(let o=4,l=r.length;o<l;o+=6){const[c,h]=r.subarray(o,o+2);t[0]=Math.min(t[0],c),t[1]=Math.min(t[1],h),t[2]=Math.max(t[2],c),t[3]=Math.max(t[3],h)}continue}let x=r[4],a=r[5];for(let o=6,l=r.length;o<l;o+=6){const[c,h,d,E,f,C]=r.subarray(o,o+6);X.bezierBoundingBox(x,a,c,h,d,E,f,C,t),x=f,a=C}}const[s,i]=D(this,x0,I0).call(this);t[0]=Math.min(1,Math.max(0,t[0]-s)),t[1]=Math.min(1,Math.max(0,t[1]-i)),t[2]=Math.min(1,Math.max(0,t[2]+s)),t[3]=Math.min(1,Math.max(0,t[3]+i)),t[2]-=t[0],t[3]-=t[1]},Lh=new WeakSet,Af=function(t){const[s,i]=D(this,x0,I0).call(this);B(this,hx,t);const[r,x]=D(this,x0,I0).call(this),[a,o]=[r-s,x-i],l=n(this,ae);return l[0]-=a,l[1]-=o,l[2]+=2*a,l[3]+=2*o,l};let sc=a9;var dx;const o9=class o9 extends E6{constructor(t){super();A(this,dx,void 0);B(this,dx,t),super.updateProperties({fill:"none",stroke:pt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,s){t==="stroke-width"&&(s??(s=this["stroke-width"]),s*=n(this,dx).realScale),super.updateSVGProperty(t,s)}clone(){const t=new o9(n(this,dx));return t.updateAll(this),t}};dx=new WeakMap;let Lu=o9;var Ih,Cf;const Gr=class Gr extends Su{constructor(t){super({...t,name:"inkEditor"});A(this,Ih);this._willKeepAspectRatio=!0}static initialize(t,s){pt.initialize(t,s),this._defaultDrawingOptions=new Lu(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return rt(this,"typesMap",new Map([[xt.INK_THICKNESS,"stroke-width"],[xt.INK_COLOR,"stroke"],[xt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,i,r,x){return new f6(t,s,i,r,x,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,i,r,x,a){return sc.deserialize(t,s,i,r,x,a)}static async deserialize(t,s,i){let r=null;if(t instanceof s9){const{data:{inkLists:a,rect:o,rotation:l,id:c,color:h,opacity:d,borderStyle:{rawWidth:E},popupRef:f},parent:{page:{pageNumber:C}}}=t;r=t={annotationType:tt.INK,color:Array.from(h),thickness:E,opacity:d,paths:{points:a},boxes:null,pageIndex:C-1,rect:o.slice(0),rotation:l,id:c,deleted:!1,popupRef:f}}const x=await super.deserialize(t,s,i);return x.annotationElementId=t.id||null,x._initialData=r,x}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:i}){this._drawingOptions=Gr.getDefaultDrawingOptions({stroke:X.makeHexColor(...t),"stroke-width":s,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:x,"stroke-opacity":a,"stroke-width":o}}=this,l={annotationType:tt.INK,color:pt._colorManager.convert(x),opacity:a,thickness:o,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?l:this.annotationElementId&&!D(this,Ih,Cf).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){const{points:s,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};Ih=new WeakSet,Cf=function(t){const{color:s,thickness:i,opacity:r,pageIndex:x}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,o)=>a!==s[o])||t.thickness!==i||t.opacity!==r||t.pageIndex!==x},K(Gr,"_type","ink"),K(Gr,"_editorType",tt.INK),K(Gr,"_defaultDrawingOptions",null);let Iu=Gr;var Bt,jt,Ys,ls,Ks,ux,P0,S0,Pe,Ex,Dr,jx,mr,Wx,fx,jl,rl,Ou,Ax,Wl,nl,Hu,Cx,Vl,Nh,Bf;const qx=class qx extends pt{constructor(t){super({...t,name:"stampEditor"});A(this,Dr);A(this,mr);A(this,fx);A(this,rl);A(this,Ax);A(this,nl);A(this,Cx);A(this,Nh);A(this,Bt,null);A(this,jt,null);A(this,Ys,null);A(this,ls,null);A(this,Ks,null);A(this,ux,"");A(this,P0,null);A(this,S0,null);A(this,Pe,!1);A(this,Ex,!1);B(this,ls,t.bitmapUrl),B(this,Ks,t.bitmapFile)}static initialize(t,s){pt.initialize(t,s)}static get supportedTypes(){return rt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return rt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,s){s.pasteEditor(tt.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:x,height:a}=t||this.copyCanvas(null,null,!0).imageData,o=await i.guess({name:"altText",request:{data:r,width:x,height:a,channels:r.length/(x*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const l=o.output;return await this.setGuessedAltText(l),s&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}remove(){var t;n(this,jt)&&(B(this,Bt,null),this._uiManager.imageManager.deleteId(n(this,jt)),(t=n(this,P0))==null||t.remove(),B(this,P0,null),n(this,S0)&&(clearTimeout(n(this,S0)),B(this,S0,null))),super.remove()}rebuild(){if(!this.parent){n(this,jt)&&D(this,fx,jl).call(this);return}super.rebuild(),this.div!==null&&(n(this,jt)&&n(this,P0)===null&&D(this,fx,jl).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(n(this,Ys)||n(this,Bt)||n(this,ls)||n(this,Ks)||n(this,jt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;if(this.width&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),n(this,Bt)?D(this,rl,Ou).call(this):D(this,fx,jl).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(t*i,s*r,this.width*i,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;n(this,S0)!==null&&clearTimeout(n(this,S0)),B(this,S0,setTimeout(()=>{B(this,S0,null),D(this,nl,Hu).call(this)},200))}copyCanvas(t,s,i=!1){var E;t||(t=224);const{width:r,height:x}=n(this,Bt),a=new Ld;let o=n(this,Bt),l=r,c=x,h=null;if(s){if(r>s||x>s){const k=Math.min(s/r,s/x);l=Math.floor(r*k),c=Math.floor(x*k)}h=document.createElement("canvas");const f=h.width=Math.ceil(l*a.sx),C=h.height=Math.ceil(c*a.sy);n(this,Pe)||(o=D(this,Ax,Wl).call(this,f,C));const p=h.getContext("2d");p.filter=this._uiManager.hcmFilter;let F="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":(E=window.matchMedia)!=null&&E.call(window,"(prefers-color-scheme: dark)").matches&&(F="#8f8f9d",m="#42414d");const v=15,g=v*a.sx,w=v*a.sy,y=new OffscreenCanvas(g*2,w*2),b=y.getContext("2d");b.fillStyle=F,b.fillRect(0,0,g*2,w*2),b.fillStyle=m,b.fillRect(0,0,g,w),b.fillRect(g,w,g,w),p.fillStyle=p.createPattern(y,"repeat"),p.fillRect(0,0,f,C),p.drawImage(o,0,0,o.width,o.height,0,0,f,C)}let d=null;if(i){let f,C;if(a.symmetric&&o.width<t&&o.height<t)f=o.width,C=o.height;else if(o=n(this,Bt),r>t||x>t){const m=Math.min(t/r,t/x);f=Math.floor(r*m),C=Math.floor(x*m),n(this,Pe)||(o=D(this,Ax,Wl).call(this,f,C))}const F=new OffscreenCanvas(f,C).getContext("2d",{willReadFrequently:!0});F.drawImage(o,0,0,o.width,o.height,0,0,f,C),d={width:f,height:C,data:F.getImageData(0,0,f,C).data}}return{canvas:h,width:l,height:c,imageData:d}}getImageForAltText(){return n(this,P0)}static async deserialize(t,s,i){var C;let r=null;if(t instanceof OE){const{data:{rect:p,rotation:F,id:m,structParent:v,popupRef:g},container:w,parent:{page:{pageNumber:y}}}=t,b=w.querySelector("canvas"),k=i.imageManager.getFromCanvas(w.id,b);b.remove();const _=((C=await s._structTree.getAriaAttributes(`${qu}${m}`))==null?void 0:C.get("aria-label"))||"";r=t={annotationType:tt.STAMP,bitmapId:k.id,bitmap:k.bitmap,pageIndex:y-1,rect:p.slice(0),rotation:F,id:m,deleted:!1,accessibilityData:{decorative:!1,altText:_},isSvg:!1,structParent:v,popupRef:g}}const x=await super.deserialize(t,s,i),{rect:a,bitmap:o,bitmapUrl:l,bitmapId:c,isSvg:h,accessibilityData:d}=t;c&&i.imageManager.isValidId(c)?(B(x,jt,c),o&&B(x,Bt,o)):B(x,ls,l),B(x,Pe,h);const[E,f]=x.pageDimensions;return x.width=(a[2]-a[0])/E,x.height=(a[3]-a[1])/f,x.annotationElementId=t.id||null,d&&(x.altTextData=d),x._initialData=r,B(x,Ex,!!r),x}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:tt.STAMP,bitmapId:n(this,jt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:n(this,Pe),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=D(this,Cx,Vl).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:x}=this.serializeAltText(!1);if(!r&&x&&(i.accessibilityData={type:"Figure",alt:x}),this.annotationElementId){const o=D(this,Nh,Bf).call(this,i);if(o.isSame)return null;o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const a=n(this,Pe)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(n(this,jt)))s.stamps.set(n(this,jt),{area:a,serialized:i}),i.bitmap=D(this,Cx,Vl).call(this,!1);else if(n(this,Pe)){const o=s.stamps.get(n(this,jt));a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=D(this,Cx,Vl).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Bt=new WeakMap,jt=new WeakMap,Ys=new WeakMap,ls=new WeakMap,Ks=new WeakMap,ux=new WeakMap,P0=new WeakMap,S0=new WeakMap,Pe=new WeakMap,Ex=new WeakMap,Dr=new WeakSet,jx=function(t,s=!1){if(!t){this.remove();return}B(this,Bt,t.bitmap),s||(B(this,jt,t.id),B(this,Pe,t.isSvg)),t.file&&B(this,ux,t.file.name),D(this,rl,Ou).call(this)},mr=new WeakSet,Wx=function(){if(B(this,Ys,null),this._uiManager.enableWaiting(!1),!!n(this,P0)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&n(this,Bt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&n(this,Bt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},fx=new WeakSet,jl=function(){if(n(this,jt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(n(this,jt)).then(i=>D(this,Dr,jx).call(this,i,!0)).finally(()=>D(this,mr,Wx).call(this));return}if(n(this,ls)){const i=n(this,ls);B(this,ls,null),this._uiManager.enableWaiting(!0),B(this,Ys,this._uiManager.imageManager.getFromUrl(i).then(r=>D(this,Dr,jx).call(this,r)).finally(()=>D(this,mr,Wx).call(this)));return}if(n(this,Ks)){const i=n(this,Ks);B(this,Ks,null),this._uiManager.enableWaiting(!0),B(this,Ys,this._uiManager.imageManager.getFromFile(i).then(r=>D(this,Dr,jx).call(this,r)).finally(()=>D(this,mr,Wx).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=qx.supportedTypesStr;const s=this._uiManager._signal;B(this,Ys,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),D(this,Dr,jx).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>D(this,mr,Wx).call(this))),t.click()},rl=new WeakSet,Ou=function(){var h;const{div:t}=this;let{width:s,height:i}=n(this,Bt);const[r,x]=this.pageDimensions,a=.75;if(this.width)s=this.width*r,i=this.height*x;else if(s>a*r||i>a*x){const d=Math.min(a*r/s,a*x/i);s*=d,i*=d}const[o,l]=this.parentDimensions;this.setDims(s*o/r,i*l/x),this._uiManager.enableWaiting(!1);const c=B(this,P0,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=s/r,this.height=i/x,(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),D(this,nl,Hu).call(this),n(this,Ex)||(this.parent.addUndoableEditor(this),B(this,Ex,!0)),this._reportTelemetry({action:"inserted_image"}),n(this,ux)&&c.setAttribute("aria-label",n(this,ux))},Ax=new WeakSet,Wl=function(t,s){const{width:i,height:r}=n(this,Bt);let x=i,a=r,o=n(this,Bt);for(;x>2*t||a>2*s;){const l=x,c=a;x>2*t&&(x=x>=16384?Math.floor(x/2)-1:Math.ceil(x/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(x,a);h.getContext("2d").drawImage(o,0,0,l,c,0,0,x,a),o=h.transferToImageBitmap()}return o},nl=new WeakSet,Hu=function(){const[t,s]=this.parentDimensions,{width:i,height:r}=this,x=new Ld,a=Math.ceil(i*t*x.sx),o=Math.ceil(r*s*x.sy),l=n(this,P0);if(!l||l.width===a&&l.height===o)return;l.width=a,l.height=o;const c=n(this,Pe)?n(this,Bt):D(this,Ax,Wl).call(this,a,o),h=l.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(c,0,0,c.width,c.height,0,0,a,o)},Cx=new WeakSet,Vl=function(t){if(t){if(n(this,Pe)){const r=this._uiManager.imageManager.getSvgUrl(n(this,jt));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=n(this,Bt),s.getContext("2d").drawImage(n(this,Bt),0,0),s.toDataURL()}if(n(this,Pe)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*si.PDF_TO_CSS_UNITS),x=Math.round(this.height*i*si.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,x);return a.getContext("2d").drawImage(n(this,Bt),0,0,n(this,Bt).width,n(this,Bt).height,0,0,r,x),a.transferToImageBitmap()}return structuredClone(n(this,Bt))},Nh=new WeakSet,Bf=function(t){var a;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===s,x=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&x,isSameAltText:x}},K(qx,"_type","stamp"),K(qx,"_editorType",tt.STAMP);let Nu=qx;var vr,Bx,T0,Qs,cs,$e,Zs,px,br,a0,hs,te,ds,U,Js,Oh,pf,Ue,E0,xl,Gu,al,$u,Fx,ql;const Ve=class Ve{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:x,drawLayer:a,textLayer:o,viewport:l,l10n:c}){A(this,Oh);A(this,Ue);A(this,xl);A(this,al);A(this,Fx);A(this,vr,void 0);A(this,Bx,!1);A(this,T0,null);A(this,Qs,null);A(this,cs,null);A(this,$e,new Map);A(this,Zs,!1);A(this,px,!1);A(this,br,!1);A(this,a0,null);A(this,hs,null);A(this,te,null);A(this,ds,null);A(this,U,void 0);const h=[...n(Ve,Js).values()];if(!Ve._initialized){Ve._initialized=!0;for(const d of h)d.initialize(c,e)}e.registerEditorTypes(h),B(this,U,e),this.pageIndex=t,this.div=s,B(this,vr,r),B(this,T0,x),this.viewport=l,B(this,te,o),this.drawLayer=a,this._structTree=i,n(this,U).addLayer(this)}get isEmpty(){return n(this,$e).size===0}get isInvisible(){return this.isEmpty&&n(this,U).getMode()===tt.NONE}updateToolbar(e){n(this,U).updateToolbar(e)}updateMode(e=n(this,U).getMode()){switch(D(this,Fx,ql).call(this),e){case tt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case tt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case tt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of n(Ve,Js).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=n(this,te))==null?void 0:t.div)}setEditingState(e){n(this,U).setEditingState(e)}addCommands(e){n(this,U).addCommands(e)}cleanUndoStack(e){n(this,U).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=n(this,T0))==null||t.div.classList.toggle("disabled",!e)}async enable(){B(this,br,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const s of n(this,$e).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(n(this,U).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!n(this,T0)){B(this,br,!1);return}const t=n(this,T0).getEditableAnnotations();for(const s of t){if(s.hide(),n(this,U).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}B(this,br,!1)}disable(){var i;B(this,px,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of n(this,$e).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(n(this,T0)){const r=n(this,T0).getEditableAnnotations();for(const x of r){const{id:a}=x.data;if(n(this,U).isDeletedAnnotationElement(a))continue;let o=t.get(a);if(o){o.resetAnnotationElement(x),o.show(!1),x.show();continue}o=e.get(a),o&&(n(this,U).addChangedExistingAnnotation(o),o.renderAnnotationElement(x)&&o.show(!1)),x.show()}}D(this,Fx,ql).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of n(Ve,Js).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),B(this,px,!1)}getEditableAnnotation(e){var t;return((t=n(this,T0))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){n(this,U).getActive()!==e&&n(this,U).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=n(this,te))!=null&&e.div&&!n(this,ds)){B(this,ds,new AbortController);const t=n(this,U).combinedSignal(n(this,ds));n(this,te).div.addEventListener("pointerdown",D(this,Oh,pf).bind(this),{signal:t}),n(this,te).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=n(this,te))!=null&&e.div&&n(this,ds)&&(n(this,ds).abort(),B(this,ds,null),n(this,te).div.classList.remove("highlighting"))}enableClick(){if(n(this,Qs))return;B(this,Qs,new AbortController);const e=n(this,U).combinedSignal(n(this,Qs));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=n(this,Qs))==null||e.abort(),B(this,Qs,null)}attach(e){n(this,$e).set(e.id,e);const{annotationElementId:t}=e;t&&n(this,U).isDeletedAnnotationElement(t)&&n(this,U).removeDeletedAnnotationElement(e)}detach(e){var t;n(this,$e).delete(e.id),(t=n(this,vr))==null||t.removePointerInTextLayer(e.contentDiv),!n(this,px)&&e.annotationElementId&&n(this,U).addDeletedAnnotationElement(e)}remove(e){this.detach(e),n(this,U).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(n(this,U).addDeletedAnnotationElement(e.annotationElementId),pt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),n(this,U).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!n(this,br)),n(this,U).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!n(this,cs)&&(e._focusEventsAllowed=!1,B(this,cs,setTimeout(()=>{B(this,cs,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:n(this,U)._signal}),t.focus())},0))),e._structTreeParentId=(s=n(this,vr))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return n(this,U).getId()}combinedSignal(e){return n(this,U).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=n(this,Ue,E0))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){n(this,U).updateToolbar(e),n(this,U).updateMode(e);const{offsetX:s,offsetY:i}=D(this,al,$u).call(this),r=this.getNextId(),x=D(this,xl,Gu).call(this,{parent:this,id:r,x:s,y:i,uiManager:n(this,U),isCentered:!0,...t});x&&this.add(x)}async deserialize(e){var t;return await((t=n(Ve,Js).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,n(this,U)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=D(this,xl,Gu).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:n(this,U),isCentered:t,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(D(this,al,$u).call(this),!0)}setSelected(e){n(this,U).setSelected(e)}toggleSelected(e){n(this,U).toggleSelected(e)}unselect(e){n(this,U).unselect(e)}pointerup(e){var s;const{isMac:t}=le.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&n(this,Zs)&&(B(this,Zs,!1),!((s=n(this,Ue,E0))!=null&&s.isDrawer&&n(this,Ue,E0).supportMultipleDrawings))){if(!n(this,Bx)){B(this,Bx,!0);return}if(n(this,U).getMode()===tt.STAMP){n(this,U).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var i;if(n(this,U).getMode()===tt.HIGHLIGHT&&this.enableTextSelection(),n(this,Zs)){B(this,Zs,!1);return}const{isMac:t}=le.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(B(this,Zs,!0),(i=n(this,Ue,E0))!=null&&i.isDrawer){this.startDrawingSession(e);return}const s=n(this,U).getActive();B(this,Bx,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus(),n(this,a0)){n(this,Ue,E0).startDrawing(this,n(this,U),!1,e);return}n(this,U).setCurrentDrawingSession(this),B(this,a0,new AbortController);const t=n(this,U).combinedSignal(n(this,a0));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(B(this,hs,null),this.commitOrRemove())},{signal:t}),n(this,Ue,E0).startDrawing(this,n(this,U),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&B(this,hs,t);return}n(this,hs)&&setTimeout(()=>{var t;(t=n(this,hs))==null||t.focus(),B(this,hs,null)},0)}endDrawingSession(e=!1){return n(this,a0)?(n(this,U).setCurrentDrawingSession(null),n(this,a0).abort(),B(this,a0,null),B(this,hs,null),n(this,Ue,E0).endDrawing(e)):null}findNewParent(e,t,s){const i=n(this,U).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return n(this,a0)?(this.endDrawingSession(),!0):!1}onScaleChanging(){n(this,a0)&&n(this,Ue,E0).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=n(this,U).getActive())==null?void 0:e.parent)===this&&(n(this,U).commitOrRemove(),n(this,U).setActiveEditor(null)),n(this,cs)&&(clearTimeout(n(this,cs)),B(this,cs,null));for(const s of n(this,$e).values())(t=n(this,vr))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,n(this,$e).clear(),n(this,U).removeLayer(this)}render({viewport:e}){this.viewport=e,yr(this.div,e);for(const t of n(this,U).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){n(this,U).commitOrRemove(),D(this,Fx,ql).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,yr(this.div,{rotation:s}),t!==s)for(const i of n(this,$e).values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return n(this,U).viewParameters.realScale}};vr=new WeakMap,Bx=new WeakMap,T0=new WeakMap,Qs=new WeakMap,cs=new WeakMap,$e=new WeakMap,Zs=new WeakMap,px=new WeakMap,br=new WeakMap,a0=new WeakMap,hs=new WeakMap,te=new WeakMap,ds=new WeakMap,U=new WeakMap,Js=new WeakMap,Oh=new WeakSet,pf=function(e){n(this,U).unselectAll();const{target:t}=e;if(t===n(this,te).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&n(this,te).div.contains(t)){const{isMac:s}=le.platform;if(e.button!==0||e.ctrlKey&&s)return;n(this,U).showAllEditors("highlight",!0,!0),n(this,te).div.classList.add("free"),this.toggleDrawing(),ec.startHighlighting(this,n(this,U).direction==="ltr",{target:n(this,te).div,x:e.x,y:e.y}),n(this,te).div.addEventListener("pointerup",()=>{n(this,te).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:n(this,U)._signal}),e.preventDefault()}},Ue=new WeakSet,E0=function(){return n(Ve,Js).get(n(this,U).getMode())},xl=new WeakSet,Gu=function(e){const t=n(this,Ue,E0);return t?new t.prototype.constructor(e):null},al=new WeakSet,$u=function(){const{x:e,y:t,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),x=Math.max(0,t),a=Math.min(window.innerWidth,e+s),o=Math.min(window.innerHeight,t+i),l=(r+a)/2-e,c=(x+o)/2-t,[h,d]=this.viewport.rotation%180===0?[l,c]:[c,l];return{offsetX:h,offsetY:d}},Fx=new WeakSet,ql=function(){for(const e of n(this,$e).values())e.isEmpty()&&e.remove()},K(Ve,"_initialized",!1),A(Ve,Js,new Map([gu,Iu,Nu,ec].map(e=>[e._editorType,e])));let zu=Ve;var o0,ol,oe,wr,Hh,Ff,ll,Xu,zh,gf,cl,ju;const Kt=class Kt{constructor({pageIndex:e}){A(this,ll);A(this,zh);A(this,cl);A(this,o0,null);A(this,ol,0);A(this,oe,new Map);A(this,wr,new Map);this.pageIndex=e}setParent(e){if(!n(this,o0)){B(this,o0,e);return}if(n(this,o0)!==e){if(n(this,oe).size>0)for(const t of n(this,oe).values())t.remove(),e.append(t);B(this,o0,e)}}static get _svgFactory(){return rt(this,"_svgFactory",new e9)}draw(e,t=!1,s=!1){const i=ie(this,ol)._++,r=D(this,ll,Xu).call(this),x=Kt._svgFactory.createElement("defs");r.append(x);const a=Kt._svgFactory.createElement("path");x.append(a);const o=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke"),t&&n(this,wr).set(i,a);const l=s?D(this,zh,gf).call(this,x,o):null,c=Kt._svgFactory.createElement("use");return r.append(c),c.setAttribute("href",`#${o}`),this.updateProperties(r,e),n(this,oe).set(i,r),{id:i,clipPathId:`url(#${l})`}}drawOutline(e,t){const s=ie(this,ol)._++,i=D(this,ll,Xu).call(this),r=Kt._svgFactory.createElement("defs");i.append(r);const x=Kt._svgFactory.createElement("path");r.append(x);const a=`path_p${this.pageIndex}_${s}`;x.setAttribute("id",a),x.setAttribute("vector-effect","non-scaling-stroke");let o;if(t){const h=Kt._svgFactory.createElement("mask");r.append(h),o=`mask_p${this.pageIndex}_${s}`,h.setAttribute("id",o),h.setAttribute("maskUnits","objectBoundingBox");const d=Kt._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const E=Kt._svgFactory.createElement("use");h.append(E),E.setAttribute("href",`#${a}`),E.setAttribute("stroke","none"),E.setAttribute("fill","black"),E.setAttribute("fill-rule","nonzero"),E.classList.add("mask")}const l=Kt._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const c=l.cloneNode();return i.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(i,e),n(this,oe).set(s,i),s}finalizeDraw(e,t){n(this,wr).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var o;if(!t)return;const{root:s,bbox:i,rootClass:r,path:x}=t,a=typeof e=="number"?n(this,oe).get(e):e;if(a){if(s&&D(this,cl,ju).call(this,a,s),i&&D(o=Kt,Hh,Ff).call(o,a,i),r){const{classList:l}=a;for(const[c,h]of Object.entries(r))l.toggle(c,h)}if(x){const c=a.firstChild.firstChild;D(this,cl,ju).call(this,c,x)}}}updateParent(e,t){if(t===this)return;const s=n(this,oe).get(e);s&&(n(t,o0).append(s),n(this,oe).delete(e),n(t,oe).set(e,s))}remove(e){n(this,wr).delete(e),n(this,o0)!==null&&(n(this,oe).get(e).remove(),n(this,oe).delete(e))}destroy(){B(this,o0,null);for(const e of n(this,oe).values())e.remove();n(this,oe).clear(),n(this,wr).clear()}};o0=new WeakMap,ol=new WeakMap,oe=new WeakMap,wr=new WeakMap,Hh=new WeakSet,Ff=function(e,[t,s,i,r]){const{style:x}=e;x.top=`${100*s}%`,x.left=`${100*t}%`,x.width=`${100*i}%`,x.height=`${100*r}%`},ll=new WeakSet,Xu=function(){const e=Kt._svgFactory.create(1,1,!0);return n(this,o0).append(e),e.setAttribute("aria-hidden",!0),e},zh=new WeakSet,gf=function(e,t){const s=Kt._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Kt._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},cl=new WeakSet,ju=function(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)},A(Kt,Hh);let Uu=Kt;globalThis.pdfjsTestingUtils={HighlightOutliner:mu};J.AbortException;J.AnnotationEditorLayer;J.AnnotationEditorParamsType;J.AnnotationEditorType;J.AnnotationEditorUIManager;J.AnnotationLayer;J.AnnotationMode;J.ColorPicker;J.DOMSVGFactory;J.DrawLayer;J.FeatureTest;var A6=J.GlobalWorkerOptions;J.ImageKind;J.InvalidPDFException;J.MissingPDFException;J.OPS;J.OutputScale;J.PDFDataRangeTransport;J.PDFDateString;J.PDFWorker;J.PasswordResponses;J.PermissionFlag;J.PixelsPerInch;J.RenderingCancelledException;J.TextLayer;J.TouchManager;J.UnexpectedResponseException;J.Util;J.VerbosityLevel;J.XfaLayer;J.build;J.createValidAbsoluteUrl;J.fetchData;var C6=J.getDocument;J.getFilenameFromUrl;J.getPdfFilenameFromUrl;J.getXfaPageViewport;J.isDataScheme;J.isPdfFile;J.noContextMenu;J.normalizeUnicode;J.setLayerDimensions;J.shadow;J.stopEvent;J.version;const B6={class:"grid p-fluid"},p6={class:"col-12"},F6={class:"card"},g6={class:"grid"},D6={class:"col-12 xl:col-6"},m6={id:"document",class:"p-error"},v6={class:"col-12 xl:col-6"},b6={class:"flex flex-column justify-content-center align-items-center gap-3"},w6={key:0},P6={__name:"VerifyDocuments",setup(u){A6.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.6.82/pdf.worker.min.mjs";const e=Qh(""),t=Qh(""),s=Qh("686ec6f412ef35d7d922502b1ccaf139aec022f23b48f974227399bc1946c995"),i=({files:a})=>{const o=a[0];if(!o)return;const l=new FileReader;l.onload=function(c){const h=new Uint8Array(c.target.result);r(h)},l.readAsArrayBuffer(o)};async function r(a){try{const l=await(await C6({data:a}).promise).getPage(1),c=l.getViewport({scale:1.5}),h=document.createElement("canvas"),d=h.getContext("2d");h.width=c.width,h.height=c.height;const E={canvasContext:d,viewport:c};await l.render(E).promise;const f=d.getImageData(0,0,h.width,h.height),C=jf(f.data,f.width,f.height);if(C){const p=C.data,F=prompt("Enter the secret key to decrypt the QR code:");if(!F){e.value="No secret key entered.";return}if(F.trim()!==s.value){e.value="Invalid secret key.";return}const m=x(p,F);t.value=m}else e.value="No QR code found."}catch(o){e.value="Error processing PDF: "+o.message}}function x(a,o){return Q9.AES.decrypt(a,o).toString(Q9.enc.Utf8)}return(a,o)=>{const l=Of("FileUpload");return g9(),D9("div",B6,[We("div",p6,[We("div",F6,[o[4]||(o[4]=We("h5",{class:"mb-5"},"Verify Documents",-1)),We("div",g6,[We("div",D6,[Hf(l,{name:"docs[]",onSelect:i,onClear:o[0]||(o[0]=c=>{t.value="",e.value=""}),onRemove:o[1]||(o[1]=c=>{t.value="",e.value=""}),accept:"application/pdf",maxFileSize:1e6,showUploadButton:!1,previewWidth:0},{empty:zf(()=>o[2]||(o[2]=[We("p",null,"Drag and drop PDF file here to upload, or click to select one.",-1)])),_:1}),o[3]||(o[3]=We("br",null,null,-1)),We("small",m6,m9(e.value),1)]),We("div",v6,[We("div",b6,[t.value?(g9(),D9("h6",w6,"QR Code Data:")):Gf("",!0),We("p",null,m9(t.value),1)])])])])])])}}};export{P6 as default};
