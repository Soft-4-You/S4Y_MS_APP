import{r as i,a as R,p as K,q as y,s as b,d as n,e as P,f as H,i as o,k as t,l as a,j as p,t as V}from"./index-c8a9da24.js";import{C as M}from"./CustomerService-cbe06d98.js";const $={class:"grid"},q={class:"col-12"},z={class:"card"},Q={class:"flex justify-content-between flex-column sm:flex-row mb-2"},W={class:"flex gap-2"},G={class:"flex align-items-center gap-2"},J=["alt","src"],X={class:"field grid"},Y={class:"col-12"},Z={class:"field grid"},ee={class:"col-12"},le={class:"field grid"},te={class:"col-12"},oe={class:"field grid"},ae={class:"col-12"},ne={class:"mt-3"},re={__name:"Contracts",setup(se){const f=i(null),m=i(null),_=i(null),D=i(null),x=R(),c=i(!1),F=new M,S=()=>{x.add({severity:"success",summary:"Success",detail:"File Uploaded",life:3e3})};K(()=>{F.getCustomersLarge().then(s=>{f.value=s,_.value=!1,f.value.forEach(e=>e.date=new Date(e.date))}),D.value=!1,h()});const h=()=>{m.value={global:{value:null,matchMode:y.CONTAINS},name:{operator:b.AND,constraints:[{value:null,matchMode:y.STARTS_WITH}]},date:{operator:b.AND,constraints:[{value:null,matchMode:y.DATE_IS}]},status:{operator:b.OR,constraints:[{value:null,matchMode:y.EQUALS}]}}},T=()=>{h()},C=s=>s.toLocaleDateString("en-UK",{day:"2-digit",month:"2-digit",year:"numeric"});i([{label:"Edit",icon:"pi pi-pencil"}]);const U=i(""),I=i(["Income","Expense"]),A=()=>{c.value=!0},w=()=>{c.value=!1};return(s,e)=>{const r=n("Button"),j=n("InputIcon"),v=n("InputText"),B=n("IconField"),u=n("Column"),g=n("Calendar"),N=n("DataTable"),k=n("AutoComplete"),E=n("Dropdown"),L=n("FileUpload"),O=n("Dialog");return P(),H("div",$,[o("div",q,[o("div",z,[e[18]||(e[18]=o("h5",null,"Contracts",-1)),t(N,{value:f.value,paginator:!0,rows:15,dataKey:"id",rowHover:!0,filters:m.value,"onUpdate:filters":e[2]||(e[2]=l=>m.value=l),filterDisplay:"menu",loading:_.value,globalFilterFields:["name","status"]},{header:a(()=>[o("div",Q,[o("div",W,[t(r,{type:"button",icon:"pi pi-upload",label:"Upload",onClick:A}),t(r,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:e[0]||(e[0]=l=>T())})]),t(B,{iconPosition:"left"},{default:a(()=>[t(j,{class:"pi pi-search"}),t(v,{modelValue:m.value.global.value,"onUpdate:modelValue":e[1]||(e[1]=l=>m.value.global.value=l),placeholder:"Keyword Search",style:{width:"100%"}},null,8,["modelValue"])]),_:1})])]),empty:a(()=>e[8]||(e[8]=[p(" No contracts found. ")])),loading:a(()=>e[9]||(e[9]=[p(" Loading contracts data. Please wait. ")])),default:a(()=>[t(u,{field:"name",header:"Opposite party",style:{"min-width":"12rem"}},{body:a(({data:l})=>[o("div",G,[o("img",{alt:l.representative.name,src:`https://primefaces.org/cdn/primevue/images/avatar/${l.representative.image}`,style:{width:"32px"}},null,8,J),o("span",null,V(l.name),1)])]),filter:a(({filterModel:l})=>[t(v,{type:"text",modelValue:l.value,"onUpdate:modelValue":d=>l.value=d,class:"p-column-filter",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(u,{field:"name",header:"Category",style:{"min-width":"12rem"}},{body:a(({data:l})=>e[10]||(e[10]=[p(" employee/client ")])),filter:a(({filterModel:l})=>[t(v,{type:"text",modelValue:l.value,"onUpdate:modelValue":d=>l.value=d,class:"p-column-filter",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(u,{field:"name",header:"Related",style:{"min-width":"12rem"}},{body:a(({data:l})=>e[11]||(e[11]=[p(" Related to: project ")])),filter:a(({filterModel:l})=>[t(v,{type:"text",modelValue:l.value,"onUpdate:modelValue":d=>l.value=d,class:"p-column-filter",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(u,{header:"Date",filterField:"date",dataType:"date",style:{"min-width":"10rem"}},{body:a(({data:l})=>[p(V(C(l.date)),1)]),filter:a(({filterModel:l})=>[t(g,{modelValue:l.value,"onUpdate:modelValue":d=>l.value=d,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(u,{header:"Due Date",filterField:"date",dataType:"date",style:{"min-width":"10rem"}},{body:a(({data:l})=>[p(V(C(l.date)),1)]),filter:a(({filterModel:l})=>[t(g,{modelValue:l.value,"onUpdate:modelValue":d=>l.value=d,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(u,{field:"status",header:"Contract",style:{"min-width":"8rem"}},{body:a(()=>[t(r,{label:"View",outlined:""})]),_:1}),t(u,{field:"status",header:"Actions",style:{"min-width":"8rem"}},{body:a(()=>[t(r,{icon:"pi pi-pencil",severity:"warning",class:"mr-2"}),t(r,{icon:"pi pi-trash",severity:"danger"})]),_:1})]),_:1},8,["value","filters","loading"]),t(O,{header:"Add Contract",visible:c.value,"onUpdate:visible":e[7]||(e[7]=l=>c.value=l),modal:!0,style:{"max-height":"500px"},class:"add-product-dialog"},{footer:a(()=>[o("div",ne,[t(r,{label:"cancel",icon:"pi pi-times",onClick:w,class:"p-button-text",severity:"danger"}),t(r,{label:"Upload",icon:"pi pi-upload",onClick:w,class:"p-button-text"})])]),default:a(()=>[e[17]||(e[17]=o("p",{class:"mb-4"},[o("i",{class:"pi pi-exclamation-circle"}),p(" Project's contracts are added from the project page!")],-1)),o("div",X,[e[12]||(e[12]=o("label",{class:"col-12 mb-2"}," Opposite party",-1)),o("div",Y,[t(k,{placeholder:"Search",id:"project-member",dropdown:!0,modelValue:s.selectedAutoValue,"onUpdate:modelValue":e[3]||(e[3]=l=>s.selectedAutoValue=l),suggestions:s.autoFilteredValue,onComplete:e[4]||(e[4]=l=>s.searchCountry(l)),field:"name"},null,8,["modelValue","suggestions"])])]),o("div",Z,[e[13]||(e[13]=o("label",{for:"type",class:"col-12 mb-2"},"Category",-1)),o("div",ee,[t(E,{id:"type",modelValue:U.value,"onUpdate:modelValue":e[5]||(e[5]=l=>U.value=l),options:I.value,placeholder:"Select type ..."},null,8,["modelValue","options"])])]),o("div",le,[e[14]||(e[14]=o("label",{class:"col-12 mb-2"},"Due date",-1)),o("div",te,[t(g,{showIcon:!0,showButtonBar:!0,modelValue:s.projectDeadline,"onUpdate:modelValue":e[6]||(e[6]=l=>s.projectDeadline=l)},null,8,["modelValue"])])]),o("div",oe,[e[16]||(e[16]=o("label",{for:"price",class:"col-12 mb-2"},"Contract file",-1)),o("div",ae,[t(L,{name:"demo[]",onUpload:S,multiple:!0,accept:"image/*",maxFileSize:1e6},{empty:a(()=>e[15]||(e[15]=[o("p",null,"Drag and drop files to here to upload.",-1)])),_:1})])])]),_:1},8,["visible"])])])])}}};export{re as default};
