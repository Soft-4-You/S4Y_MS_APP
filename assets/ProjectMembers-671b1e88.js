import{r as n,c as te,a as oe,b as le,p as ae,q as u,s as p,o as ne,d as i,e as V,f as j,i as l,k as o,l as s,j as c,t as v,v as se}from"./index-0d364d6b.js";import{C as ie}from"./CustomerService-cbe06d98.js";import{P as re}from"./ProductService-74c45874.js";import{C as ue}from"./CountryService-74a64663.js";const de={class:"grid"},ce={class:"col-12"},me={class:"card"},pe={class:"flex align-items-center justify-content-between mb-3"},ve={key:1},fe={class:"flex gap-3"},ge={class:"field grid"},be={class:"col-12"},ye={class:"field grid"},_e={class:"col-12"},Ce={class:"field grid"},we={class:"col-12"},he={class:"field grid"},Se={class:"col-12"},Te={__name:"ProjectMembers",setup(Ae){const b=n(null),q=n(null),B=n(null),y=n(null),D=n(null),I=n(null),P=n(null),M=n(!1),F=te(["unqualified","qualified","new","negotiation","renewal","proposal"]),x=oe(),R=le(),f=n(!1),g=n(!1),m=n([]),T=n([{name:"New York"},{name:"Rome"},{name:"London"},{name:"Istanbul"},{name:"Paris"}]),_=new ie,W=new re,C=a=>{switch(a){case"unqualified":return"danger";case"qualified":return"success";case"new":return"info";case"negotiation":return"warning";case"renewal":return null}};ae(()=>{W.getProductsWithOrdersSmall().then(a=>P.value=a),_.getCustomersLarge().then(a=>{b.value=a,D.value=!1,b.value.forEach(e=>e.date=new Date(e.date))}),_.getCustomersLarge().then(a=>q.value=a),_.getCustomersMedium().then(a=>B.value=a),I.value=!1,O()});const O=()=>{y.value={global:{value:null,matchMode:u.CONTAINS},name:{operator:p.AND,constraints:[{value:null,matchMode:u.STARTS_WITH}]},"country.name":{operator:p.AND,constraints:[{value:null,matchMode:u.STARTS_WITH}]},representative:{value:null,matchMode:u.IN},date:{operator:p.AND,constraints:[{value:null,matchMode:u.DATE_IS}]},balance:{operator:p.AND,constraints:[{value:null,matchMode:u.EQUALS}]},status:{operator:p.OR,constraints:[{value:null,matchMode:u.EQUALS}]},activity:{value:[0,100],matchMode:u.BETWEEN},verified:{value:null,matchMode:u.EQUALS}}},w=n(null),k=n(null),h=n([]),H=new ue;ne(()=>{H.getCountries().then(a=>w.value=a)});const Q=a=>{setTimeout(()=>{a.query.trim().length?h.value=w.value.filter(e=>e.name.toLowerCase().startsWith(a.query.toLowerCase())):h.value=[...w.value]},250)},Y=a=>{R.require({target:a.target,message:"Are you sure you want to proceed?",icon:"pi pi-exclamation-triangle",accept:()=>{x.add({severity:"info",summary:"Confirmed",detail:"You have accepted",life:3e3})},reject:()=>{x.add({severity:"info",summary:"Rejected",detail:"You have rejected",life:3e3})}})},K=()=>{g.value=!0},L=()=>{g.value=!1},z=()=>{f.value=!0},N=()=>{f.value=!1};n();function G(a){a.map(e=>e.name).join(", ")}return(a,e)=>{const d=i("Button"),S=i("Column"),A=i("Tag"),J=i("Dropdown"),X=i("DataTable"),Z=i("ConfirmPopup"),$=i("AutoComplete"),U=i("Listbox"),E=i("Dialog"),ee=i("InputSwitch");return V(),j("div",de,[l("div",ce,[l("div",me,[l("div",pe,[e[9]||(e[9]=l("h5",null,"Project Members",-1)),o(d,{onClick:K,label:"Add member",icon:"pi pi-plus",style:{width:"150px"}})]),o(X,{value:b.value,paginator:!0,rows:10,dataKey:"id",rowHover:!0,filters:y.value,"onUpdate:filters":e[1]||(e[1]=t=>y.value=t),filterDisplay:"menu",loading:D.value,globalFilterFields:["name","country.name","representative.name","balance","status"]},{empty:s(()=>e[10]||(e[10]=[c(" No customers found. ")])),loading:s(()=>e[11]||(e[11]=[c(" Loading customers data. Please wait. ")])),default:s(()=>[o(S,{field:"name",header:"Name",style:{"min-width":"12rem"}},{body:s(({data:t})=>[c(v(t.name)+" ",1),e[12]||(e[12]=l("span",null,[l("i",{class:"pi pi-prime text-primary"})],-1))]),_:1}),o(S,{field:"status",header:"Role",filterMenuStyle:{width:"14rem"},style:{"min-width":"12rem"}},{body:s(({data:t})=>[o(A,{severity:C(t.status)},{default:s(()=>[c(v(t.status.toUpperCase()),1)]),_:2},1032,["severity"])]),filter:s(({filterModel:t})=>[o(J,{modelValue:t.value,"onUpdate:modelValue":r=>t.value=r,options:F,placeholder:"Any",class:"p-column-filter",showClear:!0},{value:s(r=>[r.value?(V(),se(A,{key:0,severity:C(r.value)},{default:s(()=>[c(v(r.value),1)]),_:2},1032,["severity"])):(V(),j("span",ve,v(r.placeholder),1))]),option:s(r=>[o(A,{severity:C(r.option)},{default:s(()=>[c(v(r.option.toUpperCase()),1)]),_:2},1032,["severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),o(S,{header:"Actions",headerStyle:"width:10rem"},{body:s(()=>[l("div",fe,[o(d,{onClick:z,severity:"warning",icon:"pi pi-pencil"}),o(d,{ref:"popup",onClick:e[0]||(e[0]=t=>Y(t)),severity:"danger",icon:"pi pi-times"},null,512)])]),_:1})]),_:1},8,["value","filters","loading"]),o(Z),o(E,{header:"Add Member",visible:g.value,"onUpdate:visible":e[5]||(e[5]=t=>g.value=t),style:{width:"30%"},modal:!0},{footer:s(()=>[o(d,{label:"Cancel",icon:"pi pi-times",onClick:L,class:"p-button-text"}),o(d,{label:"Add",icon:"pi pi-pencil",onClick:L,class:"p-button-text",autofocus:""})]),default:s(()=>[l("div",ge,[e[13]||(e[13]=l("label",{class:"col-12 mb-2"},"Choose member",-1)),l("div",be,[o($,{placeholder:"Search",id:"project-member",dropdown:!0,modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=t=>k.value=t),suggestions:h.value,onComplete:e[3]||(e[3]=t=>Q(t)),field:"name"},null,8,["modelValue","suggestions"])])]),l("div",ye,[e[14]||(e[14]=l("label",{for:"email3",class:"col-12 mb-2"},"Choose role",-1)),l("div",_e,[o(U,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=t=>m.value=t),options:T.value,optionLabel:"name",filter:"",multiple:""},null,8,["modelValue","options"])])])]),_:1},8,["visible"]),o(E,{header:"Edit Member",visible:f.value,"onUpdate:visible":e[8]||(e[8]=t=>f.value=t),style:{width:"30%"},modal:!0},{footer:s(()=>[o(d,{label:"Cancel",icon:"pi pi-times",onClick:N,class:"p-button-text"}),o(d,{label:"Edit",icon:"pi pi-pencil",onClick:N,class:"p-button-text",autofocus:""})]),default:s(()=>[l("div",Ce,[e[15]||(e[15]=l("label",{for:"email3",class:"col-12 mb-2"},"Choose role",-1)),l("div",we,[o(U,{modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=t=>m.value=t),change:G(m.value),options:T.value,optionLabel:"name",filter:"",multiple:""},null,8,["modelValue","change","options"])])]),l("div",he,[e[16]||(e[16]=l("label",{class:"col-12 mb-2"},[c("Project manager "),l("i",{class:"pi pi-prime text-primary ml-2"})],-1)),l("div",Se,[o(ee,{modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=t=>M.value=t)},null,8,["modelValue"])])])]),_:1},8,["visible"])])])])}}};export{Te as default};
