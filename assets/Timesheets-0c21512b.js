import{C as O}from"./CustomerService-cbe06d98.js";import{P as Y}from"./ProductService-74c45874.js";import{r as s,a as q,b as F,p as G,d,e as H,f as W,i as l,k as t,l as a,t as T,j as p}from"./index-45d168f1.js";const z={class:"grid"},J={class:"col-12"},K={class:"card"},Q={class:"flex align-items-center justify-content-between"},X={class:"flex align-items-center gap-2"},Z=["alt","src"],$={class:"p-3"},ee={class:"flex gap-3"},te={style:{"text-align":"right"},class:"text-primary font-bold pr-6"},oe={class:"field grid"},le={class:"col-12"},ae={class:"field grid"},se={class:"col-12"},ue={__name:"Timesheets",setup(ne){const b=s(null),P=s(null),c=s(null),S=s(null),V=s(null),R=s(null);s(null);const _=q(),B=F(),m=s(!1),v=s(!1),h=s(null),f=s(null),y=s([{name:"New York"},{name:"Rome"},{name:"London"},{name:"Istanbul"},{name:"Paris"}]),x=s([]);f.value=y.value[0];const g=new O,E=new Y;G(()=>{E.getProductsWithOrdersSmall().then(n=>R.value=n),g.getCustomersLarge().then(n=>{b.value=n,S.value=!1,b.value.forEach(e=>e.date=new Date(e.date))}),g.getCustomersLarge().then(n=>P.value=n),g.getCustomersMedium().then(n=>c.value=n),V.value=!1});const L=n=>{let e=0;if(c.value)for(let i of c.value)i.representative.name===n&&e++;return e};s([{label:"Pending",icon:"pi pi-clock"},{label:"In progress",icon:"pi pi-code"},{label:"Done",icon:"pi pi-check-square"}]);const j=n=>{B.require({target:n.target,message:"Are you sure you want to proceed?",icon:"pi pi-exclamation-triangle",accept:()=>{_.add({severity:"info",summary:"Confirmed",detail:"You have accepted",life:3e3})},reject:()=>{_.add({severity:"info",summary:"Rejected",detail:"You have rejected",life:3e3})}})},A=()=>{m.value=!0},C=()=>{m.value=!1},M=()=>{v.value=!0},w=()=>{v.value=!1};return(n,e)=>{const i=d("Button"),r=d("Column"),k=d("DataTable"),N=d("ConfirmPopup"),U=d("Listbox"),D=d("Dialog"),I=d("Calendar");return H(),W("div",z,[l("div",J,[l("div",K,[e[14]||(e[14]=l("h5",null,"Project TimeSheets",-1)),t(k,{value:c.value,expandedRows:x.value,"onUpdate:expandedRows":e[1]||(e[1]=o=>x.value=o),rowGroupMode:"subheader",groupRowsBy:"representative.name",sortMode:"single",sortField:"representative.name",sortOrder:1,scrollable:"",scrollHeight:"400px"},{groupheader:a(o=>[l("div",Q,[l("div",X,[l("img",{alt:o.data.representative.name,src:"/demo/images/avatar/"+o.data.representative.image,width:"32",style:{"vertical-align":"middle"}},null,8,Z),l("span",null,T(o.data.representative.name),1)]),t(i,{onClick:A,label:"Start timer",icon:"pi pi-clock",style:{width:"150px"}})])]),expansion:a(o=>[l("div",$,[e[11]||(e[11]=l("h5",null,"Time records for the task",-1)),t(k,{value:o},{default:a(()=>[t(r,{field:"representative.name",header:"No."},{body:a(u=>e[7]||(e[7]=[p(" 1 ")])),_:2},1024),t(r,{field:"date",header:"Starting time",sortable:!0},{body:a(u=>e[8]||(e[8]=[p(" 1 am ")])),_:2},1024),t(r,{field:"date",header:"Ending time",sortable:!0},{body:a(u=>e[9]||(e[9]=[p(" 2 am ")])),_:2},1024),t(r,{field:"date",header:"Duration",sortable:!0},{body:a(u=>e[10]||(e[10]=[p(" 1 hours(s) ")])),_:2},1024),t(r,{header:"Actions",headerStyle:"width:10rem"},{body:a(()=>[l("div",ee,[t(i,{onClick:M,severity:"warning",icon:"pi pi-pencil"}),t(i,{ref:"popup",onClick:e[0]||(e[0]=u=>j(u)),severity:"danger",icon:"pi pi-trash"},null,512)])]),_:1})]),_:2},1032,["value"])])]),groupfooter:a(o=>[l("td",te,"Total hours of all tasks: "+T(L(o.data.representative.name)),1)]),default:a(()=>[t(r,{expander:!0,headerStyle:"width: 3rem"}),t(r,{field:"representative.name",header:"Representative"}),t(r,{field:"name",header:"Task",style:{"min-width":"150px"}}),t(r,{field:"date",header:"Total duration",style:{"min-width":"150px"}},{body:a(o=>e[6]||(e[6]=[p(" 2 hours")])),_:1})]),_:1},8,["value","expandedRows"]),t(N),t(D,{header:"Timer",visible:m.value,"onUpdate:visible":e[3]||(e[3]=o=>m.value=o),style:{width:"30%"},modal:!0},{footer:a(()=>[t(i,{label:"Cancel",icon:"pi pi-times",onClick:C,class:"p-button-text"}),t(i,{label:"Add",icon:"pi pi-pencil",onClick:C,class:"p-button-text",autofocus:""})]),default:a(()=>[l("div",oe,[e[12]||(e[12]=l("label",{for:"email3",class:"col-12 mb-2"},"Choose a task",-1)),l("div",le,[t(U,{class:"task-timer",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=o=>f.value=o),options:y.value,optionLabel:"name",filter:""},null,8,["modelValue","options"])])])]),_:1},8,["visible"]),t(D,{header:"Edit Time",visible:v.value,"onUpdate:visible":e[5]||(e[5]=o=>v.value=o),style:{width:"30%"},modal:!0},{footer:a(()=>[t(i,{label:"Cancel",icon:"pi pi-times",onClick:w,class:"p-button-text"}),t(i,{label:"Edit",icon:"pi pi-pencil",onClick:w,class:"p-button-text",autofocus:""})]),default:a(()=>[l("div",ae,[e[13]||(e[13]=l("label",{for:"email3",class:"col-12 mb-2"},"Duration",-1)),l("div",se,[t(I,{showIcon:!0,timeOnly:"",modelValue:h.value,"onUpdate:modelValue":e[4]||(e[4]=o=>h.value=o)},null,8,["modelValue"])])])]),_:1},8,["visible"])])])])}}};export{ue as default};
